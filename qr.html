<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional QR Code Generator</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- QR Code Generation Library -->
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <style>
        /* Custom styles for a polished look and feel */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom focus ring color */
        .form-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4);
            border-color: #3B82F6;
        }
        /* Style for the generated QR code image to ensure it's crisp */
        #qrcode-display img {
            margin: auto;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Smooth transition for button hover effects */
        .btn {
            transition: all 0.3s ease-in-out;
        }
    </style>
    <!-- Google Fonts for a clean typeface -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-8 space-y-6">
        
        <!-- Header Section -->
        <div class="text-center">
            <h1 class="text-3xl font-bold text-white">QR Code Generator</h1>
            <p class="text-gray-400 mt-2">Enter text or a URL to create your high-quality QR code instantly.</p>
        </div>

        <!-- Input and Generate Button -->
        <div class="flex flex-col sm:flex-row gap-3">
            <input type="text" id="text-input" placeholder="Enter URL or text here..." class="form-input w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:border-blue-500">
            <button id="generate-btn" class="btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg w-full sm:w-auto flex-shrink-0">
                Generate
            </button>
        </div>

        <!-- QR Code Display Area -->
        <div id="qrcode-container" class="bg-gray-900 p-4 rounded-xl min-h-[284px] flex items-center justify-center">
             <div id="qrcode-display" class="p-4 bg-white rounded-lg inline-block"></div>
             <p id="placeholder-text" class="text-gray-500">Your QR code will appear here</p>
        </div>
        <!-- This hidden div is used to generate the high-resolution QR code for download -->
        <div id="qrcode-high-res" class="hidden"></div>


        <!-- Download Button -->
        <button id="download-btn" class="btn bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg w-full hidden items-center justify-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            Download PNG
        </button>
        
        <!-- Error Message Area -->
        <p id="error-message" class="text-red-400 text-center h-4"></p>

    </div>

    <script>
        // DOM Element References
        const textInput = document.getElementById('text-input');
        const generateBtn = document.getElementById('generate-btn');
        const downloadBtn = document.getElementById('download-btn');
        const qrcodeDisplay = document.getElementById('qrcode-display');
        const qrcodeHighRes = document.getElementById('qrcode-high-res');
        const placeholderText = document.getElementById('placeholder-text');
        const errorMessage = document.getElementById('error-message');

        let qrcodeInstance = null;
        let qrcodeHighResInstance = null;

        // Function to generate the QR codes
        const generateQRCode = () => {
            const text = textInput.value.trim();

            // Clear previous error and QR codes
            errorMessage.textContent = '';
            qrcodeDisplay.innerHTML = '';
            qrcodeHighRes.innerHTML = '';

            if (!text) {
                errorMessage.textContent = 'Please enter text or a URL.';
                downloadBtn.classList.add('hidden');
                placeholderText.classList.remove('hidden');
                return;
            }

            placeholderText.classList.add('hidden');
            downloadBtn.classList.remove('hidden');
            
            // Generate visible QR Code (256x256)
            qrcodeInstance = new QRCode(qrcodeDisplay, {
                text: text,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.L // Low correction level for a simpler QR code
            });

            // Generate hidden, high-resolution QR Code for download (1024x1024)
            qrcodeHighResInstance = new QRCode(qrcodeHighRes, {
                text: text,
                width: 1024,
                height: 1024,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.L // Low correction level for a simpler QR code
            });
        };

        // Event listener for the Generate button
        generateBtn.addEventListener('click', generateQRCode);
        
        // Event listener to allow 'Enter' key to generate
        textInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                generateQRCode();
            }
        });

        // Event listener for the Download button
        downloadBtn.addEventListener('click', () => {
            // Find the generated image in the high-res container
            const imgElement = qrcodeHighRes.querySelector('img');
            
            if (imgElement) {
                const imgUrl = imgElement.src;
                
                // Create a temporary link element to trigger the download
                const downloadLink = document.createElement('a');
                downloadLink.href = imgUrl;
                downloadLink.download = 'qrcode.png';
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            } else {
                errorMessage.textContent = 'Could not find the QR code to download.';
            }
        });

        // Initially hide the display container and download button
        qrcodeDisplay.innerHTML = '';
        downloadBtn.classList.add('hidden');

    </script>
</body>
</html>

