var LC_S2_2020 = ui.import && ui.import("LC_S2_2020", "imageCollection", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/ImgsColl/LC_S2_2020"
    }) || ee.ImageCollection("projects/ee-timperkebunanpusfatja3/assets/ImgsColl/LC_S2_2020"),
    LC_S2_2021 = ui.import && ui.import("LC_S2_2021", "imageCollection", {
      "id": "projects/ee-panganpusfatja3/assets/ImgsColl/LC_S2_2021"
    }) || ee.ImageCollection("projects/ee-panganpusfatja3/assets/ImgsColl/LC_S2_2021"),
    Komp_Pln_2020_ACEH = ui.import && ui.import("Komp_Pln_2020_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2020_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2020_ACEH"),
    Komp_Pln_2021_ACEH = ui.import && ui.import("Komp_Pln_2021_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2021_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2021_ACEH"),
    Komp_Pln_2022_ACEH = ui.import && ui.import("Komp_Pln_2022_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2022_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2022_ACEH"),
    Komp_Pln_2023_Jan_Apr_ACEH = ui.import && ui.import("Komp_Pln_2023_Jan_Apr_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2023_Jan_Apr_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2023_Jan_Apr_ACEH"),
    Komp_S2k_2020_ACEH = ui.import && ui.import("Komp_S2k_2020_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2020_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2020_ACEH"),
    Komp_S2k_2021_ACEH = ui.import && ui.import("Komp_S2k_2021_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2021_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2021_ACEH"),
    Komp_S2k_2022_ACEH = ui.import && ui.import("Komp_S2k_2022_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2022_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2022_ACEH"),
    Komp_S2k_2023_Jan_Apr_ACEH = ui.import && ui.import("Komp_S2k_2023_Jan_Apr_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2023_Jan_Apr_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S2k_2023_Jan_Apr_ACEH"),
    Komp_S1_2020_ACEH = ui.import && ui.import("Komp_S1_2020_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2020_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2020_ACEH"),
    Komp_S1_2021_ACEH = ui.import && ui.import("Komp_S1_2021_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2021_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2021_ACEH"),
    Komp_S1_2022_ACEH = ui.import && ui.import("Komp_S1_2022_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2022_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2022_ACEH"),
    Komp_S1_2023_Jan_Apr_ACEH = ui.import && ui.import("Komp_S1_2023_Jan_Apr_ACEH", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2023_Jan_Apr_ACEH"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_S1_2023_Jan_Apr_ACEH"),
    Komp_Pln_2020_SumUt = ui.import && ui.import("Komp_Pln_2020_SumUt", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2020_Sumatera_Utara"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2020_Sumatera_Utara"),
    Komp_Pln_2021_SumUt = ui.import && ui.import("Komp_Pln_2021_SumUt", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2021_Sumatera_Utara"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2021_Sumatera_Utara"),
    Komp_Pln_2022_SumUt = ui.import && ui.import("Komp_Pln_2022_SumUt", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2022_Sumatera_Utara"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2022_Sumatera_Utara"),
    Komp_Pln_2023_Jan_Apr_SumUt = ui.import && ui.import("Komp_Pln_2023_Jan_Apr_SumUt", "image", {
      "id": "projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2023_Jan_Apr_Sumatera_Utara"
    }) || ee.Image("projects/ee-timperkebunanpusfatja3/assets/Annual/Komp_Pln_2023_Jan_Apr_Sumatera_Utara");
/* Cek LandCover Sentinel-1/2 th 2020/21
   by Dr Dede Dirgahayu
*/
var LC = require('users/dededirgahayu11/Fungsi:DD_LCover.js');
var Anno = require('users/dededirgahayu11/Fungsi:DD_Anno1.js');
var Leg = require('users/dededirgahayu11/Fungsi:DD_Legend.js');
var Adm = require('users/dededirgahayu11/Fungsi:DD_Admin20.js');
var Save = require('users/dededirgahayu11/Fungsi:DD_IO.js');
var Klas = require('users/dededirgahayu11/Fungsi:DD_Klas.js');
//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
//var ImgColTh_Pln = ee.ImageCollection(ImgTh_Pln); print('ImgColTh_Pln',ImgColTh_Pln);
//Komp_Pln_2022_ACEH = Kon2Flt('Pln',Komp_Pln_2022_ACEH);
var Bounds,LstNam_Prv,LstNam2_Prv,LstNam_Kab,Prv_Id,Prv_Nam,Indo20_Kec,Shp_Kec;
var Indo20_Kab,Indo20_Des,LstNam20_Prv,Par,Feat_Grd,ULx,ULy,LRx,LRy,dx,dy,Bounds_Kords;
LstNam_Prv = LC.LstNam10_Prv; LstNam2_Prv = LC.LstNam2_Prv;
print('List Nama Prov',LstNam2_Prv);
var Tgl_R, LC_Thn=[2020,2021],LC_Th,Mask,View_Bounds,View_Kords,View_Sc,View_Cen,Sc_Img,Img_Pil,
    LC_Pal,LC_Kls,View_Zoom=11,LC_NumKls=15,View_Obj,Ket_Lyr,InfoLC,Prv_Pil,Adm_OL,Shp_Pil,Img_Grd,Feat_Grd;
//Info Klas, Palet LandCover
LC_Th = LC_Thn[1]; InfoLC = LC.GetInfoLC(LC_Th);
//LC_Pal = ee.String(LC_S2_2021.get('Class_Pal')).split(',').getInfo(); 
LC_Kls = InfoLC.LC_ClsNam; LC_Pal = InfoLC.LC_Pal; print('LC_Kls',LC_Kls);   
Prv_Id = 13; View_Obj=LC.GetLCPrv(Prv_Id,LC_Th); Prv_Pil = LC.PrvShpId(Prv_Id);
Prv_Nam = LstNam_Prv[Prv_Id-1]; Ket_Lyr = 'LandCover ' + LC_Th + ' of ' + Prv_Nam  ;
Map_Ops('CenO',View_Obj,View_Zoom); Bounds = Prv_Pil.geometry().bounds(); 
Bounds_Kords= GetKords(Bounds); ULx = Bounds_Kords[3][0].toFixed(6); ULy = Bounds_Kords[3][1].toFixed(6);
LRx = Bounds_Kords[1][0].toFixed(6); LRy = Bounds_Kords[1][1].toFixed(6);
var Bts_Grds = BtsGrds(ULx,ULy,LRx,LRy,0.25,0.25);
ULx = Bts_Grds.ULx; ULy = Bts_Grds.ULy; LRx = Bts_Grds.LRx; LRy = Bts_Grds.LRy;  
print('Bounds',Bounds,'Bts_Grds', Bts_Grds);
SetMap(0,View_Obj,{min:1,max:LC_NumKls,palette:LC_Pal},Ket_Lyr);
Adm_OL = LC.Fc2Img(Prv_Pil,2,2); Feat_Grd = LC.Fc2Img(Anno.Grids(ULx,ULy,LRx,LRy,0.25,0.25),1,1); // Lama
SetMap(1,Adm_OL,{min:1,max:2,palette:['brown','darkred']},'Admin boundary of ' + Prv_Nam);
SetMap(2,Feat_Grd,{min:1,max:1,palette:'black'},'Grids 0.25 Deg'); 
//Map.addLayer(Komp_Pln_2022_ACEH,{bands:['Nir','Red','Blue'],min:[0,0,0],max:[0.35,0.15,0.1]},'RGB Planet');
//@@@@@@@@@@ GUI
var Grds_Deg = ['0.05','0.1','0.25','0.5','1.0','User'],Grds_Mtr = ['100','250', '300','500','1000','3000','5000','User'],Grd_Unt='Deg';
var Judul = 'LAND COVER CLASSIFICATION BASED ON SENTINEL-1/2 IMAGERY';
var Btn_LoadKab = Btn('Load District'),CBx_Clp = CBx('Clip'),Lbl_Leg=Lbl(LC_Kls), Lbl_Judul =Lbl(Judul,'',16),
  Lbl_Inv = Lbl('Inventor : Dr Ir Dede Dirgahayu Domiri, M.Si; PRPJ,ORPA-BRIN','red',12); StyUI(Lbl_Inv,TxtBold('red',10,'center'));
var Sel_Prv = Sel(LstNam2_Prv,'Province Names'),Sel_Kab=Sel([],'District Names');
var Lbl_Grd=Lbl('Grids'),Sel_Grd = Sel(Grds_Deg,'Grid Interval'),Sel_Unit = Sel(['Deg','meter'],'Unit'),TB_Grd=TB(0.5,'red',11,40);
var Pnl_Prv = Pnl([Sel_Prv,Btn_LoadKab,Sel_Kab,CBx_Clp],'h');
var Pnl_Grd = Pnl([Lbl_Grd,Sel_Grd,Sel_Unit,TB_Grd],'h');
var LC_Leg = Leg.Legenda('Land Cover', LC_Th,LC_Kls,LC_Pal,0,0,'1px solid black'),
    Pnl_Leg=Pnl([Lbl('LEGENDS','green',12),LC_Leg],'v','99%','250px');
var Pnl_Main = Pnl([Lbl_Judul,Lbl_Inv,Pnl_Prv,Pnl_Grd,Pnl_Leg],'v','275px',0,'3px solid red');
ui.root.insert(0,Pnl_Main);
StyUI(Lbl_Judul,TxtBold('darkmagenta')); StyUI(Lbl_Judul,BordBG());
Shw(Sel_Kab,false);
// GUI Events
Sel_Unit.onChange(function(Cek){
if(Cek=='Deg') Sel_Grd.items().reset(Grds_Deg); else Sel_Grd.items().reset(Grds_Mtr);
  });
Sel_Prv.onChange(function(Cek){
  Prv_Id = LstNam2_Prv.indexOf(Cek)+1; Prv_Nam = LstNam_Prv[Prv_Id-1];
  View_Obj=LC.GetLCPrv(Prv_Id,LC_Th); Ket_Lyr = 'LandCover ' + LC_Th + ' of ' + Prv_Nam  ;
Prv_Pil = LC.PrvShpId(Prv_Id); Shp_Pil = Prv_Pil; Bounds = Prv_Pil.geometry().bounds();
//print('Prv_Pil',Prv_Pil,Prv_Pil.bounds());
Map_Ops('CenO',View_Obj,View_Zoom);
//if(CBx_Clp.getValue()===true)Img_Pil=View_Obj.clip(Prv_Pil); else Img_Pil=View_Obj;
SetMap(0,Img_Pil,{min:1,max:LC_NumKls,palette:LC_Pal},Ket_Lyr);
Adm_OL = LC.Fc2Img(Prv_Pil,2,2); Shw(Sel_Kab,false);
SetMap(1,Adm_OL,{min:1,max:2,palette:['brown','darkred']},'Admin boundary of ' + Prv_Nam);
 Shw(Btn_LoadKab,true);
}
  );
Btn_LoadKab.onClick(function(Klik){
  Shw(Sel_Kab,true); LstNam_Kab = LstProNU(Prv_Pil,'KABKOT');
  Sel_Kab.items().reset(LstNam_Kab.getInfo());
  Shw(Btn_LoadKab,false);
});  
Sel_Kab.onChange(function(Cek){
  Shp_Pil = FltEq(Prv_Pil,"KABKOT",Cek); print('Feat Kab',Shp_Pil);
  Indo20_Kec = Adm.Indo20_Kec; Shp_Kec = FltEq(Indo20_Kec,"KABKOT",Cek);
  print('Shp_Pil',Shp_Pil,'Shp_Kec',Shp_Kec); Bounds = Shp_Kec.geometry().bounds();
  Map_Ops('CenO',Shp_Pil,12);
  if(CBx_Clp.getValue()===true){ Img_Pil=View_Obj.clip(Shp_Pil);
  SetMap(0,Img_Pil,{min:1,max:LC_NumKls,palette:LC_Pal},Ket_Lyr); }
  Adm_OL = ee.ImageCollection([Adm_OL,LC.Fc2Img(Shp_Kec,1,2)]).max(); // Shw(Sel_Kab,false);
SetMap(1,Adm_OL,{min:1,max:2,palette:['brown','darkred']},'Admin boundary of ' + Cek);
}); 
Sel_Grd.onChange(function(Val){ if(Val !='User')TB_Grd.setValue(Val);
Bounds_Kords= GetKords(Bounds); print('Bounds_Kords',Bounds_Kords); 
ULx = Bounds_Kords[3][0].toFixed(6); ULy = Bounds_Kords[3][1].toFixed(6);
LRx = Bounds_Kords[1][0].toFixed(6); LRy = Bounds_Kords[1][1].toFixed(6);
dx=parseFloat(TB_Grd.getValue()); if (Grd_Unt=='meter') dx=Anno.m2Deg(dx); dy=dx;
Bts_Grds = BtsGrds(ULx,ULy,LRx,LRy,dx,dy);
ULx = Bts_Grds.ULx; ULy = Bts_Grds.ULy; LRx = Bts_Grds.LRx; LRy = Bts_Grds.LRy;
 Feat_Grd = LC.Fc2Img(Anno.Grids(ULx,ULy,LRx,LRy,dx,dy),1,1);
 SetMap(2,Feat_Grd,{min:1,max:1,palette:'black'},'Grids ' + dx + Grd_Unt); 
   });
CBx_Clp.onChange(function(Val){
  if (Val) Img_Pil=View_Obj.clip(Prv_Pil); else Img_Pil=View_Obj;
  SetMap(0,Img_Pil,{min:1,max:LC_NumKls,palette:LC_Pal},Ket_Lyr); 
   });
//@@@@@@@@@@@@@@@@@@@@@@@@@
function Map_Ops(Ops,Obj,FZoom) { return LC.MapOps(Ops,Obj,FZoom) }
//@@@@@@@@@@@@
function JumEl(ObjArr,Opsi) { // Opsi = 0, object di server
  if(Opsi > 0) return ee.List(ObjArr).length().getInfo(); else return ObjArr.size().getInfo();
}
function LstProNU(Fc,Pro) { // List Property FeatCol tanpa pengulangan
  return Fc.aggregate_array(Pro).distinct();
}
function SetMap(NoLyr,Img,VisPar,KetLyr,OnOf,Opac) {
  return Map.layers().set(NoLyr,ui.Map.Layer(Img,VisPar,KetLyr,OnOf,Opac));
}  
function AddInfo(f){
  var Yr,Bl,Dy,No,Lok_No,Tgl,Img_Date,Dte,Yr2K, NoT,No_Lok,NoLok = ee.String(ee.Feature(f).get('No_Lok')).split('_');
  //No = ee.Number(parseInt(NoLok.get(1),10)); 
  No = ee.Number.parse(NoLok.get(1)) ; Tgl = NoLok.get(2); Dte=ee.Date(Tgl);
  Yr = Dte.get('year'); Bl = Dte.get('month'); Dy = Dte.get('day'); Img_Date=ee.Feature(f).get('Img_Date');
  Yr2K = ee.Date(Img_Date).difference('2000-01-01','year').toFloat();
  NoT = ee.Algorithms.If(No.lt(10),ee.String('00').cat(No), ee.String('0').cat(No)); 
  Lok_No = ee.String('Lok_').cat(NoT).cat('_').cat(Tgl);
  var dT_Obs = Dte.difference(ee.Date(Img_Date),'month');
 //return ee.Feature(f).set('Date_Obs',Tgl).set('Year_Obs',Yr).set('Month_Obs',Bl).set('Yr2K',Yr2K);
 return ee.Feature(f).set('No',NoT).set('No_Lok',Lok_No).set('Date_Obs',Tgl).set('Year_Obs',Yr).set('Month_Obs',Bl)
        .set('Yr2K',Yr2K).set('dT_Obs',dT_Obs).set('system:time_start',ee.Date(Img_Date).millis());
}
function StkImg(Img,PilBnds,Geom,Sc){
  if(PilBnds != 'All' ) Img=Img.select(PilBnds);
  else PilBnds = Img.bandNames().getInfo();
  var i,JumBnd,Mean,Std,bb=[],ba=[],Redu,Redu_MeanStd,Stk,MeanT,StdT;
  Redu_MeanStd = ee.Reducer.mean().combine(ee.Reducer.stdDev(),null,true);
  Redu = ee.Reducer.minMax().combine(Redu_MeanStd,null,true);
  Stk = Img.reduceRegion(Redu,Geom,Sc,'EPSG:4326',null,true,1e13);
  JumBnd = JumEl(PilBnds,1);
  //MeanT = (Stk.get(PilBnds[0]+'_mean')).getInfo(); StdT=Stk.get(PilBnds[0]+'_stdDev');  
 /* for(i=0; i < JumBnd; i++ ) {Mean=Stk.get(PilBnds[i]+'_mean').getInfo();
  Std=Stk.get(PilBnds[i]+'_stdDev').getInfo();
  bb[i]=Mean-2.5*Std; ba[i]=Mean+2.5*Std;  
  } 
  return {min:bb,max:ba}; */ 
  return Stk;
}
function BndStk(Bnds,ParStk) {
  var i,Bnd_Stk = [], JumBn = JumEl(Bnds,1);
  for(i=0; i < JumBn; i++) {Bnd_Stk[i]=Bnds[i]+ '_' + ParStk;}
 return Bnd_Stk; 
  }
//!!!!!!!!!!! CLASSIFIER
  function SetClsfRF(TrnFea,ClasPro,BndsPro,NumTree) {
  return Klas.SetClsfRF(TrnFea,ClasPro,BndsPro,NumTree)}
//ee.Classifier.libsvm(decisionProcedure, svmType, kernelType, shrinking, degree, gamma, coef0, cost, nu, terminationEpsilon, lossEpsilon, oneClass)
function SetClsfSVM(TrnFea,ClasPro,InPro,Type,Kernel) {
  return Klas.SetClsfSVM(TrnFea,ClasPro,InPro,Type,Kernel);
  }
function SetClsfCart(TrnFea,TrnPro,InPro,minLeaf,Nods) {
  return Klas.SetClsfCart(TrnFea,TrnPro,InPro,minLeaf,Nods);
  }
function UjiTrnSam(TrainS,BndClas,BndsIn,ProTes,Clasf,RF_NumTre,SVMKrnl) {
  return Klas.UjiTrnSam(TrainS,BndClas,BndsIn,ProTes,Clasf,RF_NumTre,SVMKrnl); 
  }
//@@@@@@@@@@@@@@@@ SAVE OUTPUT
function SimFea2Ast(FC,NamSim,Fld) { 
  return Save.SaveFeat2Ast(FC,NamSim,Fld); 
  }
function SimFea2Drv(FC,NamSim,Fld,FormTab,Select){
  return Save.SaveFeat2Drv(FC,NamSim,Fld,FormTab,Select);
  }
function SimImg2Ast(ImgIn,NamSim,Reg,Sc,Fld) {
  return Save.Ex2Ast(ImgIn,NamSim,Reg,Sc,Fld); 
}
function SimImg2Drv(ImgIn,NamSim,Reg,Sc,Fld) {
  return Save.Ex2Drv(ImgIn,NamSim,Reg,Sc,Fld); 
}
//$$$$$$$$$$ SIMPLE GUI
  function Sel(Items,PH,Warna,Siz) {
    return ui.Select({items : Items,placeholder:PH,style:StyPar(Warna,Siz)});
  }
  function Lbl(Txt,Warna,Siz) {
    return ui.Label(Txt,StyPar(Warna,Siz));
  }
function TB(Val,Warna,Sz,Wd,PH) { // Unt :'px','pt','%'
//var LenVal; if(Val !=='') LenVal = ee.String(Val).length().getInfo(); 
var UI =  ui.Textbox({placeholder: PH || "",value : Val,style: {color:Warna||'darkblue', 
    fontSize:Sz +'px' || '11px',width:Wd +'px' || null}});
return UI;
}  
  function Btn(Txt,Warna,Siz,Bord) {
 return ui.Button({label:Txt,style: StyPar(Warna || 'red',Siz || '11px','bold','center','','',Bord || '1px dashed red')});
}
function Shw(UI,Ops) {
  return UI.style().set({shown : Ops});
}
  function CBx(label,val,Warna,Siz) {
    return ui.Checkbox(label || '', val || false);
  }
  function Pnl(Wgt,Flow,Lx,Ly,Bord,Pos) {
  return ui.Panel(Wgt,ui.Panel.Layout.flow(Flw(Flow) || 'vertical')
    ,{width: Lx || null,height:Ly ||  null ,border:Bord || null,position : Pos || 'top-left'});
  }
  function Flw(hv) {
  if(hv=='h') return 'horizontal';
  else return 'vertical';
} 
  function TxtBold(Warna,Siz,Algn){
  return {color: Warna || 'darkblue',fontSize: Siz + 'px' ||'14px', fontWeight: 'bold',textAlign: Algn || 'center' };
  }
  function BordBG(WarBG,Bord,Pad){
  return {backgroundColor : WarBG || 'lightgray',padding: Pad +'px' || '8px', border: Bord || '2px solid darkblue'  };
  }
  function StyPar(Warna,Siz,Bold,Algn,WarBG,Pad,Bord,Wd){
  return {color: Warna || 'blue',fontSize: Siz + 'px' ||'14px', fontWeight: Bold || 'normal',textAlign: Algn || 'left',
          backgroundColor : WarBG || 'white',padding: Pad +'px' || null, border: Bord || null,width: Wd || null};
  }
  function StyUI(UI,Sty_Par) {
    return UI.style().set(Sty_Par);
  }
  function Sty_Wxy(UI,Wx,Wy) {
    return StyUI(UI,{width:Wx ||null,height:Wy ||null});
  }
  function Mrgn(UI,x1,y1,x2,y2) {
    return UI.style().set('margin',y1+'px ' + x1+'px ' + y2+'px ' + x2+'px'); 
  }
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  
  //Konversi Byte -> Float
  function Kon2Flt(Kode_Sat,Img){
  var Refl_Nir,Refl_RGB,Indx,Bnds=Img.bandNames().getInfo();
  Refl_RGB=Img.select(['Red','Green','Blue']).divide(250/0.3).toFloat();
  if(Kode_Sat !='Pln')Refl_Nir=Img.select(['Nir','Swir1','Swir2']).divide(250/0.6).toFloat();
    else Refl_Nir=Img.select('Nir').divide(250/0.6).toFloat();
  if(Kode_Sat !='Pln')Indx=Img.select(['NDBI','EVI','NDWI']).subtract(128).divide(125).toFloat();
    else Indx=Img.select(['EVI','NDWI']).subtract(128).divide(125).toFloat();  
    return Img.addBands(ee.Image.cat(Refl_RGB,Refl_Nir,Indx),null,true);
}
function FltEq(Obj,Pro,Val) {return LC.ObjFltEq(Obj,Pro,Val) }
function GetBoundFc(Fc) { return Fc.geometry().bounds(); }
function GetKords(Geom){ // sdh dlm bentuk Geometry
  var i,Jum,Kords=[],Typ = Geom.type().getInfo();
  if(Typ == 'Point')Kords=[Geom.coordinates().get(0).getInfo().toFixed(6),Geom.coordinates().get(1).getInfo().toFixed(6)];
  else {for(i=0; i < 4; i++){Kords[i]=ee.List(Geom.coordinates().get(0)).get(i).getInfo()}    }
  return Kords;
} 
function BtsGrds(ULx,ULy,LRx,LRy,dx,dy) {
  var x1,y1,x2,y2,k; k = Math.floor((ULx-Math.round(ULx))/dx);
  x1 = Math.round(ULx) + k*dx; k = Math.ceil((LRx-Math.round(LRx))/dx);
  x2 = Math.round(LRx) + k*dx;
  k = Math.floor((ULy-Math.round(ULy))/dy); print('k = ' + k);
  y1 = Math.round(ULy) + k*dy;  k = Math.ceil((LRy-Math.round(LRy))/dy);
  y2 = Math.round(LRy) - k*dy; return { ULx : x1,ULy:y1,LRx:x2,LRy:y2};
  }
function GetImgPln(NamPrv) {
var ImgTh_Pln = [Kon2Flt('Pln',Komp_Pln_2020_ACEH).set('system:time_start',ee.Date('2020-06-16').millis()),
Kon2Flt('Pln',Komp_Pln_2021_ACEH).set('system:time_start',ee.Date('2021-06-16').millis()),
  Kon2Flt('Pln',Komp_Pln_2022_ACEH).set('system:time_start',ee.Date('2022-06-16').millis()),
  Kon2Flt('Pln',Komp_Pln_2023_Jan_Apr_ACEH).set('system:time_start',ee.Date('2023-03-01').millis())];
return ImgTh_Pln;
  }