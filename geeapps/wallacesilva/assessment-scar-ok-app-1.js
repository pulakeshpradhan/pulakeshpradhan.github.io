var PANTANAL = ui.import && ui.import("PANTANAL", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -57.8197351145971,
                -18.213339955986633
              ],
              [
                -58.2372155833471,
                -19.461057388474366
              ],
              [
                -58.2811608958471,
                -20.122643422462737
              ],
              [
                -58.2152429270971,
                -20.740350444963443
              ],
              [
                -57.9955163645971,
                -21.130269737174068
              ],
              [
                -58.2152429270971,
                -22.212485598012698
              ],
              [
                -57.3802819895971,
                -22.25316374978147
              ],
              [
                -57.2704187083471,
                -21.70301892501327
              ],
              [
                -57.0287194895971,
                -21.25319036894164
              ],
              [
                -56.9408288645971,
                -20.92517558502816
              ],
              [
                -56.8309655833471,
                -20.45239598142188
              ],
              [
                -56.2596765208471,
                -20.514146243279068
              ],
              [
                -55.8641687083471,
                -20.514146243279068
              ],
              [
                -55.3148523020971,
                -20.040096033851874
              ],
              [
                -54.8314538645971,
                -18.7759588881837
              ],
              [
                -54.6336999583471,
                -17.962698809910727
              ],
              [
                -54.8094812083471,
                -17.292593875632203
              ],
              [
                -54.8094812083471,
                -16.282871167964963
              ],
              [
                -55.2489343333471,
                -16.24068400688331
              ],
              [
                -55.9740319895971,
                -15.522134727464486
              ],
              [
                -56.8089929270971,
                -16.07184506830297
              ],
              [
                -57.3143640208471,
                -15.733738152463195
              ],
              [
                -57.9076257395971,
                -15.45861121014497
              ],
              [
                -58.4349694895971,
                -15.733738152463195
              ],
              [
                -59.3138757395971,
                -15.945121643336288
              ],
              [
                -59.4017663645971,
                -16.43045465805966
              ],
              [
                -58.7425866770971,
                -16.514737844355356
              ],
              [
                -58.6546960520971,
                -17.04066871394901
              ],
              [
                -58.3690515208471,
                -17.481311987392477
              ],
              [
                -57.9295983958471,
                -17.669834538260584
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#d63000",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-57.8197351145971, -18.213339955986633],
          [-58.2372155833471, -19.461057388474366],
          [-58.2811608958471, -20.122643422462737],
          [-58.2152429270971, -20.740350444963443],
          [-57.9955163645971, -21.130269737174068],
          [-58.2152429270971, -22.212485598012698],
          [-57.3802819895971, -22.25316374978147],
          [-57.2704187083471, -21.70301892501327],
          [-57.0287194895971, -21.25319036894164],
          [-56.9408288645971, -20.92517558502816],
          [-56.8309655833471, -20.45239598142188],
          [-56.2596765208471, -20.514146243279068],
          [-55.8641687083471, -20.514146243279068],
          [-55.3148523020971, -20.040096033851874],
          [-54.8314538645971, -18.7759588881837],
          [-54.6336999583471, -17.962698809910727],
          [-54.8094812083471, -17.292593875632203],
          [-54.8094812083471, -16.282871167964963],
          [-55.2489343333471, -16.24068400688331],
          [-55.9740319895971, -15.522134727464486],
          [-56.8089929270971, -16.07184506830297],
          [-57.3143640208471, -15.733738152463195],
          [-57.9076257395971, -15.45861121014497],
          [-58.4349694895971, -15.733738152463195],
          [-59.3138757395971, -15.945121643336288],
          [-59.4017663645971, -16.43045465805966],
          [-58.7425866770971, -16.514737844355356],
          [-58.6546960520971, -17.04066871394901],
          [-58.3690515208471, -17.481311987392477],
          [-57.9295983958471, -17.669834538260584]]]),
    AMAZONIA = ui.import && ui.import("AMAZONIA", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -70.77848991289744,
                -9.753320737155736
              ],
              [
                -70.80046256914744,
                -11.060767450912051
              ],
              [
                -70.55876335039744,
                -11.1577915828599
              ],
              [
                -69.93254264727244,
                -11.20090303656592
              ],
              [
                -69.64689811602244,
                -11.093112411240428
              ],
              [
                -69.17448600664744,
                -11.082331155053787
              ],
              [
                -68.71306022539744,
                -11.308653520698952
              ],
              [
                -68.43840202227244,
                -11.168570047122666
              ],
              [
                -67.97697624102244,
                -10.845043633010153
              ],
              [
                -67.87809928789744,
                -10.769503358494859
              ],
              [
                -67.71330436602244,
                -10.780295989344307
              ],
              [
                -67.52653678789744,
                -10.65075897798477
              ],
              [
                -67.18596061602244,
                -10.380713976300619
              ],
              [
                -66.68058952227244,
                -10.099619713681589
              ],
              [
                -66.08732780352244,
                -9.883225718516945
              ],
              [
                -65.51603874102244,
                -9.915693974364732
              ],
              [
                -65.43913444414744,
                -10.023898210284619
              ],
              [
                -65.59294303789744,
                -10.445546277456165
              ],
              [
                -65.46110710039744,
                -10.855833546606831
              ],
              [
                -65.42814811602244,
                -11.147012718650565
              ],
              [
                -65.37321647539744,
                -11.64242097434737
              ],
              [
                -65.20842155352244,
                -11.889796928942118
              ],
              [
                -64.94474967852244,
                -12.179907785600118
              ],
              [
                -64.45036491289744,
                -12.523332193121238
              ],
              [
                -64.18669303789744,
                -12.63055922817948
              ],
              [
                -63.70329460039744,
                -12.609117405675613
              ],
              [
                -63.40666374102244,
                -12.737741314287957
              ],
              [
                -63.11003288164744,
                -12.909138269770514
              ],
              [
                -62.75847038164744,
                -13.101819401035584
              ],
              [
                -62.40690788164744,
                -13.272965075440183
              ],
              [
                -62.13224967852244,
                -13.443990241844306
              ],
              [
                -61.91252311602244,
                -13.614893462359412
              ],
              [
                -61.64885124102244,
                -13.604215610842417
              ],
              [
                -61.05558952227244,
                -13.64692412382228
              ],
              [
                -60.64909538164744,
                -13.860350323846623
              ],
              [
                -60.59416374102244,
                -13.988312150558667
              ],
              [
                -60.61613639727244,
                -14.318549417262567
              ],
              [
                -60.53923210039744,
                -14.924486401265577
              ],
              [
                -60.73698600664744,
                -15.06244629246808
              ],
              [
                -60.36345085039744,
                -15.645125405124709
              ],
              [
                -60.33049186602244,
                -16.342151190498033
              ],
              [
                -59.04509147539744,
                -16.415934488372784
              ],
              [
                -58.78141960039744,
                -16.331608441593236
              ],
              [
                -58.51774772539744,
                -16.373776023150896
              ],
              [
                -58.33098014727244,
                -16.689740864052254
              ],
              [
                -58.22111686602244,
                -16.72130880680918
              ],
              [
                -58.01237663164744,
                -16.64764216212115
              ],
              [
                -57.88054069414744,
                -15.941129860473076
              ],
              [
                -57.80363639727244,
                -15.983380775463306
              ],
              [
                -57.49601920977244,
                -15.972818882361233
              ],
              [
                -57.17741569414744,
                -15.48637470085819
              ],
              [
                -56.85881217852244,
                -15.06244629246808
              ],
              [
                -56.52922233477244,
                -14.510078127851394
              ],
              [
                -56.38640006914744,
                -14.244021749292477
              ],
              [
                -56.12272819414744,
                -13.988312150558667
              ],
              [
                -55.85905631914744,
                -13.76433262028774
              ],
              [
                -56.02385124102244,
                -13.41193226870925
              ],
              [
                -56.21061881914744,
                -13.294349841061207
              ],
              [
                -56.15016887831046,
                -13.008012327529876
              ],
              [
                -56.16667350664744,
                -12.727025138534188
              ],
              [
                -55.92217815793116,
                -12.721745743711418
              ],
              [
                -55.73820670977244,
                -12.609117405675613
              ],
              [
                -55.65031608477244,
                -12.994792800110167
              ],
              [
                -55.22184928789744,
                -13.582858463358955
              ],
              [
                -54.37590202227244,
                -13.828348819754673
              ],
              [
                -53.70573600664744,
                -13.913676360263572
              ],
              [
                -52.94767936602244,
                -13.742989988801344
              ],
              [
                -52.28849967852244,
                -13.529457184997014
              ],
              [
                -51.79411491289744,
                -13.198103586051701
              ],
              [
                -51.31071647539744,
                -12.694873896525001
              ],
              [
                -50.93718131914744,
                -12.373139509405615
              ],
              [
                -50.95915397539744,
                -12.01877373401922
              ],
              [
                -51.18986686602244,
                -12.029519020910936
              ],
              [
                -51.23381217852244,
                -11.771514449813356
              ],
              [
                -51.18986686602244,
                -11.362513595420223
              ],
              [
                -51.48649772539744,
                -11.006851255713487
              ],
              [
                -50.94816764727244,
                -10.920564832558837
              ],
              [
                -50.44279655352244,
                -10.704739465553292
              ],
              [
                -50.27800163164744,
                -10.359100218314566
              ],
              [
                -50.01432975664744,
                -9.677519400815672
              ],
              [
                -49.82756217852244,
                -9.124744390338215
              ],
              [
                -49.76164420977244,
                -8.918586573839669
              ],
              [
                -49.53093131914744,
                -8.777463958894357
              ],
              [
                -49.35515006914744,
                -8.571111481407018
              ],
              [
                -49.17936881914744,
                -8.332037191710521
              ],
              [
                -49.01457389727244,
                -8.647149256302665
              ],
              [
                -48.90471061602244,
                -8.994553142635349
              ],
              [
                -48.87175163164744,
                -9.23320084144871
              ],
              [
                -48.71794303789744,
                -9.330783132769568
              ],
              [
                -48.54216178789744,
                -9.319941999049835
              ],
              [
                -48.52018913164744,
                -9.037955462326984
              ],
              [
                -48.45427116289744,
                -8.7231716880755
              ],
              [
                -48.36638053789744,
                -8.31029585509327
              ],
              [
                -48.44328483477244,
                -7.907866983205392
              ],
              [
                -48.47624381914744,
                -7.701060370906081
              ],
              [
                -48.01481803789744,
                -7.221756529904371
              ],
              [
                -47.82805045977244,
                -6.6219153743870205
              ],
              [
                -47.93791374102244,
                -6.043195290227873
              ],
              [
                -47.98185905352244,
                -5.737202574016412
              ],
              [
                -47.70720085039744,
                -5.46385571638907
              ],
              [
                -47.08098014727244,
                -5.5841440732561844
              ],
              [
                -46.52067741289744,
                -5.5841440732561844
              ],
              [
                -45.94938835039744,
                -5.452919205277319
              ],
              [
                -45.56486686602244,
                -5.32166564106757
              ],
              [
                -45.44401725664744,
                -4.883955280350111
              ],
              [
                -44.88371452227244,
                -4.654041276471385
              ],
              [
                -44.65300163164744,
                -4.413098467682047
              ],
              [
                -44.43327506914744,
                -4.095373210786159
              ],
              [
                -44.34538444414744,
                -3.5472801913472747
              ],
              [
                -43.85099967852244,
                -3.5801754417922114
              ],
              [
                -43.84001335039744,
                -3.2950451720189498
              ],
              [
                -43.86198600664744,
                -3.0646876619713614
              ],
              [
                -43.60930045977244,
                -2.7135725720985446
              ],
              [
                -43.29069694414744,
                -2.570902183894771
              ],
              [
                -43.32365592852244,
                -2.307469439887812
              ],
              [
                -43.68620475664744,
                -2.1098625434769605
              ],
              [
                -44.12565788164744,
                -2.329424109683637
              ],
              [
                -44.33439811602244,
                -2.0769255559875495
              ],
              [
                -44.51017936602244,
                -1.5827944339928646
              ],
              [
                -44.81779655352244,
                -1.1983869173869854
              ],
              [
                -45.24626335039744,
                -1.2093708204104454
              ],
              [
                -47.43254264727244,
                -0.35252481360850424
              ],
              [
                -47.93791374102244,
                -0.462385300010413
              ],
              [
                -48.28947624102244,
                -0.4184412868306323
              ],
              [
                -48.32243522539744,
                -0.19871804567540613
              ],
              [
                -48.56413444414744,
                -0.08885512720650966
              ],
              [
                -49.36613639727244,
                0.2736926244349818
              ],
              [
                -49.51994499102244,
                0.54834349753916
              ],
              [
                -49.80558952227244,
                0.49341412897545733
              ],
              [
                -49.92643913164744,
                0.7131283773483188
              ],
              [
                -49.76164420977244,
                1.163506268391221
              ],
              [
                -49.87150749102244,
                1.8773615525553682
              ],
              [
                -50.16813835039744,
                1.9761825898301724
              ],
              [
                -50.36589225664744,
                2.404335361926711
              ],
              [
                -50.64055045977244,
                2.3494509845645504
              ],
              [
                -50.98112663164744,
                3.391828021939104
              ],
              [
                -50.97014030352244,
                4.1044072850211535
              ],
              [
                -51.67326530352244,
                4.630217951065921
              ],
              [
                -51.83806022539744,
                4.1482386827256175
              ],
              [
                -52.81584342852244,
                2.55799971463263
              ],
              [
                -53.12346061602244,
                2.503121644704321
              ],
              [
                -53.54094108477244,
                2.481169770510124
              ],
              [
                -54.18913444414744,
                2.371404997182424
              ],
              [
                -54.83732780352244,
                2.6896974064263235
              ],
              [
                -55.55143913164744,
                2.7006715817940767
              ],
              [
                -56.26555045977244,
                2.53604876562389
              ],
              [
                -56.16667350664744,
                2.0969558419821004
              ],
              [
                -57.19938835039744,
                2.195763412459527
              ],
              [
                -58.9621067477744,
                1.6410724980848648
              ],
              [
                -59.5333958102744,
                3.0022268360648416
              ],
              [
                -59.3136692477744,
                4.230221917716307
              ],
              [
                -59.9728489352744,
                5.674964031895787
              ],
              [
                -61.2912083102744,
                5.2812633961239985
              ],
              [
                -61.2033176852744,
                4.974877849842486
              ],
              [
                -63.4445286227744,
                4.230221917716307
              ],
              [
                -65.2023411227744,
                4.536938861239733
              ],
              [
                -64.3234348727744,
                2.2559481787763658
              ],
              [
                -66.2570286227744,
                1.2896255200964404
              ],
              [
                -67.1798801852744,
                2.607193581403905
              ],
              [
                -70.2999973727744,
                2.036375879013032
              ],
              [
                -70.5636692477744,
                -0.16046067726549693
              ],
              [
                -70.0802708102744,
                -0.9953717528363318
              ],
              [
                -70.2121067477744,
                -3.892814004949803
              ],
              [
                -72.3214817477744,
                -4.155835522953355
              ],
              [
                -73.3761692477744,
                -4.988132181999902
              ],
              [
                -73.7277317477744,
                -6.125322102697873
              ],
              [
                -74.2550754977744,
                -7.0856895615602165
              ],
              [
                -74.2111301852744,
                -8.305052883282
              ],
              [
                -73.5080051852744,
                -9.60730898900707
              ],
              [
                -72.3654270602744,
                -10.256606045737636
              ],
              [
                -71.2667942477744,
                -10.343080350907387
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#98ff00",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-70.77848991289744, -9.753320737155736],
          [-70.80046256914744, -11.060767450912051],
          [-70.55876335039744, -11.1577915828599],
          [-69.93254264727244, -11.20090303656592],
          [-69.64689811602244, -11.093112411240428],
          [-69.17448600664744, -11.082331155053787],
          [-68.71306022539744, -11.308653520698952],
          [-68.43840202227244, -11.168570047122666],
          [-67.97697624102244, -10.845043633010153],
          [-67.87809928789744, -10.769503358494859],
          [-67.71330436602244, -10.780295989344307],
          [-67.52653678789744, -10.65075897798477],
          [-67.18596061602244, -10.380713976300619],
          [-66.68058952227244, -10.099619713681589],
          [-66.08732780352244, -9.883225718516945],
          [-65.51603874102244, -9.915693974364732],
          [-65.43913444414744, -10.023898210284619],
          [-65.59294303789744, -10.445546277456165],
          [-65.46110710039744, -10.855833546606831],
          [-65.42814811602244, -11.147012718650565],
          [-65.37321647539744, -11.64242097434737],
          [-65.20842155352244, -11.889796928942118],
          [-64.94474967852244, -12.179907785600118],
          [-64.45036491289744, -12.523332193121238],
          [-64.18669303789744, -12.63055922817948],
          [-63.70329460039744, -12.609117405675613],
          [-63.40666374102244, -12.737741314287957],
          [-63.11003288164744, -12.909138269770514],
          [-62.75847038164744, -13.101819401035584],
          [-62.40690788164744, -13.272965075440183],
          [-62.13224967852244, -13.443990241844306],
          [-61.91252311602244, -13.614893462359412],
          [-61.64885124102244, -13.604215610842417],
          [-61.05558952227244, -13.64692412382228],
          [-60.64909538164744, -13.860350323846623],
          [-60.59416374102244, -13.988312150558667],
          [-60.61613639727244, -14.318549417262567],
          [-60.53923210039744, -14.924486401265577],
          [-60.73698600664744, -15.06244629246808],
          [-60.36345085039744, -15.645125405124709],
          [-60.33049186602244, -16.342151190498033],
          [-59.04509147539744, -16.415934488372784],
          [-58.78141960039744, -16.331608441593236],
          [-58.51774772539744, -16.373776023150896],
          [-58.33098014727244, -16.689740864052254],
          [-58.22111686602244, -16.72130880680918],
          [-58.01237663164744, -16.64764216212115],
          [-57.88054069414744, -15.941129860473076],
          [-57.80363639727244, -15.983380775463306],
          [-57.49601920977244, -15.972818882361233],
          [-57.17741569414744, -15.48637470085819],
          [-56.85881217852244, -15.06244629246808],
          [-56.52922233477244, -14.510078127851394],
          [-56.38640006914744, -14.244021749292477],
          [-56.12272819414744, -13.988312150558667],
          [-55.85905631914744, -13.76433262028774],
          [-56.02385124102244, -13.41193226870925],
          [-56.21061881914744, -13.294349841061207],
          [-56.15016887831046, -13.008012327529876],
          [-56.16667350664744, -12.727025138534188],
          [-55.92217815793116, -12.721745743711418],
          [-55.73820670977244, -12.609117405675613],
          [-55.65031608477244, -12.994792800110167],
          [-55.22184928789744, -13.582858463358955],
          [-54.37590202227244, -13.828348819754673],
          [-53.70573600664744, -13.913676360263572],
          [-52.94767936602244, -13.742989988801344],
          [-52.28849967852244, -13.529457184997014],
          [-51.79411491289744, -13.198103586051701],
          [-51.31071647539744, -12.694873896525001],
          [-50.93718131914744, -12.373139509405615],
          [-50.95915397539744, -12.01877373401922],
          [-51.18986686602244, -12.029519020910936],
          [-51.23381217852244, -11.771514449813356],
          [-51.18986686602244, -11.362513595420223],
          [-51.48649772539744, -11.006851255713487],
          [-50.94816764727244, -10.920564832558837],
          [-50.44279655352244, -10.704739465553292],
          [-50.27800163164744, -10.359100218314566],
          [-50.01432975664744, -9.677519400815672],
          [-49.82756217852244, -9.124744390338215],
          [-49.76164420977244, -8.918586573839669],
          [-49.53093131914744, -8.777463958894357],
          [-49.35515006914744, -8.571111481407018],
          [-49.17936881914744, -8.332037191710521],
          [-49.01457389727244, -8.647149256302665],
          [-48.90471061602244, -8.994553142635349],
          [-48.87175163164744, -9.23320084144871],
          [-48.71794303789744, -9.330783132769568],
          [-48.54216178789744, -9.319941999049835],
          [-48.52018913164744, -9.037955462326984],
          [-48.45427116289744, -8.7231716880755],
          [-48.36638053789744, -8.31029585509327],
          [-48.44328483477244, -7.907866983205392],
          [-48.47624381914744, -7.701060370906081],
          [-48.01481803789744, -7.221756529904371],
          [-47.82805045977244, -6.6219153743870205],
          [-47.93791374102244, -6.043195290227873],
          [-47.98185905352244, -5.737202574016412],
          [-47.70720085039744, -5.46385571638907],
          [-47.08098014727244, -5.5841440732561844],
          [-46.52067741289744, -5.5841440732561844],
          [-45.94938835039744, -5.452919205277319],
          [-45.56486686602244, -5.32166564106757],
          [-45.44401725664744, -4.883955280350111],
          [-44.88371452227244, -4.654041276471385],
          [-44.65300163164744, -4.413098467682047],
          [-44.43327506914744, -4.095373210786159],
          [-44.34538444414744, -3.5472801913472747],
          [-43.85099967852244, -3.5801754417922114],
          [-43.84001335039744, -3.2950451720189498],
          [-43.86198600664744, -3.0646876619713614],
          [-43.60930045977244, -2.7135725720985446],
          [-43.29069694414744, -2.570902183894771],
          [-43.32365592852244, -2.307469439887812],
          [-43.68620475664744, -2.1098625434769605],
          [-44.12565788164744, -2.329424109683637],
          [-44.33439811602244, -2.0769255559875495],
          [-44.51017936602244, -1.5827944339928646],
          [-44.81779655352244, -1.1983869173869854],
          [-45.24626335039744, -1.2093708204104454],
          [-47.43254264727244, -0.35252481360850424],
          [-47.93791374102244, -0.462385300010413],
          [-48.28947624102244, -0.4184412868306323],
          [-48.32243522539744, -0.19871804567540613],
          [-48.56413444414744, -0.08885512720650966],
          [-49.36613639727244, 0.2736926244349818],
          [-49.51994499102244, 0.54834349753916],
          [-49.80558952227244, 0.49341412897545733],
          [-49.92643913164744, 0.7131283773483188],
          [-49.76164420977244, 1.163506268391221],
          [-49.87150749102244, 1.8773615525553682],
          [-50.16813835039744, 1.9761825898301724],
          [-50.36589225664744, 2.404335361926711],
          [-50.64055045977244, 2.3494509845645504],
          [-50.98112663164744, 3.391828021939104],
          [-50.97014030352244, 4.1044072850211535],
          [-51.67326530352244, 4.630217951065921],
          [-51.83806022539744, 4.1482386827256175],
          [-52.81584342852244, 2.55799971463263],
          [-53.12346061602244, 2.503121644704321],
          [-53.54094108477244, 2.481169770510124],
          [-54.18913444414744, 2.371404997182424],
          [-54.83732780352244, 2.6896974064263235],
          [-55.55143913164744, 2.7006715817940767],
          [-56.26555045977244, 2.53604876562389],
          [-56.16667350664744, 2.0969558419821004],
          [-57.19938835039744, 2.195763412459527],
          [-58.9621067477744, 1.6410724980848648],
          [-59.5333958102744, 3.0022268360648416],
          [-59.3136692477744, 4.230221917716307],
          [-59.9728489352744, 5.674964031895787],
          [-61.2912083102744, 5.2812633961239985],
          [-61.2033176852744, 4.974877849842486],
          [-63.4445286227744, 4.230221917716307],
          [-65.2023411227744, 4.536938861239733],
          [-64.3234348727744, 2.2559481787763658],
          [-66.2570286227744, 1.2896255200964404],
          [-67.1798801852744, 2.607193581403905],
          [-70.2999973727744, 2.036375879013032],
          [-70.5636692477744, -0.16046067726549693],
          [-70.0802708102744, -0.9953717528363318],
          [-70.2121067477744, -3.892814004949803],
          [-72.3214817477744, -4.155835522953355],
          [-73.3761692477744, -4.988132181999902],
          [-73.7277317477744, -6.125322102697873],
          [-74.2550754977744, -7.0856895615602165],
          [-74.2111301852744, -8.305052883282],
          [-73.5080051852744, -9.60730898900707],
          [-72.3654270602744, -10.256606045737636],
          [-71.2667942477744, -10.343080350907387]]]),
    CAATINGA = ui.import && ui.import("CAATINGA", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -42.11106249236156,
                -3.309668469107168
              ],
              [
                -41.80344530486156,
                -4.800026547197851
              ],
              [
                -41.97922655486156,
                -6.1123834461447855
              ],
              [
                -42.55051561736156,
                -5.80642908454096
              ],
              [
                -44.52805467986156,
                -8.074687299008554
              ],
              [
                -44.30832811736156,
                -8.726790611165626
              ],
              [
                -44.83567186736156,
                -9.247658382469243
              ],
              [
                -45.09934374236156,
                -10.459950818394967
              ],
              [
                -45.40696092986156,
                -12.011609171700798
              ],
              [
                -44.79172655486156,
                -12.526906350253256
              ],
              [
                -45.05539842986156,
                -13.554378480450524
              ],
              [
                -45.45090624236156,
                -15.129624414194236
              ],
              [
                -45.27512499236156,
                -16.103042392935123
              ],
              [
                -44.22043749236156,
                -16.987672576942728
              ],
              [
                -43.03391405486156,
                -16.609042774592478
              ],
              [
                -42.28684374236156,
                -15.553416930300166
              ],
              [
                -40.74875780486156,
                -15.17204223613576
              ],
              [
                -39.82590624236156,
                -14.023843707727865
              ],
              [
                -39.34250780486156,
                -13.0839840585081
              ],
              [
                -38.46360155486156,
                -12.183486637708437
              ],
              [
                -36.83762499236156,
                -10.719131837779369
              ],
              [
                -35.43137499236156,
                -8.813653589006606
              ],
              [
                -34.81614061736156,
                -7.247186409193829
              ],
              [
                -34.81614061736156,
                -5.587787978914578
              ],
              [
                -35.21164842986156,
                -4.9751685456397645
              ],
              [
                -36.13449999236156,
                -4.887603269059024
              ],
              [
                -37.76047655486156,
                -3.6167235181440462
              ],
              [
                -39.56223436736156,
                -2.5196824189953433
              ],
              [
                -41.49582811736156,
                -2.3440595497458503
              ],
              [
                -42.15500780486156,
                -2.3879673975246734
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#0b4a8b",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-42.11106249236156, -3.309668469107168],
          [-41.80344530486156, -4.800026547197851],
          [-41.97922655486156, -6.1123834461447855],
          [-42.55051561736156, -5.80642908454096],
          [-44.52805467986156, -8.074687299008554],
          [-44.30832811736156, -8.726790611165626],
          [-44.83567186736156, -9.247658382469243],
          [-45.09934374236156, -10.459950818394967],
          [-45.40696092986156, -12.011609171700798],
          [-44.79172655486156, -12.526906350253256],
          [-45.05539842986156, -13.554378480450524],
          [-45.45090624236156, -15.129624414194236],
          [-45.27512499236156, -16.103042392935123],
          [-44.22043749236156, -16.987672576942728],
          [-43.03391405486156, -16.609042774592478],
          [-42.28684374236156, -15.553416930300166],
          [-40.74875780486156, -15.17204223613576],
          [-39.82590624236156, -14.023843707727865],
          [-39.34250780486156, -13.0839840585081],
          [-38.46360155486156, -12.183486637708437],
          [-36.83762499236156, -10.719131837779369],
          [-35.43137499236156, -8.813653589006606],
          [-34.81614061736156, -7.247186409193829],
          [-34.81614061736156, -5.587787978914578],
          [-35.21164842986156, -4.9751685456397645],
          [-36.13449999236156, -4.887603269059024],
          [-37.76047655486156, -3.6167235181440462],
          [-39.56223436736156, -2.5196824189953433],
          [-41.49582811736156, -2.3440595497458503],
          [-42.15500780486156, -2.3879673975246734]]]),
    CERRADO = ui.import && ui.import("CERRADO", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -43.03881715249726,
                -2.163332723265132
              ],
              [
                -43.67602418374726,
                -2.163332723265132
              ],
              [
                -44.26928590249726,
                -2.953553582809392
              ],
              [
                -44.84057496499726,
                -3.3703975503301544
              ],
              [
                -44.88452027749726,
                -3.721286478608946
              ],
              [
                -45.23608277749726,
                -4.444539030470477
              ],
              [
                -45.56567262124726,
                -4.203527965316495
              ],
              [
                -45.89526246499726,
                -4.2692658261666825
              ],
              [
                -45.96118043374726,
                -5.0357689676479245
              ],
              [
                -47.41137574624726,
                -5.057656442580847
              ],
              [
                -48.04858277749726,
                -5.101429169385175
              ],
              [
                -48.33422730874726,
                -5.582726570864235
              ],
              [
                -48.37817262124726,
                -6.151020889189135
              ],
              [
                -48.40014527749726,
                -6.871436543369419
              ],
              [
                -48.79565308999726,
                -7.307528792509458
              ],
              [
                -49.16918824624726,
                -7.6560976187246705
              ],
              [
                -49.38891480874726,
                -7.220343566603213
              ],
              [
                -50.02612183999726,
                -7.351115039326663
              ],
              [
                -50.31176637124726,
                -8.047896463551897
              ],
              [
                -50.46557496499726,
                -9.351059058423182
              ],
              [
                -50.88305543374726,
                -10.303658020434561
              ],
              [
                -51.43237183999726,
                -10.519766549213958
              ],
              [
                -52.06957887124726,
                -10.541369131814754
              ],
              [
                -52.11352418374726,
                -10.994668716786139
              ],
              [
                -51.60815308999726,
                -11.899153688888342
              ],
              [
                -52.15746949624726,
                -12.479038265299861
              ],
              [
                -53.62963746499726,
                -13.121832083647917
              ],
              [
                -54.66235230874726,
                -12.886331657739033
              ],
              [
                -55.40942262124726,
                -12.28588461776632
              ],
              [
                -55.84887574624726,
                -11.877652330828502
              ],
              [
                -56.35424683999726,
                -11.985142091160709
              ],
              [
                -56.70580933999726,
                -12.436127603498694
              ],
              [
                -56.79369996499726,
                -13.442605006196102
              ],
              [
                -57.43090699624726,
                -12.907750003568806
              ],
              [
                -57.62866090249726,
                -12.28588461776632
              ],
              [
                -58.68334840249726,
                -11.791629955435402
              ],
              [
                -59.32055543374726,
                -11.684064081441663
              ],
              [
                -59.84789918374726,
                -11.662545881687416
              ],
              [
                -60.50707887124726,
                -11.877652330828502
              ],
              [
                -60.63891480874726,
                -12.479038265299861
              ],
              [
                -60.22143433999726,
                -13.164626233682506
              ],
              [
                -59.86987183999726,
                -14.444874288954669
              ],
              [
                -59.29858277749726,
                -14.976182545435398
              ],
              [
                -58.94702027749726,
                -15.485002145816676
              ],
              [
                -58.02416871499726,
                -15.336723781733822
              ],
              [
                -57.40893433999726,
                -14.700063647730898
              ],
              [
                -57.71655152749726,
                -15.357912874623848
              ],
              [
                -57.98022340249726,
                -16.03481302689152
              ],
              [
                -58.06811402749726,
                -16.730466328603004
              ],
              [
                -57.51879762124726,
                -16.75150771068042
              ],
              [
                -56.66186402749726,
                -16.62522462448651
              ],
              [
                -56.06860230874726,
                -16.18258259299444
              ],
              [
                -55.60717652749726,
                -16.793583495432006
              ],
              [
                -55.49731324624726,
                -17.27677975651738
              ],
              [
                -55.14575074624726,
                -17.884221672429405
              ],
              [
                -55.76098512124726,
                -19.921280535280946
              ],
              [
                -56.79369996499726,
                -19.590411043327755
              ],
              [
                -57.36498902749726,
                -19.65250126827545
              ],
              [
                -57.67260621499726,
                -21.05331545992662
              ],
              [
                -57.78246949624726,
                -21.871268003230366
              ],
              [
                -57.87036012124726,
                -22.3598112896423
              ],
              [
                -56.72778199624726,
                -22.40044655829082
              ],
              [
                -56.26635621499726,
                -22.6440081977687
              ],
              [
                -55.89282105874726,
                -23.0489843682888
              ],
              [
                -55.76098512124726,
                -23.634038609100845
              ],
              [
                -55.51928590249726,
                -24.19644958669802
              ],
              [
                -54.11303590249726,
                -23.975794571540735
              ],
              [
                -54.24487183999726,
                -23.513204813825293
              ],
              [
                -54.46459840249726,
                -22.684559984801112
              ],
              [
                -54.22289918374726,
                -21.993562295504937
              ],
              [
                -53.62963746499726,
                -22.461377189864283
              ],
              [
                -53.12426637124726,
                -22.522281044956387
              ],
              [
                -52.39916871499726,
                -22.136105801856743
              ],
              [
                -51.73998902749726,
                -21.442415205389647
              ],
              [
                -50.70727418374726,
                -20.21022481765682
              ],
              [
                -49.82836793374726,
                -20.765956956398156
              ],
              [
                -48.94946168374726,
                -20.930229256607824
              ],
              [
                -48.42211793374726,
                -21.36058497656494
              ],
              [
                -48.99340699624726,
                -21.646789765782295
              ],
              [
                -49.60864137124726,
                -22.05466996903979
              ],
              [
                -50.28979371499726,
                -22.136105801856743
              ],
              [
                -50.92700074624726,
                -21.83047991134922
              ],
              [
                -51.73998902749726,
                -21.993562295504937
              ],
              [
                -52.04760621499726,
                -22.176806080229184
              ],
              [
                -51.87182496499726,
                -22.684559984801112
              ],
              [
                -49.67455933999726,
                -22.92761826351624
              ],
              [
                -49.49877808999726,
                -23.955716213433213
              ],
              [
                -49.75084891157122,
                -23.876494207214673
              ],
              [
                -50.70727418374726,
                -24.21649027110259
              ],
              [
                -50.33373902749726,
                -24.816236286674346
              ],
              [
                -47.56518433999726,
                -23.79497695542871
              ],
              [
                -47.74096558999726,
                -23.55349509776345
              ],
              [
                -47.87280152749726,
                -23.23082847545599
              ],
              [
                -47.45532105874726,
                -22.603444434245354
              ],
              [
                -46.82836113901176,
                -22.562981377776275
              ],
              [
                -46.73022340249726,
                -22.03430367417474
              ],
              [
                -46.84008668374726,
                -21.05331545992662
              ],
              [
                -46.59838746499726,
                -21.237753926602863
              ],
              [
                -45.49975465249726,
                -21.60593789679225
              ],
              [
                -45.25805543374726,
                -21.319652703105653
              ],
              [
                -45.08227418374726,
                -20.786500794924486
              ],
              [
                -44.42309449624726,
                -20.313289773430938
              ],
              [
                -43.23657105874726,
                -19.962590830606782
              ],
              [
                -43.14868043374726,
                -19.549004247223916
              ],
              [
                -43.06078980874726,
                -19.217368855622823
              ],
              [
                -43.41235230874726,
                -18.86427185006015
              ],
              [
                -42.95092652749726,
                -18.281081716565048
              ],
              [
                -42.51147340249726,
                -18.030537604732356
              ],
              [
                -41.96215699624726,
                -17.486472624170446
              ],
              [
                -42.02807496499726,
                -17.045841699376776
              ],
              [
                -41.91821168374726,
                -16.62522462448655
              ],
              [
                -42.15991090249726,
                -16.435644238851587
              ],
              [
                -42.18188355874726,
                -16.07704412734808
              ],
              [
                -41.67651246499726,
                -16.245878628768505
              ],
              [
                -41.52270387124726,
                -15.844662647811896
              ],
              [
                -41.69848512124726,
                -15.696643868157285
              ],
              [
                -41.74243043374726,
                -15.442647699189747
              ],
              [
                -41.61059449624726,
                -14.954955175770223
              ],
              [
                -41.85229371499726,
                -14.827546934465193
              ],
              [
                -42.29174683999726,
                -14.870024715563924
              ],
              [
                -42.15991090249726,
                -14.040226906137493
              ],
              [
                -42.07202027749726,
                -13.570794676723622
              ],
              [
                -42.40161012124726,
                -13.314346747537327
              ],
              [
                -42.57739137124726,
                -12.714919180936713
              ],
              [
                -42.99487183999726,
                -12.221468429540721
              ],
              [
                -43.17065308999726,
                -12.60772749245575
              ],
              [
                -43.17065308999726,
                -13.228803436608485
              ],
              [
                -42.81909058999726,
                -14.593770672729047
              ],
              [
                -43.08276246499726,
                -14.997407811532977
              ],
              [
                -43.06078980874726,
                -15.61201336666319
              ],
              [
                -43.50024293374726,
                -15.717796013427234
              ],
              [
                -43.65405152749726,
                -16.288064674108597
              ],
              [
                -43.91772340249726,
                -15.590850274478624
              ],
              [
                -44.24731324624726,
                -15.61201336666319
              ],
              [
                -43.98364137124726,
                -15.167133887687186
              ],
              [
                -44.09350465249726,
                -14.274584917965901
              ],
              [
                -44.04955933999726,
                -13.35710708393305
              ],
              [
                -43.76391480874726,
                -12.864911480002004
              ],
              [
                -43.78588746499726,
                -12.092589059854319
              ],
              [
                -44.02758668374726,
                -11.856149275557764
              ],
              [
                -43.71996949624726,
                -11.361117247394327
              ],
              [
                -44.18139527749726,
                -10.34689168440747
              ],
              [
                -44.42309449624726,
                -10.130664287430339
              ],
              [
                -43.58813355874726,
                -9.719432739628424
              ],
              [
                -43.43432496499726,
                -8.982294957777276
              ],
              [
                -43.65405152749726,
                -8.482783871564314
              ],
              [
                -43.45629762124726,
                -7.960862127956616
              ],
              [
                -42.68725465249726,
                -7.939100646910172
              ],
              [
                -42.42358277749726,
                -7.5689816201824165
              ],
              [
                -42.55541871499726,
                -6.74052966476232
              ],
              [
                -42.18188355874726,
                -6.980498112466038
              ],
              [
                -41.65453980874726,
                -6.893250871470958
              ],
              [
                -41.03930543374726,
                -5.954369492530581
              ],
              [
                -41.14916871499726,
                -5.079543177549505
              ],
              [
                -41.17114137124726,
                -4.159699639482987
              ],
              [
                -41.45678590249726,
                -3.0632654382961317
              ],
              [
                -41.80834840249726,
                -2.514601774079578
              ],
              [
                -42.51147340249726,
                -2.404839733377288
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#ffc82d",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #ffc82d */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-43.03881715249726, -2.163332723265132],
          [-43.67602418374726, -2.163332723265132],
          [-44.26928590249726, -2.953553582809392],
          [-44.84057496499726, -3.3703975503301544],
          [-44.88452027749726, -3.721286478608946],
          [-45.23608277749726, -4.444539030470477],
          [-45.56567262124726, -4.203527965316495],
          [-45.89526246499726, -4.2692658261666825],
          [-45.96118043374726, -5.0357689676479245],
          [-47.41137574624726, -5.057656442580847],
          [-48.04858277749726, -5.101429169385175],
          [-48.33422730874726, -5.582726570864235],
          [-48.37817262124726, -6.151020889189135],
          [-48.40014527749726, -6.871436543369419],
          [-48.79565308999726, -7.307528792509458],
          [-49.16918824624726, -7.6560976187246705],
          [-49.38891480874726, -7.220343566603213],
          [-50.02612183999726, -7.351115039326663],
          [-50.31176637124726, -8.047896463551897],
          [-50.46557496499726, -9.351059058423182],
          [-50.88305543374726, -10.303658020434561],
          [-51.43237183999726, -10.519766549213958],
          [-52.06957887124726, -10.541369131814754],
          [-52.11352418374726, -10.994668716786139],
          [-51.60815308999726, -11.899153688888342],
          [-52.15746949624726, -12.479038265299861],
          [-53.62963746499726, -13.121832083647917],
          [-54.66235230874726, -12.886331657739033],
          [-55.40942262124726, -12.28588461776632],
          [-55.84887574624726, -11.877652330828502],
          [-56.35424683999726, -11.985142091160709],
          [-56.70580933999726, -12.436127603498694],
          [-56.79369996499726, -13.442605006196102],
          [-57.43090699624726, -12.907750003568806],
          [-57.62866090249726, -12.28588461776632],
          [-58.68334840249726, -11.791629955435402],
          [-59.32055543374726, -11.684064081441663],
          [-59.84789918374726, -11.662545881687416],
          [-60.50707887124726, -11.877652330828502],
          [-60.63891480874726, -12.479038265299861],
          [-60.22143433999726, -13.164626233682506],
          [-59.86987183999726, -14.444874288954669],
          [-59.29858277749726, -14.976182545435398],
          [-58.94702027749726, -15.485002145816676],
          [-58.02416871499726, -15.336723781733822],
          [-57.40893433999726, -14.700063647730898],
          [-57.71655152749726, -15.357912874623848],
          [-57.98022340249726, -16.03481302689152],
          [-58.06811402749726, -16.730466328603004],
          [-57.51879762124726, -16.75150771068042],
          [-56.66186402749726, -16.62522462448651],
          [-56.06860230874726, -16.18258259299444],
          [-55.60717652749726, -16.793583495432006],
          [-55.49731324624726, -17.27677975651738],
          [-55.14575074624726, -17.884221672429405],
          [-55.76098512124726, -19.921280535280946],
          [-56.79369996499726, -19.590411043327755],
          [-57.36498902749726, -19.65250126827545],
          [-57.67260621499726, -21.05331545992662],
          [-57.78246949624726, -21.871268003230366],
          [-57.87036012124726, -22.3598112896423],
          [-56.72778199624726, -22.40044655829082],
          [-56.26635621499726, -22.6440081977687],
          [-55.89282105874726, -23.0489843682888],
          [-55.76098512124726, -23.634038609100845],
          [-55.51928590249726, -24.19644958669802],
          [-54.11303590249726, -23.975794571540735],
          [-54.24487183999726, -23.513204813825293],
          [-54.46459840249726, -22.684559984801112],
          [-54.22289918374726, -21.993562295504937],
          [-53.62963746499726, -22.461377189864283],
          [-53.12426637124726, -22.522281044956387],
          [-52.39916871499726, -22.136105801856743],
          [-51.73998902749726, -21.442415205389647],
          [-50.70727418374726, -20.21022481765682],
          [-49.82836793374726, -20.765956956398156],
          [-48.94946168374726, -20.930229256607824],
          [-48.42211793374726, -21.36058497656494],
          [-48.99340699624726, -21.646789765782295],
          [-49.60864137124726, -22.05466996903979],
          [-50.28979371499726, -22.136105801856743],
          [-50.92700074624726, -21.83047991134922],
          [-51.73998902749726, -21.993562295504937],
          [-52.04760621499726, -22.176806080229184],
          [-51.87182496499726, -22.684559984801112],
          [-49.67455933999726, -22.92761826351624],
          [-49.49877808999726, -23.955716213433213],
          [-49.75084891157122, -23.876494207214673],
          [-50.70727418374726, -24.21649027110259],
          [-50.33373902749726, -24.816236286674346],
          [-47.56518433999726, -23.79497695542871],
          [-47.74096558999726, -23.55349509776345],
          [-47.87280152749726, -23.23082847545599],
          [-47.45532105874726, -22.603444434245354],
          [-46.82836113901176, -22.562981377776275],
          [-46.73022340249726, -22.03430367417474],
          [-46.84008668374726, -21.05331545992662],
          [-46.59838746499726, -21.237753926602863],
          [-45.49975465249726, -21.60593789679225],
          [-45.25805543374726, -21.319652703105653],
          [-45.08227418374726, -20.786500794924486],
          [-44.42309449624726, -20.313289773430938],
          [-43.23657105874726, -19.962590830606782],
          [-43.14868043374726, -19.549004247223916],
          [-43.06078980874726, -19.217368855622823],
          [-43.41235230874726, -18.86427185006015],
          [-42.95092652749726, -18.281081716565048],
          [-42.51147340249726, -18.030537604732356],
          [-41.96215699624726, -17.486472624170446],
          [-42.02807496499726, -17.045841699376776],
          [-41.91821168374726, -16.62522462448655],
          [-42.15991090249726, -16.435644238851587],
          [-42.18188355874726, -16.07704412734808],
          [-41.67651246499726, -16.245878628768505],
          [-41.52270387124726, -15.844662647811896],
          [-41.69848512124726, -15.696643868157285],
          [-41.74243043374726, -15.442647699189747],
          [-41.61059449624726, -14.954955175770223],
          [-41.85229371499726, -14.827546934465193],
          [-42.29174683999726, -14.870024715563924],
          [-42.15991090249726, -14.040226906137493],
          [-42.07202027749726, -13.570794676723622],
          [-42.40161012124726, -13.314346747537327],
          [-42.57739137124726, -12.714919180936713],
          [-42.99487183999726, -12.221468429540721],
          [-43.17065308999726, -12.60772749245575],
          [-43.17065308999726, -13.228803436608485],
          [-42.81909058999726, -14.593770672729047],
          [-43.08276246499726, -14.997407811532977],
          [-43.06078980874726, -15.61201336666319],
          [-43.50024293374726, -15.717796013427234],
          [-43.65405152749726, -16.288064674108597],
          [-43.91772340249726, -15.590850274478624],
          [-44.24731324624726, -15.61201336666319],
          [-43.98364137124726, -15.167133887687186],
          [-44.09350465249726, -14.274584917965901],
          [-44.04955933999726, -13.35710708393305],
          [-43.76391480874726, -12.864911480002004],
          [-43.78588746499726, -12.092589059854319],
          [-44.02758668374726, -11.856149275557764],
          [-43.71996949624726, -11.361117247394327],
          [-44.18139527749726, -10.34689168440747],
          [-44.42309449624726, -10.130664287430339],
          [-43.58813355874726, -9.719432739628424],
          [-43.43432496499726, -8.982294957777276],
          [-43.65405152749726, -8.482783871564314],
          [-43.45629762124726, -7.960862127956616],
          [-42.68725465249726, -7.939100646910172],
          [-42.42358277749726, -7.5689816201824165],
          [-42.55541871499726, -6.74052966476232],
          [-42.18188355874726, -6.980498112466038],
          [-41.65453980874726, -6.893250871470958],
          [-41.03930543374726, -5.954369492530581],
          [-41.14916871499726, -5.079543177549505],
          [-41.17114137124726, -4.159699639482987],
          [-41.45678590249726, -3.0632654382961317],
          [-41.80834840249726, -2.514601774079578],
          [-42.51147340249726, -2.404839733377288]]]),
    MATAATLANTICA = ui.import && ui.import("MATAATLANTICA", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -55.547901366713376,
                -28.244007194655776
              ],
              [
                -55.020557616713376,
                -28.476032983629977
              ],
              [
                -54.383350585463376,
                -28.64971874019033
              ],
              [
                -53.812061522963376,
                -28.765349769409116
              ],
              [
                -53.724170897963376,
                -29.207413739872642
              ],
              [
                -54.405323241713376,
                -29.092275012731886
              ],
              [
                -55.438038085463376,
                -29.11147375968701
              ],
              [
                -55.240284179213376,
                -29.475567751696847
              ],
              [
                -54.844776366713376,
                -29.723934516130672
              ],
              [
                -52.933155272963376,
                -30.009749421655656
              ],
              [
                -52.295948241713376,
                -30.104838818329604
              ],
              [
                -51.021534179213376,
                -30.12384573395028
              ],
              [
                -50.054737304213376,
                -30.028774605490913
              ],
              [
                -48.604541991713376,
                -28.64971874019033
              ],
              [
                -48.121143554213376,
                -27.83674651526191
              ],
              [
                -48.231006835463376,
                -25.91615666167052
              ],
              [
                -47.264209960463376,
                -24.804289956392843
              ],
              [
                -46.165577147963376,
                -24.464752759561588
              ],
              [
                -44.935108397963376,
                -24.023990438635774
              ],
              [
                -44.012256835463376,
                -23.420511064198738
              ],
              [
                -42.649952147963376,
                -23.25911383657329
              ],
              [
                -41.814991210463376,
                -23.117730730786516
              ],
              [
                -41.573291991713376,
                -22.5507144696865
              ],
              [
                -40.738331054213376,
                -22.08319872978799
              ],
              [
                -40.650440429213376,
                -21.286919654861723
              ],
              [
                -39.947315429213376,
                -20.09473215734782
              ],
              [
                -39.485889647963376,
                -19.59871234805956
              ],
              [
                -39.463916991713376,
                -18.372878943105345
              ],
              [
                -38.914600585463376,
                -17.87169612045947
              ],
              [
                -38.563038085463376,
                -18.3937302894818
              ],
              [
                -38.409229491713376,
                -17.390065243989692
              ],
              [
                -38.914600585463376,
                -17.03325836848594
              ],
              [
                -38.804737304213376,
                -16.275431437229294
              ],
              [
                -38.650928710463376,
                -15.51466680655903
              ],
              [
                -38.804737304213376,
                -14.772335139466884
              ],
              [
                -38.716846679213376,
                -13.365680160335643
              ],
              [
                -38.321338866713376,
                -13.066210495482038
              ],
              [
                -37.684131835463376,
                -12.616326467345443
              ],
              [
                -36.497608397963376,
                -10.873877848436864
              ],
              [
                -35.750538085463376,
                -10.182594454447543
              ],
              [
                -34.893604491713376,
                -9.186269422354538
              ],
              [
                -34.651905272963376,
                -8.252375532369038
              ],
              [
                -34.476124022963376,
                -7.076473641400163
              ],
              [
                -34.695850585463376,
                -6.421865623545331
              ],
              [
                -35.047413085463376,
                -5.219622983236343
              ],
              [
                -35.508838866713376,
                -4.869422754024436
              ],
              [
                -35.794483397963376,
                -5.329021085953176
              ],
              [
                -35.552784179213376,
                -5.83199534758349
              ],
              [
                -35.552784179213376,
                -6.509197235970512
              ],
              [
                -35.530811522963376,
                -7.163686494363202
              ],
              [
                -35.772510741713376,
                -7.57771634644767
              ],
              [
                -36.585499022963376,
                -8.708754798010624
              ],
              [
                -36.937061522963376,
                -9.207959604934828
              ],
              [
                -37.090870116713376,
                -9.663141324041678
              ],
              [
                -37.750049804213376,
                -10.333944371720653
              ],
              [
                -38.804737304213376,
                -11.563562791687344
              ],
              [
                -39.727588866713376,
                -11.778746321772019
              ],
              [
                -39.727588866713376,
                -12.358892570948854
              ],
              [
                -40.738331054213376,
                -12.980580590581841
              ],
              [
                -40.738331054213376,
                -13.792847724517564
              ],
              [
                -40.496631835463376,
                -13.920846828762095
              ],
              [
                -40.584522460463376,
                -14.240533370186501
              ],
              [
                -41.045948241713376,
                -14.538499810548997
              ],
              [
                -42.122608397963376,
                -14.899775959616784
              ],
              [
                -42.408252929213376,
                -15.683973216306345
              ],
              [
                -42.627979491713376,
                -16.4440955871955
              ],
              [
                -42.540088866713376,
                -17.348123773246183
              ],
              [
                -43.045459960463376,
                -17.55773479129657
              ],
              [
                -43.484913085463376,
                -17.976227255620906
              ],
              [
                -44.056202147963376,
                -18.62292803771709
              ],
              [
                -43.572803710463376,
                -19.453749554867205
              ],
              [
                -44.363819335463376,
                -19.68148970202472
              ],
              [
                -44.605518554213376,
                -19.225689223725052
              ],
              [
                -45.506397460463376,
                -19.764224301705767
              ],
              [
                -45.704151366713376,
                -20.280337566821466
              ],
              [
                -45.682178710463376,
                -20.65088098096116
              ],
              [
                -46.495166991713376,
                -20.65088098096116
              ],
              [
                -46.692920897963376,
                -20.197873570225305
              ],
              [
                -47.110401366713376,
                -19.826247103512927
              ],
              [
                -47.527881835463376,
                -19.495180762126264
              ],
              [
                -49.966846679213376,
                -19.619410686526958
              ],
              [
                -50.494190429213376,
                -19.5158923905837
              ],
              [
                -50.142627929213376,
                -19.101158857912395
              ],
              [
                -49.813038085463376,
                -19.39158290367132
              ],
              [
                -49.241749022963376,
                -19.370855405350092
              ],
              [
                -49.285694335463376,
                -18.997311876786668
              ],
              [
                -48.824268554213376,
                -18.810224117017857
              ],
              [
                -48.428760741713376,
                -18.914187592764936
              ],
              [
                -48.077198241713376,
                -19.101158857912395
              ],
              [
                -47.923389647963376,
                -18.60210457986374
              ],
              [
                -48.318897460463376,
                -18.122466882943097
              ],
              [
                -48.846241210463376,
                -17.5786826052531
              ],
              [
                -49.329639647963376,
                -17.55773479129657
              ],
              [
                -49.417530272963376,
                -18.080696550119793
              ],
              [
                -49.856983397963376,
                -18.205977636700645
              ],
              [
                -50.933643554213376,
                -18.18510369343457
              ],
              [
                -51.439014647963376,
                -18.643748945586054
              ],
              [
                -51.109424804213376,
                -19.121920446900567
              ],
              [
                -51.460987304213376,
                -19.66079936586539
              ],
              [
                -52.186084960463376,
                -20.979496945295402
              ],
              [
                -52.911182616713376,
                -21.614130137959368
              ],
              [
                -53.438526366713376,
                -21.79786197676924
              ],
              [
                -54.141651366713376,
                -21.491512293031615
              ],
              [
                -54.625049804213376,
                -21.286919654861673
              ],
              [
                -55.481983397963376,
                -21.85905370639225
              ],
              [
                -55.306202147963376,
                -22.36796012527254
              ],
              [
                -55.416065429213376,
                -22.99642651870249
              ],
              [
                -55.613819335463376,
                -23.823141334390936
              ],
              [
                -55.350147460463376,
                -24.184444214272403
              ],
              [
                -54.690967772963376,
                -24.144349625757883
              ],
              [
                -54.647022460463376,
                -24.66459230006973
              ],
              [
                -54.954639647963376,
                -25.3416451023879
              ],
              [
                -54.932666991713376,
                -25.916156661670477
              ],
              [
                -54.361377929213376,
                -25.718361673154895
              ],
              [
                -54.097706054213376,
                -25.87662410589113
              ],
              [
                -53.987842772963376,
                -26.409191042066148
              ],
              [
                -54.097706054213376,
                -26.664741546408443
              ],
              [
                -54.581104491713376,
                -27.076345852374416
              ],
              [
                -55.372120116713376,
                -27.72010383983604
              ],
              [
                -55.591846679213376,
                -28.011475559321884
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#00ffff",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #00ffff */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-55.547901366713376, -28.244007194655776],
          [-55.020557616713376, -28.476032983629977],
          [-54.383350585463376, -28.64971874019033],
          [-53.812061522963376, -28.765349769409116],
          [-53.724170897963376, -29.207413739872642],
          [-54.405323241713376, -29.092275012731886],
          [-55.438038085463376, -29.11147375968701],
          [-55.240284179213376, -29.475567751696847],
          [-54.844776366713376, -29.723934516130672],
          [-52.933155272963376, -30.009749421655656],
          [-52.295948241713376, -30.104838818329604],
          [-51.021534179213376, -30.12384573395028],
          [-50.054737304213376, -30.028774605490913],
          [-48.604541991713376, -28.64971874019033],
          [-48.121143554213376, -27.83674651526191],
          [-48.231006835463376, -25.91615666167052],
          [-47.264209960463376, -24.804289956392843],
          [-46.165577147963376, -24.464752759561588],
          [-44.935108397963376, -24.023990438635774],
          [-44.012256835463376, -23.420511064198738],
          [-42.649952147963376, -23.25911383657329],
          [-41.814991210463376, -23.117730730786516],
          [-41.573291991713376, -22.5507144696865],
          [-40.738331054213376, -22.08319872978799],
          [-40.650440429213376, -21.286919654861723],
          [-39.947315429213376, -20.09473215734782],
          [-39.485889647963376, -19.59871234805956],
          [-39.463916991713376, -18.372878943105345],
          [-38.914600585463376, -17.87169612045947],
          [-38.563038085463376, -18.3937302894818],
          [-38.409229491713376, -17.390065243989692],
          [-38.914600585463376, -17.03325836848594],
          [-38.804737304213376, -16.275431437229294],
          [-38.650928710463376, -15.51466680655903],
          [-38.804737304213376, -14.772335139466884],
          [-38.716846679213376, -13.365680160335643],
          [-38.321338866713376, -13.066210495482038],
          [-37.684131835463376, -12.616326467345443],
          [-36.497608397963376, -10.873877848436864],
          [-35.750538085463376, -10.182594454447543],
          [-34.893604491713376, -9.186269422354538],
          [-34.651905272963376, -8.252375532369038],
          [-34.476124022963376, -7.076473641400163],
          [-34.695850585463376, -6.421865623545331],
          [-35.047413085463376, -5.219622983236343],
          [-35.508838866713376, -4.869422754024436],
          [-35.794483397963376, -5.329021085953176],
          [-35.552784179213376, -5.83199534758349],
          [-35.552784179213376, -6.509197235970512],
          [-35.530811522963376, -7.163686494363202],
          [-35.772510741713376, -7.57771634644767],
          [-36.585499022963376, -8.708754798010624],
          [-36.937061522963376, -9.207959604934828],
          [-37.090870116713376, -9.663141324041678],
          [-37.750049804213376, -10.333944371720653],
          [-38.804737304213376, -11.563562791687344],
          [-39.727588866713376, -11.778746321772019],
          [-39.727588866713376, -12.358892570948854],
          [-40.738331054213376, -12.980580590581841],
          [-40.738331054213376, -13.792847724517564],
          [-40.496631835463376, -13.920846828762095],
          [-40.584522460463376, -14.240533370186501],
          [-41.045948241713376, -14.538499810548997],
          [-42.122608397963376, -14.899775959616784],
          [-42.408252929213376, -15.683973216306345],
          [-42.627979491713376, -16.4440955871955],
          [-42.540088866713376, -17.348123773246183],
          [-43.045459960463376, -17.55773479129657],
          [-43.484913085463376, -17.976227255620906],
          [-44.056202147963376, -18.62292803771709],
          [-43.572803710463376, -19.453749554867205],
          [-44.363819335463376, -19.68148970202472],
          [-44.605518554213376, -19.225689223725052],
          [-45.506397460463376, -19.764224301705767],
          [-45.704151366713376, -20.280337566821466],
          [-45.682178710463376, -20.65088098096116],
          [-46.495166991713376, -20.65088098096116],
          [-46.692920897963376, -20.197873570225305],
          [-47.110401366713376, -19.826247103512927],
          [-47.527881835463376, -19.495180762126264],
          [-49.966846679213376, -19.619410686526958],
          [-50.494190429213376, -19.5158923905837],
          [-50.142627929213376, -19.101158857912395],
          [-49.813038085463376, -19.39158290367132],
          [-49.241749022963376, -19.370855405350092],
          [-49.285694335463376, -18.997311876786668],
          [-48.824268554213376, -18.810224117017857],
          [-48.428760741713376, -18.914187592764936],
          [-48.077198241713376, -19.101158857912395],
          [-47.923389647963376, -18.60210457986374],
          [-48.318897460463376, -18.122466882943097],
          [-48.846241210463376, -17.5786826052531],
          [-49.329639647963376, -17.55773479129657],
          [-49.417530272963376, -18.080696550119793],
          [-49.856983397963376, -18.205977636700645],
          [-50.933643554213376, -18.18510369343457],
          [-51.439014647963376, -18.643748945586054],
          [-51.109424804213376, -19.121920446900567],
          [-51.460987304213376, -19.66079936586539],
          [-52.186084960463376, -20.979496945295402],
          [-52.911182616713376, -21.614130137959368],
          [-53.438526366713376, -21.79786197676924],
          [-54.141651366713376, -21.491512293031615],
          [-54.625049804213376, -21.286919654861673],
          [-55.481983397963376, -21.85905370639225],
          [-55.306202147963376, -22.36796012527254],
          [-55.416065429213376, -22.99642651870249],
          [-55.613819335463376, -23.823141334390936],
          [-55.350147460463376, -24.184444214272403],
          [-54.690967772963376, -24.144349625757883],
          [-54.647022460463376, -24.66459230006973],
          [-54.954639647963376, -25.3416451023879],
          [-54.932666991713376, -25.916156661670477],
          [-54.361377929213376, -25.718361673154895],
          [-54.097706054213376, -25.87662410589113],
          [-53.987842772963376, -26.409191042066148],
          [-54.097706054213376, -26.664741546408443],
          [-54.581104491713376, -27.076345852374416],
          [-55.372120116713376, -27.72010383983604],
          [-55.591846679213376, -28.011475559321884]]]),
    PAMPA = ui.import && ui.import("PAMPA", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -56.971238097646044,
                -30.27873225166879
              ],
              [
                -56.268113097646044,
                -30.8274649008218
              ],
              [
                -56.246140441396044,
                -31.05361636528548
              ],
              [
                -55.982468566396044,
                -31.26045087927606
              ],
              [
                -55.652878722646044,
                -31.12888113836358
              ],
              [
                -54.730027160146044,
                -31.71015398672893
              ],
              [
                -53.982956847646044,
                -32.12047572284183
              ],
              [
                -53.543503722646044,
                -32.640045616451445
              ],
              [
                -53.675339660146044,
                -33.21178289494138
              ],
              [
                -53.719284972646044,
                -33.74327512413622
              ],
              [
                -53.499558410146044,
                -33.85283120097203
              ],
              [
                -53.147995910146044,
                -33.85283120097203
              ],
              [
                -52.818406066396044,
                -33.57867836124829
              ],
              [
                -52.181199035146044,
                -32.89870697812843
              ],
              [
                -52.049363097646044,
                -32.38063414543801
              ],
              [
                -51.543992003896044,
                -31.95283808531592
              ],
              [
                -50.731003722646044,
                -31.29800861219207
              ],
              [
                -49.830124816396044,
                -30.183810380474192
              ],
              [
                -49.874070128896044,
                -29.555038017341925
              ],
              [
                -50.511277160146044,
                -29.497680881097022
              ],
              [
                -53.213913878896044,
                -29.555038017341925
              ],
              [
                -52.752488097646044,
                -29.133665893181668
              ],
              [
                -52.972214660146044,
                -28.672009780133248
              ],
              [
                -52.203171691396044,
                -28.498360852261726
              ],
              [
                -51.895554503896044,
                -28.1695773686815
              ],
              [
                -52.137253722646044,
                -27.508977891169536
              ],
              [
                -52.862351378896044,
                -27.255337676829242
              ],
              [
                -53.895066222646044,
                -27.5479477731517
              ],
              [
                -54.576218566396044,
                -27.625846060488897
              ],
              [
                -54.839890441396044,
                -27.742589603875036
              ],
              [
                -55.543015441396044,
                -27.762034719995896
              ],
              [
                -56.312058410146044,
                -28.42109161687124
              ],
              [
                -57.212937316396044,
                -29.344569729576964
              ],
              [
                -57.806199035146044,
                -30.107806955998274
              ],
              [
                -57.498581847646044,
                -30.487237250390873
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#bf04c2",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #bf04c2 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-56.971238097646044, -30.27873225166879],
          [-56.268113097646044, -30.8274649008218],
          [-56.246140441396044, -31.05361636528548],
          [-55.982468566396044, -31.26045087927606],
          [-55.652878722646044, -31.12888113836358],
          [-54.730027160146044, -31.71015398672893],
          [-53.982956847646044, -32.12047572284183],
          [-53.543503722646044, -32.640045616451445],
          [-53.675339660146044, -33.21178289494138],
          [-53.719284972646044, -33.74327512413622],
          [-53.499558410146044, -33.85283120097203],
          [-53.147995910146044, -33.85283120097203],
          [-52.818406066396044, -33.57867836124829],
          [-52.181199035146044, -32.89870697812843],
          [-52.049363097646044, -32.38063414543801],
          [-51.543992003896044, -31.95283808531592],
          [-50.731003722646044, -31.29800861219207],
          [-49.830124816396044, -30.183810380474192],
          [-49.874070128896044, -29.555038017341925],
          [-50.511277160146044, -29.497680881097022],
          [-53.213913878896044, -29.555038017341925],
          [-52.752488097646044, -29.133665893181668],
          [-52.972214660146044, -28.672009780133248],
          [-52.203171691396044, -28.498360852261726],
          [-51.895554503896044, -28.1695773686815],
          [-52.137253722646044, -27.508977891169536],
          [-52.862351378896044, -27.255337676829242],
          [-53.895066222646044, -27.5479477731517],
          [-54.576218566396044, -27.625846060488897],
          [-54.839890441396044, -27.742589603875036],
          [-55.543015441396044, -27.762034719995896],
          [-56.312058410146044, -28.42109161687124],
          [-57.212937316396044, -29.344569729576964],
          [-57.806199035146044, -30.107806955998274],
          [-57.498581847646044, -30.487237250390873]]]);
/**
 * 
 * SCRIPT: assessment-scar-ok-1
 * 
 * referencia: https://code.earthengine.google.com/18e3a66f2ba461d05a752dd2f5c08ec8
 * 
 * Objetivo: Analisar e exportar imagens Landsat (5, 7 e 8)
 * como mosaicos anuais de 1985 a 2020, construidos a partir
 * de bandas de qualidade (ndvi, bsi e nbr) para cada bioma
 * 
 * Desenvolvimento: Wallace Silva - IPAM - GT/Fogo
 * Janeiro de 2020
 * 
 * Contato: wallace.silva@ipam.org.br
 * 
*/
// --- --- --- --- --- --- --- --- --- --- --- START CODE --- --- --- --- --- --- --- --- --- --- ---
// --- --- --- --- --- --- --- --- --- OBJECT-ORIENTATION PROGRAMMING
// --- --- --- --- --- --- --- APLICATION 
var app = {}; // object principal
// --- --- --- --- --- DATA SETS
app.dataset = {
  raster:{
    L5:'LANDSAT/LT05/C01/T1_SR',
    L7:'LANDSAT/LE07/C01/T1_SR',
    L8:'LANDSAT/LC08/C01/T1_SR',
    cover:'projects/mapbiomas-workspace/public/collection5/mapbiomas_collection50_integration_v1',
    fire:'projects/mapbiomas-workspace/FOGO/cobertura-anual-queimada-ft',
  },
  vector:{
    brasil:'projects/mapbiomas-workspace/AUXILIAR/brasil_2km',
    biomas:'projects/mapbiomas-workspace/AUXILIAR/biomas_IBGE_250mil',
    sulAmerica:'projects/mapbiomas-workspace/AUXILIAR/America_do_Sul_BR2005',
  }
};
// --- --- --- --- --- OPTIONS
app.options = {
  // --- --- --- initial opitions
  // --- options users interface
  year: 2018,
  biomeName:'Pantanal',
  qualityBand:'nbr',
  //--- software options
  version:'1.0',
  // --- --- --- auxiliar lists 
  lists:{
    listYears:[
      1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,
      1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,
      2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,
      2016,2017,2018,2019,2020
    ],
    listBiomes: [
      'Amazônia', 'Caatinga', 'Cerrado', 'Mata Atlântica', 'Pampa', 'Pantanal'
    ],
    bandsL5andL7: [
        "B1","B2","B3","B4","B5","B7","pixel_qa"
      ],
    bandsL8: [
        "B2","B3","B4","B5","B6","B7","pixel_qa"
      ],
    newName: [
        "blue","green","red","nir","swir1","swir2","pixel_qa"
      ],
    qualityBands:['ndvi','nbr','bsi'],
    //remap class-cover
    oriClasses: [3, 4, 5,   9, 11, 12, 13, 15, 18, 19, 20, 21, 23, 24, 25, 27, 29, 30, 31, 32, 33],
    aggrClasses: [3, 4, 21, 21, 12, 12, 12, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 33],
  },
  // --- --- --- Defalt params for style
  styles:{
    //--- defaults
    backgroundColorDefault:'ffffff',
    transparenceDefault:'00',
    transparenceDefault1:'dd',
    fontSizeDefault:'12px',
    heightDefault:'40px',
    widthDefault:'65px',
    fontFamilyDefault:'monospace',
    positionDefault:'top-center',
    positionPanelPrincipal:'bottom-left',
    marginDefault:'0px 0px 0px 0px',
    textAlignDefault:'center',
    widthPanelButton:'220px',
    //selecteds
    backgroundColorSelected:'800080'
  },
};
// --- --- --- --- --- FUNCTIONS
app.functions = {
  // --- cloud mask
  maskLsr: function (image) {
    // Bits 3 and 5 are cloud shadow and cloud, respectively.
    var cloudShadowBitMask = ee.Number(2).pow(3).int();
    var cloudsBitMask = ee.Number(2).pow(5).int();
    // Get the pixel QA band.
    var qa = image.select('pixel_qa');
    // Both flags should be set to zero, indicating clear conditions.
    var mask = qa.bitwiseAnd(cloudShadowBitMask).eq(0)
        .and(qa.bitwiseAnd(cloudsBitMask).eq(0));
    // Return the masked image, scaled to [0, 1].
    return image.updateMask(mask).divide(10000);
  },
  // --- spectral indices
  ndvi: function (image) {
    // var NDVI = image.normalizedDifference(["B5","B4"]);
    var NDVI = image.normalizedDifference(["nir","red"]);
    NDVI = NDVI.multiply(100)
      .subtract(100)
      .multiply(-1)
      .byte();
    return image.addBands(NDVI.rename('ndvi'));
    },
  nbr: function (image) {
  // var NBR = image.normalizedDifference(["B5","B7"]);
  var NBR = image.normalizedDifference(["nir","swir2"]);
  NBR = NBR.multiply(100)
    .subtract(100)
    .multiply(-1)
    .byte();
  return image.addBands(NBR.rename('nbr'));
  },
  // --- spectral fraction and fraction index
  fractions: function (image) {
    var imageSelected = image
      // .select(['B2','B3','B4','B5','B6','B7']);
      .select(['blue','green','red','nir','swir1','swir2']);
    var atm = [805.6, 458.1, 286.8, 168.3, 46.8, 26.6];
    // Define endmembers
    var GV =[ 119.0+atm[0], 475.0+atm[1], 169.0+atm[2],6250.0+atm[3],2399.0+atm[4], 675.0+atm[5]];
    var NPV =[1514.0+atm[0],1597.0+atm[1],1421.0+atm[2],3053.0+atm[3],7707.0+atm[4],1975.0+atm[5]];
    var Soil =[1799.0+atm[0],2479.0+atm[1],3158.0+atm[2],5437.0+atm[3],7707.0+atm[4],6646.0+atm[5]];
    var Cloud =[4031.0+atm[0],8714.0+atm[1],7900.0+atm[2],8989.0+atm[3],7002.0+atm[4],6607.0+atm[5]];
    var sma =  imageSelected.unmix([GV, NPV, Soil, Cloud])
      .max(0)
      .multiply(100)
      .byte();
    //define SMA
    sma = image
      .addBands(sma.select('band_0').rename("gv"))
      .addBands(sma.select('band_1').rename("npv"))
      .addBands(sma.select('band_2').rename("soil"))
      .addBands(sma.select('band_3').rename("cloud"));
    var summed = sma.expression('GV + NPV + SOIL + CLOUD',
      {
        GV : sma.select('gv'),
        NPV : sma.select('npv'),
        SOIL : sma.select('soil'),
        CLOUD : sma.select('cloud')
      });
    //shade
    var shade = summed.subtract(100).abs();
    //gvs
    var gvs = (sma.select(['gv']).divide(summed)).multiply(100);
    //npv + soil + cloud
    var npvSoil = sma.select(['gv']).add(sma.select(['soil'])).add(sma.select('cloud'));
    // return sma
    return image
      .addBands(sma)
      .addBands(shade.rename("shade"))
      .addBands(npvSoil.rename("npvSoil"))
      .addBands(gvs.rename("gvs"));
  },
  bsi: function (image){
     var sma = app.functions.fractions(image.multiply(10000))   
     var BSI = sma.expression('(GV - NPV - SHADE) / (GV + NPV + SHADE)',{
      GV: sma.select('gv'),    //  gv  30 meters 
      NPV: sma.select('npv'),  //  npv	30 meters
      SHADE: sma.select('shade'),  //  npv	30 meters
    }).rename("bsi");
    return image.addBands(BSI
    .multiply(-1)
    .multiply(100)
    .byte());
  },
  renameBandsL8: function  (image){
    return image.select(app.options.lists.bandsL8,app.options.lists.newName);
  },
  renameBandsL5AndL7: function (image){
    return image.select(app.options.lists.bandsL5andL7,app.options.lists.newName);
  },
  dataBand:function(image){
    var dataBand = ee.String(image.get('system:index')).slice(16,18);
      dataBand = ee.Number.parse(dataBand);
      dataBand = ee.Image(dataBand)
      .rename('dataBand-month')
      .byte();
  return image
    .addBands(dataBand);
  },
  // --- select Landsat collections
  mosaicL8: function (year){
    return ee.ImageCollection(app.dataset.raster.L8)
            .filterDate(''+year+'-01-01', ''+(year+1)+'-01-01')
            // .filter(ee.Filter.lt("CLOUD_COVER",6))
            .map(app.functions.renameBandsL8)
            .map(app.functions.maskLsr) // mascara as nuvens
            .map(app.functions.bsi)      // calcula o bsi
            .map(app.functions.ndvi)     // calcula o ndvi
            .map(app.functions.nbr)           // calcula o nbr
            .map(app.functions.dataBand);
    },
  mosaicL5andL7: function (year){
    var L7 = ee.ImageCollection(app.dataset.raster.L7)
            .filterDate(''+year+'-01-01', ''+(year+1)+'-01-01')
            // .map(function(image){return image.divide(10000)})
            // .filter(ee.Filter.lt("CLOUD_COVER",6))
            .map(app.functions.renameBandsL5AndL7)
            .map(app.functions.maskLsr) // mascara as nuvens
            .map(app.functions.bsi)      // calcula o bsi
            .map(app.functions.ndvi)     // calcula o ndvi
            .map(app.functions.nbr)           // calcula o nbr
            .map(app.functions.dataBand);
    var L5 = ee.ImageCollection(app.dataset.raster.L5)
              .filterDate(''+year+'-01-01', ''+(year+1)+'-01-01')
          // .map(function(image){return image.divide(10000)})
            // .filter(ee.Filter.lt("CLOUD_COVER",6))
            .map(app.functions.renameBandsL5AndL7)
            .map(app.functions.maskLsr) // mascara as nuvens
            .map(app.functions.bsi)      // calcula o bsi
            .map(app.functions.ndvi)     // calcula o ndvi
            .map(app.functions.nbr)           // calcula o nbr
            .map(app.functions.dataBand);
    return L5.merge(L7);
  },
  mosaicL7: function  (year){
    return ee.ImageCollection(app.dataset.raster.L7)
            .filterDate(''+year+'-01-01', ''+(year+1)+'-01-01')
            // .map(function(image){return image.divide(10000)})
            // .filter(ee.Filter.lt("CLOUD_COVER",6))
            .map(app.functions.renameBandsL5AndL7)
            .map(app.functions.maskLsr) // mascara as nuvens
            .map(app.functions.bsi)      // calcula o bsi
            .map(app.functions.ndvi)     // calcula o ndvi
            .map(app.functions.nbr)           // calcula o nbr
            .map(app.functions.dataBand);
  },
  mosaicL5: function (year){
    return ee.ImageCollection(app.dataset.raster.L5)
            .filterDate(''+year+'-01-01', ''+(year+1)+'-01-01')
            // .map(function(image){return image.divide(10000)})
            // .filter(ee.Filter.lt("CLOUD_COVER",6))
             .map(app.functions.renameBandsL5AndL7)
            .map(app.functions.maskLsr) // mascara as nuvens
            .map(app.functions.bsi)      // calcula o bsi
            .map(app.functions.ndvi)     // calcula o ndvi
            .map(app.functions.nbr)           // calcula o nbr
            .map(app.functions.dataBand);
  },
  //--- select region
  getRegion: function (biomeID){
    var region = ee.FeatureCollection(app.dataset.vector.biomas)
      .filter(ee.Filter.eq('Bioma',biomeID))
      .geometry();
    if (biomeID === 'Brasil'){
      region = ee.FeatureCollection(app.dataset.vector.brasil)
      .geometry();
    }
    if (biomeID === 'América do Sul'){
      region = ee.FeatureCollection(app.dataset.vector.sulAmerica)
      .geometry();
    }
    if (biomeID === 'Canvas'){
      region = ee.Geometry.Rectangle(Map.getBounds());
    }
    var regionMask = ee.Image(1).clip(region);
    return {
      vector: region,
      raster: regionMask
    };
  },
  insertMap: function (image, visParams, name,position){
      image = ui.Map.Layer({
        eeObject:image,
        visParams:visParams,
        name:name,
        opacity:Map.layers().get(position).get('opacity'),
        shown:Map.layers().get(position).get('shown')
      });
      Map.remove(Map.layers().get(position));
      Map.layers().insert(position, image);
    },
  insertLayers: function (){
      //params position
      var qualityMosaicPosition = 0;
      var dataBandPosition = 1;
      var coverPosition = 2;
      var fireCoverPosition = 3;
      var firePosition = 4;
      var regionPosition = 5;
      var region = app.functions.getRegion(app.options.biomeName);
      var regionLine = ee.Image(1).paint(region['vector'],0,3);
      regionLine = regionLine.updateMask(regionLine.lt(1));
      app.functions.insertMap(regionLine,app.visParams.regionLine,app.options.biomeName,regionPosition);
      var collection = app.functions.mosaicL5andL7(app.options.year)
        .filterBounds(region['vector'])
        if (app.options.year >= 2013){
          collection = app.functions.mosaicL8(app.options.year)
            .filterBounds(region['vector'])
          }
      var qualityMosaic = collection.qualityMosaic(app.options.qualityBand)
        .updateMask(region['raster']);
      app.functions.insertMap(qualityMosaic,app.visParams.swir1NirRed, app.options.biomeName + '-' + app.options.year + '-' + app.options.qualityBand,qualityMosaicPosition);
      //addDataBand
      app.functions.insertMap(qualityMosaic,app.visParams.dataBand, app.options.biomeName + '-' + app.options.year + '-dataBand-' + app.options.qualityBand,dataBandPosition);
      var fire = ee.Image(app.dataset.raster.fire + '/' + app.options.year)
        .updateMask(region['raster']);
      app.functions.insertMap(fire,app.visParams.fire,'Fire-' + app.options.year,firePosition);
      var cover = ee.Image(app.dataset.raster.cover)
        .select('classification_' + app.options.year)
        .remap(app.options.lists.oriClasses,app.options.lists.aggrClasses)
        .updateMask(region['raster']);
      app.functions.insertMap(cover,app.visParams.cover,'Cover-' + app.options.year,coverPosition);
      var fireCover = cover.updateMask(fire);
      app.functions.insertMap(fireCover,app.visParams.cover,'Fire cover-' + app.options.year,fireCoverPosition);
      // app.functions.insertLegend();
    },
  insertLegend: function(){
  var listLayers = Map.layers()
  var listWidgets = listLayers.map(function(list){
  // print(list)
  return ui.Checkbox({
    label:list.get('name'),
    value:list.get('shown'),
    onChange:function(value){
      list.setShown(value)
    },
    // disabled,
    style:{
      fontSize:'11px',
      backgroundColor:'ffffff00',
      // width:'25px',
      // height:'0px',
      margin:'0 0 0 0', 
    }
  })
})
  var legend = ui.Panel({
    widgets:listWidgets,
    layout:ui.Panel.Layout.Flow('vertical'),
    style:{
      position:'bottom-left',
      fontSize:'11px',
      backgroundColor:'ffffffdd'
    }
  })
  // Map.add(legend);
  // Map.widgets().remove()
  // print('teste 2',Map.widgets());
  },
};
// --- --- --- --- --- VISUAL PARAMS
app.visParams = {
  regionLine: {
    palette:['ff0000'],
  },
  swir1NirRed: {
    bands:['swir1','nir','red'],
    min:0.05,
    max:0.4
  },
  dataBand: {
    bands:['dataBand-month'],
    min:1,
    max:12
  },
  cover:{
    palette:require('users/mapbiomas/modules:Palettes.js').get('classification5'),
    min:0,
    max:45,
  },
  fire:{
    palette:['000000'],
    min:0,
    max:1,
  }
},
// --- --- --- --- --- STYLE PANELS
app.styles = {
  qualityBandButton:{
      backgroundColor:app.options.styles.backgroundColorDefault + app.options.styles.transparenceDefault,
      fontSize:app.options.styles.fontSizeDefault,
      height:app.options.styles.heightDefault,
      width:app.options.styles.widthDefault,
      fontFamily:app.options.styles.fontFamilyDefault,
      position:app.options.styles.positionDefault,
      margin:app.options.styles.marginDefault,
  },
  qualityBandPanel:{
      backgroundColor:app.options.styles.backgroundColorDefault + app.options.styles.transparenceDefault,
      fontSize:app.options.styles.fontSizeDefault,
      // heigth:app.options.styles.heigthDefault,
      width:app.options.styles.widthPanelButton,
      fontFamily:app.options.styles.fontFamilyDefault,
      position:app.options.styles.positionDefault,
      margin:app.options.styles.marginDefault,
      textAlign:app.options.styles.marginDefault.textAlignDefault,
  },
  selectBiome:{
      backgroundColor:app.options.styles.backgroundColorDefault + app.options.styles.transparenceDefault,
      fontSize:app.options.styles.fontSizeDefault,
      // heigth:app.options.styles.heigthDefault,
      width:app.options.styles.widthPanelButton,
      fontFamily:app.options.styles.fontFamilyDefault,
      position:app.options.styles.positionDefault,
      margin:app.options.styles.marginDefault,
      textAlign:app.options.styles.marginDefault.textAlignDefault,
  },
  sliderYear:{
      backgroundColor:app.options.styles.backgroundColorDefault + app.options.styles.transparenceDefault,
      fontSize:app.options.styles.fontSizeDefault,
      // heigth:app.options.styles.heigthDefault,
      width:app.options.styles.widthPanelButton,
      fontFamily:app.options.styles.fontFamilyDefault,
      position:app.options.styles.positionDefault,
      margin:app.options.styles.marginDefault,
      textAlign:app.options.styles.marginDefault.textAlignDefault,
  },
  panelPrincipal:{
      backgroundColor:app.options.styles.backgroundColorDefault + app.options.styles.transparenceDefault1,
      position:app.options.styles.positionPanelPrincipal,
      margin:app.options.styles.marginDefault,
      textAlign:app.options.styles.marginDefault.textAlignDefault,
  }
};
// --- --- --- --- --- USERS INTERFACE
app.ui = {
  start:function(){
    print('Start App');
    print('app:',app);
    Map.addLayer(ee.Image().select(),{},'',true); 
    Map.addLayer(ee.Image().select(),{},'',false); 
    Map.addLayer(ee.Image().select(),{},'',false); 
    Map.addLayer(ee.Image().select(),{},'',false);
    Map.addLayer(ee.Image().select(),{},'',false); 
    Map.addLayer(ee.Image().select(),{},'',true);
    var widgets = [
      app.ui.selectBiome,
      app.ui.qualityMosaicSelect(),
      app.ui.sliderYear,
    ];
    var panelPrincipal = ui.Panel({
      widgets:widgets,
      layout:ui.Panel.Layout.Flow('vertical'),
      style:app.styles.panelPrincipal
    });
    Map.add(panelPrincipal)
    app.functions.insertLayers();
    // Map.centerObject(region['vector'])
    print('final start');
  },
  sliderYear:ui.Slider({
    min:1985,
    max:2020,
    value:app.options.year,
    step:1,
    onChange:function(value){
      app.options.year = value;
      app.functions.insertLayers();
    },
    // direction:,
    // disabled:,
    style:app.styles.sliderYear,
    }),
  qualityMosaicSelect:function(){
    var bottons = app.options.lists.qualityBands.map(function(band){
      return ui.Button({
        label:band,
        onClick:function(){
          app.options.qualityBand = band;
          app.functions.insertLayers();
        },
        // disabled:,
        style:app.styles.qualityBandButton
        });
    });
    return ui.Panel({
      widgets:bottons,
      layout:ui.Panel.Layout.Flow('horizontal'),
      style:app.styles.qualityBandPanel
    });
  },
  selectBiome:ui.Select({
                items: [
                    { label: "Amazônia", value:'Amazônia' },
                    { label: "Caatinga", value:'Caatinga' },
                    { label: "Cerrado", value:'Cerrado' },
                    { label: "Mata Atlântica", value:'Mata Atlântica'},
                    { label: "Pampa", value:'Pampa' },                    
                    { label: "Pantanal", value:'Pantanal' },             
                    { label: "Brasil", value: 'Brasil'},
                    { label:'América do Sul', value:'América do Sul'},
                    { label:'Canvas', value:'Canvas'},
                ],
                value: app.options.biomeName,
                placeholder:'Selecione uma Região',
                onChange: function(value){
                  app.options.biomeName = value;
                  app.functions.insertLayers();
                  Map.centerObject(app.functions.getRegion(app.options.biomeName)['vector']);
                },
                style:app.styles.selectBiome
            })
};
// --- --- --- --- --- START APP
app.ui.start();
// botão de exportar pontos aleatorios
// botão de exportar imagem para bucket
// organizar os paineis
// escreve estilos
// adicionar map com mosaicos quizenais