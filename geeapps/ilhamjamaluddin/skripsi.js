var imageB = ui.import && ui.import("imageB", "imageCollection", {
      "id": "LANDSAT/LC08/C01/T1_TOA"
    }) || ee.ImageCollection("LANDSAT/LC08/C01/T1_TOA"),
    roi2 = ui.import && ui.import("roi2", "table", {
      "id": "users/ilhamjamaluddin/AOI_Katang"
    }) || ee.FeatureCollection("users/ilhamjamaluddin/AOI_Katang"),
    roi = ui.import && ui.import("roi", "table", {
      "id": "users/ilhamjamaluddin/AOI_Bedul"
    }) || ee.FeatureCollection("users/ilhamjamaluddin/AOI_Bedul"),
    Air = ui.import && ui.import("Air", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            114.23274767888961,
            -8.610941499751261
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25163043035445,
            -8.612808485289245
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24648058904586,
            -8.636229883938901
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32338488592086,
            -8.642678999419338
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23394930852828,
            -8.648449167117331
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23978579534469,
            -8.622652438426972
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26742327703414,
            -8.640133309116214
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29712069524703,
            -8.646582357825359
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3148018170732,
            -8.643697270727145
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3093086530107,
            -8.629610940249908
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29488909734664,
            -8.62536796658633
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27394640935836,
            -8.622822159508761
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26433337224898,
            -8.615184635374334
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25489199651656,
            -8.625198246648255
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25042880071578,
            -8.640303022337848
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28287280095992,
            -8.644376116737359
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32767642034469,
            -8.647770328445102
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32492983831344,
            -8.635211592466618
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3312813092607,
            -8.642678999419338
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34175265325484,
            -8.649806840791733
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35102236761031,
            -8.652013050074224
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30072558416305,
            -8.638605886684285
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28235781682906,
            -8.62536796658633
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24356234563766,
            -8.613487386836765
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25317538274703,
            -8.616033256786725
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27016985906539,
            -8.629101785927599
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28252947820602,
            -8.635720738546317
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24510729803023,
            -8.648958295318712
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34378427896559,
            -8.643148281349516
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34987825784742,
            -8.647730474862135
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33279795084059,
            -8.63440801706749
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31906504068434,
            -8.625412970585877
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30275720987379,
            -8.619472728096595
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29425997171461,
            -8.616247985931627
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27196804879759,
            -8.609140863005354
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26201168893431,
            -8.605067388659707
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25634686349485,
            -8.602945770079655
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25051037667845,
            -8.601587927950698
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24098317025755,
            -8.601672793226376
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23669163583372,
            -8.602606310003804
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23059765695189,
            -8.605916032763131
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.22896687387083,
            -8.597005174833376
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23428837655638,
            -8.593016437197907
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25694767831419,
            -8.590809883456624
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25952259896849,
            -8.592252631586621
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26149670480345,
            -8.592846702750586
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26364247201536,
            -8.593101304393088
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26621739266966,
            -8.593865108294759
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27128140328978,
            -8.594798644307076
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27316967843626,
            -8.595392711481606
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26784817575071,
            -8.594374310040997
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25377194284056,
            -8.5905552802757
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25540272592161,
            -8.5877546340063
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24570385812376,
            -8.59165855949195
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27267226609092,
            -8.595477578144822
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25396117600303,
            -8.606170625623204
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24546393784385,
            -8.60549171094919
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23619422348838,
            -8.614741818634947
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27026900681358,
            -8.620851857445613
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28091201218467,
            -8.612450528627416
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28649100693565,
            -8.617117956572823
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27747878464561,
            -8.615250992307127
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27172812851768,
            -8.614232644277255
          ]
        }
      ],
      "displayProperties": [],
      "properties": {
        "ket": 0,
        "system:index": "0"
      },
      "color": "#d63000",
      "mode": "Feature",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.Feature(
        ee.Geometry.MultiPoint(
            [[114.23274767888961, -8.610941499751261],
             [114.25163043035445, -8.612808485289245],
             [114.24648058904586, -8.636229883938901],
             [114.32338488592086, -8.642678999419338],
             [114.23394930852828, -8.648449167117331],
             [114.23978579534469, -8.622652438426972],
             [114.26742327703414, -8.640133309116214],
             [114.29712069524703, -8.646582357825359],
             [114.3148018170732, -8.643697270727145],
             [114.3093086530107, -8.629610940249908],
             [114.29488909734664, -8.62536796658633],
             [114.27394640935836, -8.622822159508761],
             [114.26433337224898, -8.615184635374334],
             [114.25489199651656, -8.625198246648255],
             [114.25042880071578, -8.640303022337848],
             [114.28287280095992, -8.644376116737359],
             [114.32767642034469, -8.647770328445102],
             [114.32492983831344, -8.635211592466618],
             [114.3312813092607, -8.642678999419338],
             [114.34175265325484, -8.649806840791733],
             [114.35102236761031, -8.652013050074224],
             [114.30072558416305, -8.638605886684285],
             [114.28235781682906, -8.62536796658633],
             [114.24356234563766, -8.613487386836765],
             [114.25317538274703, -8.616033256786725],
             [114.27016985906539, -8.629101785927599],
             [114.28252947820602, -8.635720738546317],
             [114.24510729803023, -8.648958295318712],
             [114.34378427896559, -8.643148281349516],
             [114.34987825784742, -8.647730474862135],
             [114.33279795084059, -8.63440801706749],
             [114.31906504068434, -8.625412970585877],
             [114.30275720987379, -8.619472728096595],
             [114.29425997171461, -8.616247985931627],
             [114.27196804879759, -8.609140863005354],
             [114.26201168893431, -8.605067388659707],
             [114.25634686349485, -8.602945770079655],
             [114.25051037667845, -8.601587927950698],
             [114.24098317025755, -8.601672793226376],
             [114.23669163583372, -8.602606310003804],
             [114.23059765695189, -8.605916032763131],
             [114.22896687387083, -8.597005174833376],
             [114.23428837655638, -8.593016437197907],
             [114.25694767831419, -8.590809883456624],
             [114.25952259896849, -8.592252631586621],
             [114.26149670480345, -8.592846702750586],
             [114.26364247201536, -8.593101304393088],
             [114.26621739266966, -8.593865108294759],
             [114.27128140328978, -8.594798644307076],
             [114.27316967843626, -8.595392711481606],
             [114.26784817575071, -8.594374310040997],
             [114.25377194284056, -8.5905552802757],
             [114.25540272592161, -8.5877546340063],
             [114.24570385812376, -8.59165855949195],
             [114.27267226609092, -8.595477578144822],
             [114.25396117600303, -8.606170625623204],
             [114.24546393784385, -8.60549171094919],
             [114.23619422348838, -8.614741818634947],
             [114.27026900681358, -8.620851857445613],
             [114.28091201218467, -8.612450528627416],
             [114.28649100693565, -8.617117956572823],
             [114.27747878464561, -8.615250992307127],
             [114.27172812851768, -8.614232644277255]]),
        {
          "ket": 0,
          "system:index": "0"
        }),
    Mangrove = ui.import && ui.import("Mangrove", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            114.2281132508515,
            -8.587790696483157
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23000152599798,
            -8.587111748883853
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24176033031927,
            -8.587111748883853
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2383271027802,
            -8.58787556484764
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24888427746282,
            -8.584735422719477
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24802597057806,
            -8.586093325206967
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26064308178411,
            -8.588299906385293
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25875480663763,
            -8.587111748883853
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25163085949407,
            -8.584820291767281
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24364951374059,
            -8.585929586870972
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25171759845739,
            -8.58716018233418
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23601058246618,
            -8.59611370498937
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26684351335416,
            -8.59130986416865
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26392526994596,
            -8.589867112452158
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26963301072965,
            -8.59678378399093
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27259416948209,
            -8.598184076364475
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27160711656461,
            -8.59257955288752
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27512617479215,
            -8.594022294284281
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27864523301969,
            -8.596313695805865
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2807910002316,
            -8.597926155239318
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27791567216764,
            -8.600387264303766
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28632707963834,
            -8.59321605712165
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28559751878629,
            -8.595125563412576
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28568334947477,
            -8.601320784249383
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28752870927701,
            -8.602890789878607
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29338774832524,
            -8.605521595530963
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2946752086524,
            -8.605945917311404
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2964776531104,
            -8.605097273274964
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30518946799077,
            -8.608873724633172
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30076918753423,
            -8.60700671968177
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2996104732398,
            -8.608788860971549
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30729231985845,
            -8.610698288755154
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31068263205327,
            -8.609382906203331
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31192717703618,
            -8.60743103979756
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31192717703618,
            -8.605564027730408
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30725424788352,
            -8.597797037281422
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30931418440696,
            -8.598985161299522
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31253283522483,
            -8.598560831720729
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31751101515647,
            -8.602634376058132
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3157514860427,
            -8.601488696140782
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31806891463157,
            -8.598900295421776
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32017176649924,
            -8.607344357079938
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32373374007102,
            -8.607004900947617
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32510703108665,
            -8.613072633390617
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32626574538108,
            -8.611799690593838
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33012812636252,
            -8.613242358773203
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33549254439231,
            -8.608999201365366
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33450549147483,
            -8.607344357079938
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3342479994094,
            -8.614048553300501
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3318876554763,
            -8.616806574213413
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3378606896099,
            -8.620444043880457
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33511410757865,
            -8.622268552177761
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34039269491996,
            -8.622310982498465
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34987698599662,
            -8.634445029626374
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35163651511039,
            -8.634445029626374
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34253846213187,
            -8.626425871978718
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34850369498099,
            -8.623286049574213
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35283814474906,
            -8.620224758251176
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34725914999808,
            -8.619333715597076
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34125100180472,
            -8.619927744266553
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35515557333792,
            -8.609859306844484
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35236607596244,
            -8.60951985296784
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35502682730521,
            -8.617581800250802
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33571492239798,
            -8.614229748303506
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33377253952494,
            -8.603662075717304
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32982432785502,
            -8.59559983198335
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32574737015238,
            -8.599546109562677
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3343492826649,
            -8.593103510334304
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32821238843883,
            -8.589708807732576
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33065856306041,
            -8.584574262323699
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32362044660533,
            -8.5941643486649
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31997264234508,
            -8.59433408252234
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30971587507213,
            -8.595182750669561
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30572474805797,
            -8.598195507245864
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2370995512315,
            -8.587423012312106
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23641290572368,
            -8.58780492017291
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2356404295274,
            -8.588292912991136
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23621978667461,
            -8.589120377639617
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2370995512315,
            -8.58922646272042
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23642041077846,
            -8.59618499111076
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23931719651455,
            -8.586332442661394
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24056174149746,
            -8.587011391655183
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24047324783601,
            -8.592631031686679
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.248755909274,
            -8.589109022758448
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24845550186433,
            -8.582404385278325
          ]
        }
      ],
      "displayProperties": [],
      "properties": {
        "ket": 1,
        "system:index": "0"
      },
      "color": "#98ff00",
      "mode": "Feature",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.Feature(
        ee.Geometry.MultiPoint(
            [[114.2281132508515, -8.587790696483157],
             [114.23000152599798, -8.587111748883853],
             [114.24176033031927, -8.587111748883853],
             [114.2383271027802, -8.58787556484764],
             [114.24888427746282, -8.584735422719477],
             [114.24802597057806, -8.586093325206967],
             [114.26064308178411, -8.588299906385293],
             [114.25875480663763, -8.587111748883853],
             [114.25163085949407, -8.584820291767281],
             [114.24364951374059, -8.585929586870972],
             [114.25171759845739, -8.58716018233418],
             [114.23601058246618, -8.59611370498937],
             [114.26684351335416, -8.59130986416865],
             [114.26392526994596, -8.589867112452158],
             [114.26963301072965, -8.59678378399093],
             [114.27259416948209, -8.598184076364475],
             [114.27160711656461, -8.59257955288752],
             [114.27512617479215, -8.594022294284281],
             [114.27864523301969, -8.596313695805865],
             [114.2807910002316, -8.597926155239318],
             [114.27791567216764, -8.600387264303766],
             [114.28632707963834, -8.59321605712165],
             [114.28559751878629, -8.595125563412576],
             [114.28568334947477, -8.601320784249383],
             [114.28752870927701, -8.602890789878607],
             [114.29338774832524, -8.605521595530963],
             [114.2946752086524, -8.605945917311404],
             [114.2964776531104, -8.605097273274964],
             [114.30518946799077, -8.608873724633172],
             [114.30076918753423, -8.60700671968177],
             [114.2996104732398, -8.608788860971549],
             [114.30729231985845, -8.610698288755154],
             [114.31068263205327, -8.609382906203331],
             [114.31192717703618, -8.60743103979756],
             [114.31192717703618, -8.605564027730408],
             [114.30725424788352, -8.597797037281422],
             [114.30931418440696, -8.598985161299522],
             [114.31253283522483, -8.598560831720729],
             [114.31751101515647, -8.602634376058132],
             [114.3157514860427, -8.601488696140782],
             [114.31806891463157, -8.598900295421776],
             [114.32017176649924, -8.607344357079938],
             [114.32373374007102, -8.607004900947617],
             [114.32510703108665, -8.613072633390617],
             [114.32626574538108, -8.611799690593838],
             [114.33012812636252, -8.613242358773203],
             [114.33549254439231, -8.608999201365366],
             [114.33450549147483, -8.607344357079938],
             [114.3342479994094, -8.614048553300501],
             [114.3318876554763, -8.616806574213413],
             [114.3378606896099, -8.620444043880457],
             [114.33511410757865, -8.622268552177761],
             [114.34039269491996, -8.622310982498465],
             [114.34987698599662, -8.634445029626374],
             [114.35163651511039, -8.634445029626374],
             [114.34253846213187, -8.626425871978718],
             [114.34850369498099, -8.623286049574213],
             [114.35283814474906, -8.620224758251176],
             [114.34725914999808, -8.619333715597076],
             [114.34125100180472, -8.619927744266553],
             [114.35515557333792, -8.609859306844484],
             [114.35236607596244, -8.60951985296784],
             [114.35502682730521, -8.617581800250802],
             [114.33571492239798, -8.614229748303506],
             [114.33377253952494, -8.603662075717304],
             [114.32982432785502, -8.59559983198335],
             [114.32574737015238, -8.599546109562677],
             [114.3343492826649, -8.593103510334304],
             [114.32821238843883, -8.589708807732576],
             [114.33065856306041, -8.584574262323699],
             [114.32362044660533, -8.5941643486649],
             [114.31997264234508, -8.59433408252234],
             [114.30971587507213, -8.595182750669561],
             [114.30572474805797, -8.598195507245864],
             [114.2370995512315, -8.587423012312106],
             [114.23641290572368, -8.58780492017291],
             [114.2356404295274, -8.588292912991136],
             [114.23621978667461, -8.589120377639617],
             [114.2370995512315, -8.58922646272042],
             [114.23642041077846, -8.59618499111076],
             [114.23931719651455, -8.586332442661394],
             [114.24056174149746, -8.587011391655183],
             [114.24047324783601, -8.592631031686679],
             [114.248755909274, -8.589109022758448],
             [114.24845550186433, -8.582404385278325]]),
        {
          "ket": 1,
          "system:index": "0"
        }),
    VegeNonMangrove = ui.import && ui.import("VegeNonMangrove", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            114.2347696113311,
            -8.599580924101849
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.24309518811333,
            -8.59720467607645
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2509057807647,
            -8.596950077189938
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25455358502495,
            -8.597331975455555
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25334499981477,
            -8.5938100101949
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26506088879182,
            -8.600769042525936
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27269982006624,
            -8.603357430475574
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27981858313387,
            -8.606181541298321
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2855692392618,
            -8.609194210387324
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29059033453768,
            -8.611400657041047
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29814814207953,
            -8.613904885420613
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30647371886175,
            -8.616111304598403
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31368349669378,
            -8.616281028617308
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31793211577337,
            -8.619166325281824
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32115076659124,
            -8.619166325281824
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31999205229681,
            -8.614371629012503
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31698797820013,
            -8.613777591613777
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31866449513586,
            -8.6109812335623
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32999911425622,
            -8.626004174022674
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32497801898035,
            -8.623755382442184
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33137240527185,
            -8.627319498741247
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3370372307113,
            -8.629271262461208
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33928277078576,
            -8.63156074291346
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34301640573449,
            -8.633851917029773
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34378888193078,
            -8.635549074072987
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35028214652152,
            -8.641590901045124
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35491700369926,
            -8.644306292924647
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3553032417974,
            -8.641548472891815
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35436036347437,
            -8.627559571051153
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35513283967066,
            -8.629341615454239
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34040888341383,
            -8.613884283852762
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34551580937818,
            -8.612102166561682
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34092386754469,
            -8.605991986411134
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34019430669264,
            -8.60348848133736
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34748991521315,
            -8.600900094283315
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29838530364509,
            -8.594264229681329
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29977368732352,
            -8.586826557046285
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31590985675712,
            -8.586274910812657
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.31848477741141,
            -8.586487082535893
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2854941540204,
            -8.590772925939032
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27169538394878,
            -8.584180486315324
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26315523044536,
            -8.58133735809175
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26610703418328,
            -8.576938620404624
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.26984066913201,
            -8.577447844863215
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27400345752312,
            -8.577490280203953
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25576443622185,
            -8.577575150871194
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.25402059113344,
            -8.576526093729628
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2438925698932,
            -8.573258550331868
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.22817110137248,
            -8.572318350483163
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23134683684611,
            -8.582047614191524
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.23738286741127,
            -8.567751684239015
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2321471954142,
            -8.555741986231745
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29543125460464,
            -8.572653773381344
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29328548739272,
            -8.572484029829367
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.303241847256,
            -8.57273864512889
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35598091933593,
            -8.58389783393504
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35271935317382,
            -8.599937782034853
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.35349182937011,
            -8.573204158545815
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3487711415039,
            -8.571676466061309
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33599354863645,
            -8.566351604012334
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.332131167655,
            -8.56168355136394
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34560658574583,
            -8.557779317904174
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30672528386594,
            -8.578488272710938
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29582478642942,
            -8.575432924088679
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29659726262571,
            -8.57662111813954
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32311894536497,
            -8.572632166267798
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.32028653264524,
            -8.572886781468087
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28458096623899,
            -8.578658013580498
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30663945317747,
            -8.581119247663583
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2962530458924,
            -8.575691903174109
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29740103135077,
            -8.575405463176214
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2971542681214,
            -8.575097805160182
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29600628266303,
            -8.574938671605848
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29631741890876,
            -8.5740369135392
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29573806176154,
            -8.57384595273288
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29548859491842,
            -8.57332081002074
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2922288839211,
            -8.612870314316357
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29218596857686,
            -8.6134007061678
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2912203733315,
            -8.613570431403177
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2968208257546,
            -8.615204032899344
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28107592321919,
            -8.609764602404939
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.28083988882588,
            -8.610125271905503
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27923056341695,
            -8.610104056062038
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.27659126974629,
            -8.608109761466217
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3130823384812,
            -8.567142251748942
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.30827581992651,
            -8.572298250774896
          ]
        }
      ],
      "displayProperties": [],
      "properties": {
        "ket": 2,
        "system:index": "0"
      },
      "color": "#0b4a8b",
      "mode": "Feature",
      "shown": false,
      "locked": false
    }) || 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Feature(
        ee.Geometry.MultiPoint(
            [[114.2347696113311, -8.599580924101849],
             [114.24309518811333, -8.59720467607645],
             [114.2509057807647, -8.596950077189938],
             [114.25455358502495, -8.597331975455555],
             [114.25334499981477, -8.5938100101949],
             [114.26506088879182, -8.600769042525936],
             [114.27269982006624, -8.603357430475574],
             [114.27981858313387, -8.606181541298321],
             [114.2855692392618, -8.609194210387324],
             [114.29059033453768, -8.611400657041047],
             [114.29814814207953, -8.613904885420613],
             [114.30647371886175, -8.616111304598403],
             [114.31368349669378, -8.616281028617308],
             [114.31793211577337, -8.619166325281824],
             [114.32115076659124, -8.619166325281824],
             [114.31999205229681, -8.614371629012503],
             [114.31698797820013, -8.613777591613777],
             [114.31866449513586, -8.6109812335623],
             [114.32999911425622, -8.626004174022674],
             [114.32497801898035, -8.623755382442184],
             [114.33137240527185, -8.627319498741247],
             [114.3370372307113, -8.629271262461208],
             [114.33928277078576, -8.63156074291346],
             [114.34301640573449, -8.633851917029773],
             [114.34378888193078, -8.635549074072987],
             [114.35028214652152, -8.641590901045124],
             [114.35491700369926, -8.644306292924647],
             [114.3553032417974, -8.641548472891815],
             [114.35436036347437, -8.627559571051153],
             [114.35513283967066, -8.629341615454239],
             [114.34040888341383, -8.613884283852762],
             [114.34551580937818, -8.612102166561682],
             [114.34092386754469, -8.605991986411134],
             [114.34019430669264, -8.60348848133736],
             [114.34748991521315, -8.600900094283315],
             [114.29838530364509, -8.594264229681329],
             [114.29977368732352, -8.586826557046285],
             [114.31590985675712, -8.586274910812657],
             [114.31848477741141, -8.586487082535893],
             [114.2854941540204, -8.590772925939032],
             [114.27169538394878, -8.584180486315324],
             [114.26315523044536, -8.58133735809175],
             [114.26610703418328, -8.576938620404624],
             [114.26984066913201, -8.577447844863215],
             [114.27400345752312, -8.577490280203953],
             [114.25576443622185, -8.577575150871194],
             [114.25402059113344, -8.576526093729628],
             [114.2438925698932, -8.573258550331868],
             [114.22817110137248, -8.572318350483163],
             [114.23134683684611, -8.582047614191524],
             [114.23738286741127, -8.567751684239015],
             [114.2321471954142, -8.555741986231745],
             [114.29543125460464, -8.572653773381344],
             [114.29328548739272, -8.572484029829367],
             [114.303241847256, -8.57273864512889],
             [114.35598091933593, -8.58389783393504],
             [114.35271935317382, -8.599937782034853],
             [114.35349182937011, -8.573204158545815],
             [114.3487711415039, -8.571676466061309],
             [114.33599354863645, -8.566351604012334],
             [114.332131167655, -8.56168355136394],
             [114.34560658574583, -8.557779317904174],
             [114.30672528386594, -8.578488272710938],
             [114.29582478642942, -8.575432924088679],
             [114.29659726262571, -8.57662111813954],
             [114.32311894536497, -8.572632166267798],
             [114.32028653264524, -8.572886781468087],
             [114.28458096623899, -8.578658013580498],
             [114.30663945317747, -8.581119247663583],
             [114.2962530458924, -8.575691903174109],
             [114.29740103135077, -8.575405463176214],
             [114.2971542681214, -8.575097805160182],
             [114.29600628266303, -8.574938671605848],
             [114.29631741890876, -8.5740369135392],
             [114.29573806176154, -8.57384595273288],
             [114.29548859491842, -8.57332081002074],
             [114.2922288839211, -8.612870314316357],
             [114.29218596857686, -8.6134007061678],
             [114.2912203733315, -8.613570431403177],
             [114.2968208257546, -8.615204032899344],
             [114.28107592321919, -8.609764602404939],
             [114.28083988882588, -8.610125271905503],
             [114.27923056341695, -8.610104056062038],
             [114.27659126974629, -8.608109761466217],
             [114.3130823384812, -8.567142251748942],
             [114.30827581992651, -8.572298250774896]]),
        {
          "ket": 2,
          "system:index": "0"
        }),
    NonVege = ui.import && ui.import("NonVege", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            114.33994527751224,
            -8.556757385633174
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33891530925052,
            -8.556746776220093
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33948393756168,
            -8.556757385633174
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3410718052985,
            -8.556757385633174
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34132929736393,
            -8.556693729150268
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3416833489539,
            -8.556757385633174
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3419730275275,
            -8.556704338564828
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34224124842899,
            -8.556789213870639
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34323903018253,
            -8.556821042105444
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34383984500187,
            -8.556757385633174
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34522386485355,
            -8.556799823282537
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34624310427921,
            -8.556789213870639
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34492345744388,
            -8.556778604458447
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34482689791935,
            -8.557171152512685
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33835740977543,
            -8.556746776220093
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33863635951298,
            -8.556672510320277
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34952613202927,
            -8.556786885730883
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34900041906235,
            -8.555227298957302
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34986945478317,
            -8.556755057493216
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3503415235698,
            -8.556808104554502
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.34705849973557,
            -8.556765666906069
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.3367306477162,
            -8.555635666625351
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.33671991888014,
            -8.55591151207418
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29310102816044,
            -8.556659236190049
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29315467234073,
            -8.55704117496246
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29095526094852,
            -8.55672289267873
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29126639719425,
            -8.556669845605562
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29099817629276,
            -8.55640461012894
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29071922655521,
            -8.556457657239044
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29069776888309,
            -8.557221534805162
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29230709429203,
            -8.557815660741573
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.2931654011768,
            -8.557741395050222
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29128785486637,
            -8.556913862080895
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            114.29012914057193,
            -8.556362172435547
          ]
        }
      ],
      "displayProperties": [],
      "properties": {
        "ket": 3,
        "system:index": "0"
      },
      "color": "#ffc82d",
      "mode": "Feature",
      "shown": false,
      "locked": false
    }) || 
    /* color: #ffc82d */
    /* shown: false */
    ee.Feature(
        ee.Geometry.MultiPoint(
            [[114.33994527751224, -8.556757385633174],
             [114.33891530925052, -8.556746776220093],
             [114.33948393756168, -8.556757385633174],
             [114.3410718052985, -8.556757385633174],
             [114.34132929736393, -8.556693729150268],
             [114.3416833489539, -8.556757385633174],
             [114.3419730275275, -8.556704338564828],
             [114.34224124842899, -8.556789213870639],
             [114.34323903018253, -8.556821042105444],
             [114.34383984500187, -8.556757385633174],
             [114.34522386485355, -8.556799823282537],
             [114.34624310427921, -8.556789213870639],
             [114.34492345744388, -8.556778604458447],
             [114.34482689791935, -8.557171152512685],
             [114.33835740977543, -8.556746776220093],
             [114.33863635951298, -8.556672510320277],
             [114.34952613202927, -8.556786885730883],
             [114.34900041906235, -8.555227298957302],
             [114.34986945478317, -8.556755057493216],
             [114.3503415235698, -8.556808104554502],
             [114.34705849973557, -8.556765666906069],
             [114.3367306477162, -8.555635666625351],
             [114.33671991888014, -8.55591151207418],
             [114.29310102816044, -8.556659236190049],
             [114.29315467234073, -8.55704117496246],
             [114.29095526094852, -8.55672289267873],
             [114.29126639719425, -8.556669845605562],
             [114.29099817629276, -8.55640461012894],
             [114.29071922655521, -8.556457657239044],
             [114.29069776888309, -8.557221534805162],
             [114.29230709429203, -8.557815660741573],
             [114.2931654011768, -8.557741395050222],
             [114.29128785486637, -8.556913862080895],
             [114.29012914057193, -8.556362172435547]]),
        {
          "ket": 3,
          "system:index": "0"
        });
///////////////////////////SCENE BANYUWANGI PATH 117 ROW 66////////////////////////////
////////////////////////////////////PREPARE DATASET AND CLOUD MASKING////////////////////////////////////
///Citra Non Mask
// var filtered = imageB
//     .filterBounds(roi)
//     .filterDate('2019-01-01', '2019-11-30')
//     .sort('CLOUD_COVER')
//     .first()
//     .clip(roi)
//     .select('B1','B2','B3','B4','B5','B6','B7');
// Map.addLayer(filtered, {bands: ['B5', 'B6', 'B7'], max: 0.3}, 'filtered');
// print("filtered",filtered)
// Function to mask clouds using the quality band of Landsat 8
var maskL8B = function(imageB) {
  var qaB = imageB.select('BQA');
  /// Check that the cloud bit is off.
    var maskB = qaB.bitwiseAnd(1 << 4).eq(0);
  return imageB.updateMask(maskB);
}
// Masking the cloud, filtering the date, and selecting median data to the image
var cmaskB = imageB
    .filterDate('2019-01-01', '2019-11-30')
    .map(maskL8B)
    .median()
    .clip(roi)
    .select('B1','B2','B3','B4','B5','B6','B7');
//Visualizing the image
Map.addLayer(cmaskB, {bands: ['B5', 'B6', 'B7'], max: 0.3}, 'Cloud Masking');
print("cmaskB",cmaskB)
////////////////////////////////TRANSFORMATION INDEX///////////////////////////////////////////////////
//NDVI
var NDVI = cmaskB.expression(
    '(nir-red) / (nir+red)',
    {
        red: cmaskB.select('B4'),    
        nir: cmaskB.select('B5')   
    }).rename('NDVI');
// Map.addLayer(NDVI, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'NDVI');
// print(NDVI)
////SR
var SR = cmaskB.expression(
    'nir / red',
    {
        red: cmaskB.select('B4'),    
        nir: cmaskB.select('B5')   
    }).rename('SR');
// print(SR)
// Map.addLayer(SR, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'SR');
////CMRI
var CMRI = cmaskB.expression(
    '((nir-red) / (nir+red)) - ((green-nir) / (green+nir))',
    {
        red: cmaskB.select('B4'),
        green: cmaskB.select('B3'),    
        nir: cmaskB.select('B5')   
    }).rename('CMRI');
// Map.addLayer(CMRI, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'CMRI');
// print(CMRI)
var MI = cmaskB.expression(
    '((nir-swir) / (nir*swir))',
    {
        swir: cmaskB.select('B6'),
        nir: cmaskB.select('B5')   
    }).rename('MI');
// Map.addLayer(MI, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'CMRI');
print(MI);
///stack ALL BAND////
var stackall = cmaskB.addBands(NDVI).addBands(SR).addBands(CMRI).addBands(MI);
print ("stackall Bedul",stackall);
// // ////////////////////////////////Spectral Reflectance///////////////////////////////////////////////////
// // // // //Choose bands to include and define feature collection to use
var subset = stackall.select('NDVI','MI','SR','CMRI')
var samples = ee.FeatureCollection([Air,Mangrove,VegeNonMangrove,NonVege]);
Export.table.toDrive({collection: samples, fileFormat: 'GeoJSON'});
// Create the scatter chart
var Chart1 = ui.Chart.image.regions(
    subset, samples, ee.Reducer.mean(), 10, 'ket')
        .setChartType('ScatterChart');
print(Chart1);
// Define customization options.
var plotOptions = {
  title: 'Kurva Pantulan 4 Kelas Saluran Asli Kajian Bedul',
  hAxis: {title: 'Bands'},
  vAxis: {title: 'Reflectance'},
  lineWidth: 1,
  pointSize: 4,
  series: {
    0: {color: 'blue'}, // Waters
    1: {color: 'green'}, // Mangrove
    2: {color: 'red'}, // Vegenonmangrove
    3: {color: 'purple'}, // Nonvege
}};
// Define a list of Landsat-8 wavelengths for X-axis labels.
var wavelengths = [443, 482, 562, 655, 865, 1609, 2201];
var Bands = ['NDVI','MI','SR','CMRI']
// Create the chart and set options.
var Chart2 = ui.Chart.image.regions(
    subset, samples, ee.Reducer.mean(), 10, 'ket', Bands )
        .setChartType('ScatterChart')
        .setOptions(plotOptions);
// Display the chart.
print(Chart2);
/////////////////////////////////////////ML CLASSFICIATION////////////////////////////////////////////
var input = ['B5', 'B6','MI','SR'];
//collect training data
var training = stackall.select(input).sampleRegions({
    collection: samples, 
    properties: ['ket'], 
    scale: 30
});
//machine learning algorithm
var classifier = ee.Classifier.svm({
  decisionProcedure: 'Voting',
  kernelType: 'RBF',
  gamma: 0.5,
  cost: 10
});
var trained = classifier.train(training, 'ket', input);
var classified = stackall.select(input).classify(trained);
print(classified)
Map.addLayer(classified, {min: 0, max: 3, palette: ["blue", "purple", "green","pink"]}, 'classification');
Export.image.toDrive({
  image: classified,
  scale: 30,
  description: 'Bedul_TO_Bedul',
  region: roi,
  maxPixels: 1e9
});
// ////////////////////////////////////////ML APPLICATION IN KB/////////////////////////////////////////
// Function to mask clouds using the quality band of Landsat 8
var maskL8B2 = function(imageB) {
  var qaB2 = imageB.select('BQA');
  /// Check that the cloud bit is off.
    var maskB2 = qaB2.bitwiseAnd(1 << 4).eq(0);
  return imageB.updateMask(maskB2);
}
/////Masking the cloud, filtering the date, and selecting median data to the image
var cmaskB2 = imageB
    .filterDate('2019-01-01', '2019-11-30')
    .map(maskL8B2)
    .median()
    .clip(roi2)
    .select('B1','B2','B3','B4','B5','B6','B7');
/////Visualizing the image
// Map.addLayer(cmaskB, {bands: ['B5', 'B6', 'B7'], max: 0.35}, 'Cloud Masking');
////////////////////////////////TRANSFORMATION INDEX///////////////////////////////////////////////////
//NDVI
var NDVI2 = cmaskB2.expression(
    '(nir-red) / (nir+red)',
    {
        red: cmaskB2.select('B4'),    
        nir: cmaskB2.select('B5')   
    }).rename('NDVI');
// Map.addLayer(NDVI, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'NDVI');
// print(NDVI)
////SR
var SR2 = cmaskB2.expression(
    'nir / red',
    {
        red: cmaskB2.select('B4'),    
        nir: cmaskB2.select('B5')   
    }).rename('SR');
// print(SR)
// Map.addLayer(SR, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'SR');
////CMRI
var CMRI2 = cmaskB2.expression(
    '((nir-red) / (nir+red)) - ((green-nir) / (green+nir))',
    {
        red: cmaskB2.select('B4'),
        green: cmaskB2.select('B3'),    
        nir: cmaskB2.select('B5')   
    }).rename('CMRI');
// Map.addLayer(CMRI, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'CMRI');
// print(CMRI)
var MI2 = cmaskB2.expression(
    '((nir-swir) / (nir*swir))',
    {
        swir: cmaskB2.select('B6'),
        nir: cmaskB2.select('B5')   
    }).rename('MI');
// Map.addLayer(MI, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'CMRI');
// print(MI);
/////stack ALL BAND////
var stackall2 = cmaskB2.addBands(NDVI2).addBands(SR2).addBands(CMRI2).addBands(MI2);
print (stackall2);
var classified2 = stackall2.select(input).classify(trained);
print('classified2', classified2)
Map.addLayer(classified2, {min: 0, max: 3, palette: ["blue", "purple", "green","pink"]}, 'classification2');
Export.image.toDrive({
  image: classified2,
  scale: 30,
  description: 'Bedul_TO_Katang',
  region: roi2,
  maxPixels: 1e9
});