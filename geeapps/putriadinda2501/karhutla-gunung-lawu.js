var batas = ui.import && ui.import("batas", "table", {
      "id": "users/putriadinda2501/TUGAS_AKHIR/BATASWILAYAH"
    }) || ee.FeatureCollection("users/putriadinda2501/TUGAS_AKHIR/BATASWILAYAH"),
    sampel2018 = ui.import && ui.import("sampel2018", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            111.19863234655622,
            -7.622276939323952
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.19730197088484,
            -7.620788171621733
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20064936773542,
            -7.62240454774327
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.19976960317854,
            -7.621298606845625
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20828829900984,
            -7.6165557894564575
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20586358206037,
            -7.61604534858081
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20423279897932,
            -7.615726322724757
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24590772873775,
            -7.602343922474366
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24606866127864,
            -7.6028969177288115
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24957699067012,
            -7.601663311952514
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.23813148692395,
            -7.616647482026504
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.23894687846447,
            -7.617795971527506
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.23935457423474,
            -7.61877431200722
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20996698305544,
            -7.6533778358972
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20743497774538,
            -7.651740310329664
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20764955446657,
            -7.654547493166578
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.21366298280262,
            -7.641413340823262
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.21452128968738,
            -7.6427212667780475
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.2379181345003,
            -7.623744429692421
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.23876571254901,
            -7.624329299297018
          ]
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#d63000",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([111.19863234655622, -7.622276939323952]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Point([111.19730197088484, -7.620788171621733]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20064936773542, -7.62240454774327]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Point([111.19976960317854, -7.621298606845625]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20828829900984, -7.6165557894564575]),
            {
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20586358206037, -7.61604534858081]),
            {
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20423279897932, -7.615726322724757]),
            {
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24590772873775, -7.602343922474366]),
            {
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24606866127864, -7.6028969177288115]),
            {
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24957699067012, -7.601663311952514]),
            {
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([111.23813148692395, -7.616647482026504]),
            {
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([111.23894687846447, -7.617795971527506]),
            {
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([111.23935457423474, -7.61877431200722]),
            {
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20996698305544, -7.6533778358972]),
            {
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20743497774538, -7.651740310329664]),
            {
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20764955446657, -7.654547493166578]),
            {
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([111.21366298280262, -7.641413340823262]),
            {
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([111.21452128968738, -7.6427212667780475]),
            {
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([111.2379181345003, -7.623744429692421]),
            {
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([111.23876571254901, -7.624329299297018]),
            {
              "system:index": "19"
            })]),
    RF2018 = ui.import && ui.import("RF2018", "image", {
      "id": "users/putriadinda2501/TUGAS_AKHIR/RF2018"
    }) || ee.Image("users/putriadinda2501/TUGAS_AKHIR/RF2018"),
    RF2019 = ui.import && ui.import("RF2019", "image", {
      "id": "users/putriadinda2501/TUGAS_AKHIR/RF2019"
    }) || ee.Image("users/putriadinda2501/TUGAS_AKHIR/RF2019"),
    sampel2019 = ui.import && ui.import("sampel2019", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            111.24056108628596,
            -7.624807321720278
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.23890884553279,
            -7.624403230530091
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.23796470795955,
            -7.623765191032013
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.2484619366255,
            -7.601269827607328
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24971721044447,
            -7.601737747885878
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.2456453760785,
            -7.608426396912099
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24416479670228,
            -7.607596914451971
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.23545082654036,
            -7.611043464770588
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.21817302586915,
            -7.643821676710516
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.21491145970704,
            -7.642694524153096
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.19883821536746,
            -7.658516765155433
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.20083377887454,
            -7.660175530875592
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.19879530002322,
            -7.656241268342066
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.19914522624673,
            -7.636336121686812
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.19270792461099,
            -7.6394422406427935
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.1982225463456,
            -7.633806390329955
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24449041128459,
            -7.636577229435009
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24650743246379,
            -7.633982603392179
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24773051977458,
            -7.633259508082181
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            111.24137904882731,
            -7.634535557803926
          ]
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#0d46d6",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #0d46d6 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([111.24056108628596, -7.624807321720278]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Point([111.23890884553279, -7.624403230530091]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Point([111.23796470795955, -7.623765191032013]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Point([111.2484619366255, -7.601269827607328]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24971721044447, -7.601737747885878]),
            {
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([111.2456453760785, -7.608426396912099]),
            {
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24416479670228, -7.607596914451971]),
            {
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([111.23545082654036, -7.611043464770588]),
            {
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([111.21817302586915, -7.643821676710516]),
            {
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([111.21491145970704, -7.642694524153096]),
            {
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([111.19883821536746, -7.658516765155433]),
            {
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([111.20083377887454, -7.660175530875592]),
            {
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([111.19879530002322, -7.656241268342066]),
            {
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([111.19914522624673, -7.636336121686812]),
            {
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([111.19270792461099, -7.6394422406427935]),
            {
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([111.1982225463456, -7.633806390329955]),
            {
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24449041128459, -7.636577229435009]),
            {
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24650743246379, -7.633982603392179]),
            {
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24773051977458, -7.633259508082181]),
            {
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([111.24137904882731, -7.634535557803926]),
            {
              "system:index": "19"
            })]),
    hotspot = ui.import && ui.import("hotspot", "table", {
      "id": "users/putriadinda2501/2018"
    }) || ee.FeatureCollection("users/putriadinda2501/2018"),
    DEMNASA = ui.import && ui.import("DEMNASA", "image", {
      "id": "users/putriadinda2501/TUGAS_AKHIR/DEMNASA"
    }) || ee.Image("users/putriadinda2501/TUGAS_AKHIR/DEMNASA"),
    DEMNASB = ui.import && ui.import("DEMNASB", "image", {
      "id": "users/putriadinda2501/TUGAS_AKHIR/DEMNASB"
    }) || ee.Image("users/putriadinda2501/TUGAS_AKHIR/DEMNASB");
Map.setOptions('satellite');
function maskS2clouds(image) {
var qa = image.select('QA10').clip(batas);
// Bits 10 and 11 are clouds and cirrus, respectively.
  var cloudBitMask = 1 << 10;
  var cirrusBitMask = 1 << 11;
  // Both flags should be set to zero, indicating clear conditions.
  var mask = qa.bitwiseAnd(cloudBitMask).eq(0)
      .and(qa.bitwiseAnd(cirrusBitMask).eq(0)); 
  return image.updateMask(mask).divide(10000)}
//CITRA SENTINEL 2 
var pre2018 = ee.ImageCollection('COPERNICUS/S2')
                  .filterDate('2018-08-01', '2018-08-6')
                  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE',100))
                  .filterBounds(batas)
                  .map(maskS2clouds);
var post2018 = ee.ImageCollection('COPERNICUS/S2')
                  .filterDate('2018-10-12', '2018-10-18')
                  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE',100))
                  .filterBounds(batas)
                  .map(maskS2clouds);
var pre2019 = ee.ImageCollection('COPERNICUS/S2_SR')
                  .filterDate('2019-08-13', '2019-08-18')
                  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE',30))
                  .filterBounds(batas)
                  .map(maskS2clouds);
var post2019 = ee.ImageCollection('COPERNICUS/S2_SR')
                  .filterDate('2019-11-15', '2019-11-20')
                  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE',100))
                  .filterBounds(batas)
                  .map(maskS2clouds); 
//VISUALISASI BAND SENTINEL 2
var visualization = {
  min: 0,
  max: 0.3,
  bands: ['B4', 'B3', 'B2']};
Map.centerObject(batas, 13);
//VISUALISASI RGB CITRA
//Map.addLayer(pre2018.mean(), visualization, 'pre2018');
//Map.addLayer(post2018.mean(), visualization, 'post2018');
//Map.addLayer(pre2019.mean(), visualization, 'pre2019');
//Map.addLayer(post2019.mean(), visualization, 'post2019');
//KOMBINASI BAND NBR
var NBR2018A = pre2018.median().normalizedDifference(['B8', 'B11']);
var NBR2018B = post2018.median().normalizedDifference(['B8', 'B11']);
var NBR2019A = pre2019.median().normalizedDifference(['B8', 'B11']);
var NBR2019B = post2019.median().normalizedDifference(['B8', 'B11']);
var grey = ['white', 'black'];
// Delta NBR / dNBR
var dNBR2018_unscaled = NBR2018A.subtract(NBR2018B);
//Map.addLayer(dNBR2018_unscaled, {min: -1, max: 1, palette: grey}, 'dNBR');
var dNBR2019_unscaled = NBR2019A.subtract(NBR2019B);
//Map.addLayer(dNBR2019_unscaled, {min: -1, max: 1, palette: grey}, 'dNBR 2019');
// Skala produk sesuai standart USGS
var dNBR2018 = dNBR2018_unscaled.multiply(1000);
var dNBR2019 = dNBR2019_unscaled.multiply(1000);
// Definisikan palet untuk mewarnai klasifikasi.
var palette = [
  'e63400', // fire2 (0)
  'ffed49', //  fire1 (1)
  'e4e4e4', // unburned (2)
  '4fa71d' // regrowth (3)
]; 
// Tampilkan hasil klasifikasi dan citra asupan.
var sampel2018 = dNBR2018.reduceRegions({
  collection: (sampel2018),
  reducer: ee.Reducer.mean().setOutputs(['sample 2018']),
  scale: 20
  });
print('sampel 2018', sampel2018);
var sampel2019 = dNBR2019.reduceRegions({
  collection: (sampel2019),
  reducer: ee.Reducer.mean().setOutputs(['sample 2019']),
  scale: 20
  });
print('sampel 2019', sampel2019);
//MENAMPILKAN GRAFIK TIAP KELOMPOK SAMPEL
var graf2018 = ui.Chart.feature.byFeature({
  features: sampel2018,
  yProperties: ['sample 2018']}) 
  .setChartType('ColumnChart')
  .setOptions({
      interpolateNulls: false,
      lineWidth: 1,
      pointSize: 3,
      title: 'DIGITAL NUMBER OF SAMPLE POINT',
      vAxis: {title: 'DN'},
      hAxis: {title: 'sample point'}
    });
print(graf2018);
//MENAMPILKAN GRAFIK TIAP KELOMPOK SAMPEL
var graf2019 = ui.Chart.feature.byFeature({
  features: sampel2019,
  yProperties: ['sample 2019']}) 
  .setChartType('ColumnChart')
  .setOptions({
      interpolateNulls: false,
      lineWidth: 1,
      pointSize: 3,
      title: 'DIGITAL NUMBER OF SAMPLE POINT',
      vAxis: {title: 'DN'},
      hAxis: {title: 'sample point'}
    });
print(graf2019);
var areaImage2018 = ee.Image.pixelArea().addBands(RF2018).reduce('sum');
var areas2018 = areaImage2018.reduceRegion({
      reducer: ee.Reducer.count(),
    geometry: batas,
    scale: 10,
    bestEffort:true
    }); 
var areaImage2019 = ee.Image.pixelArea().addBands(RF2019).reduce('sum');
var areas2019 = areaImage2019.reduceRegion({
      reducer: ee.Reducer.count(),
    geometry: batas,
    scale: 10,
    bestEffort:true
    }); 
// Memisahkan hasil dalam 2 kelas klasifikasi
var classified2_2018 = RF2018.reduce('sum').toInt();
var classified2_2019 = RF2019.reduce('sum').toInt();
//Menghitung luasan area Berdasarkan Pixel
var pixstats2018 = RF2018.reduceRegion({
  reducer: ee.Reducer.count(),                  // menghitung pixel di satu lapisan
  geometry: batas,
  scale: 10,
  bestEffort:true,
  });
var pixstats2019 = RF2019.reduceRegion({
  reducer: ee.Reducer.count(),                  // menghitung pixel di satu lapisan
  geometry: batas,
  scale: 10,
  bestEffort:true,
  });
var allpixels2018 = ee.Number(areas2018.get('sum')); // extract jumlah pixel menjadi angka
var allpixels2019 = ee.Number(areas2019.get('sum')); // extract jumlah pixel menjadi angka
print(allpixels2018,'total piksel');
print(allpixels2019,'total piksel');
// Membuat daftar kosong untuk menyimpan suatu nilai area
var arealist2018 = [];
var arealist2019 = [];
//print('Jumlah Pixel Tahun 2020', allpixels2020);
// Menghitung luas wilayah klasifikasi
var areacount2018 = function(cnr, name) {
 var singleMask2018 =  areaImage2018.updateMask(classified2_2018.eq(cnr));  // menutupi satu kelas
 var stats2018 = singleMask2018.reduceRegion({
  reducer: ee.Reducer.count(),               // menghitung jumlah pixel dalam satu kelas
  geometry: batas,
  scale: 10,
  bestEffort:true,
  });
var pix2018 =  ee.Number(stats2018.get('sum'));
var hect2018 = pix2018.multiply(100).divide(10000);                // Landsat pixel = 30m x 30m --> 900 sqm
var perc2018 = pix2018.divide(allpixels2018).multiply(10000).round().divide(100);   // membentuk presentase area berdasarkan kelas klasifikasi dan dalam bentuk desimal 2 dibelakang koma
var loss2018 = hect2018.multiply(150000);
arealist2018.push({Class: name, Pixels: pix2018, Hectares: hect2018, Percentage: perc2018, Loss: loss2018});
};
var areacount2019 = function(cnr, name) {
 var singleMask2019 =  areaImage2019.updateMask(classified2_2019.eq(cnr));  // menutupi satu kelas
 var stats2019 = singleMask2019.reduceRegion({
  reducer: ee.Reducer.count(),               // menghitung jumlah pixel dalam satu kelas
  geometry: batas,
  scale: 20,
  bestEffort:true,
  });
var pix2019 =  ee.Number(stats2019.get('sum'));
var hect2019 = pix2019.multiply(100).divide(10000);                // Landsat pixel = 30m x 30m --> 900 sqm
var perc2019 = pix2019.divide(allpixels2019).multiply(10000).round().divide(100);   // membentuk presentase area berdasarkan kelas klasifikasi dan dalam bentuk desimal 2 dibelakang koma
var loss2019 = hect2019.multiply(150000);
arealist2019.push({Class: name, Pixels: pix2019, Hectares: hect2019, Percentage: perc2019, Loss: loss2019});
};
// Jenis Klasifikasi
var names2019 = ['High Severity','Low Severity', 'Unburned','Regrowth'];
// Menjalankan fungsi di setiap kelas
for (var i = 0; i < 4; i++) {
  areacount2018(i, names2019[i]);
  }
for (var i = 0; i < 4; i++) {
  areacount2019(i, names2019[i]);
  }
print('Hasil Perhitungan Luas Tahun 2018', arealist2018);
print('Hasil Perhitungan Luas Tahun 2019', arealist2019);
//var shphotspot = ee.FeatureCollection(hotspot);
var shphotspot = ee.FeatureCollection(hotspot);
//Map.addLayer(hotspot, {},'HOTSPOT 2018');
var hotspot2018 = dNBR2018.reduceRegions({
  collection: (shphotspot),
  reducer: ee.Reducer.mean().setOutputs(['hotspot 2018']),
  scale: 20
  });
//print('hotspot 2018', hotspot2018);
//MENAMPILKAN GRAFIK HOTSPOT
var grafhotspot = ui.Chart.feature.byFeature({
  features: hotspot2018,
  yProperties: ['hotspot 2018']}) 
  .setChartType('ColumnChart')
  .setOptions({
      interpolateNulls: false,
      lineWidth: 1,
      pointSize: 3,
      title: 'DIGITAL NUMBER OF SAMPLE POINT',
      vAxis: {title: 'DN'},
      hAxis: {title: 'hotspot'}
    });
print(grafhotspot);
var title = ui.Label({
  value: 'Analisis Area Bekas Kebakaran Hutan dan Lahan dengan Normalized Burn Ratio (NBR) Menggunakan Citra Satelit Multitemporal dan Cloud Computing',
  style: {fontSize: '18px',
          fontWeight: 'bold'
  }});
var sidebar = ui.Panel({
  widgets: [title],
  style: {width: '400px'}
});
var lon = ui.Label();
var lat = ui.Label();
// Add the sidebar to the ui.root.
ui.root.add(sidebar);
var dataTable2018 = {
  cols: [{id: 'Class', label: 'Klasifikasi', type: 'string'},
         {id: 'Area', label: 'Area (ha)', type: 'number'}],
  rows: [{c: [{v: 'High Severity'}, {v: 284.88}]},
         {c: [{v: 'Low Severity'}, {v: 1280.78}]},
         {c: [{v: 'Unburned'}, {v: 1212.23}]},
         {c: [{v: 'Regrowth'}, {v: 975.53}]}]
};
var dataTable2019 = {
  cols: [{id: 'Class', label: 'Klasifikasi', type: 'string'},
         {id: 'Area', label: 'Area (ha)', type: 'number'}],
  rows: [{c: [{v: 'High Severity'}, {v: 20.63}]},
         {c: [{v: 'Low Severity'}, {v: 400.74}]},
         {c: [{v: 'Unburned'}, {v: 490.81}]},
         {c: [{v: 'Regrowth'}, {v: 25.95}]}]
};
// Define a dictionary of customization options.
var optionsA = {
  title: 'Luas Area yang Terdampak Kebakaran Tahun 2018',
  vAxis: {title: 'Kelas'},
  legend: {position: 'none'},
  hAxis: {
    title: 'Area (hektar)',
    logScale: true
  }
};
var optionsB = {
  title: 'Luas Area yang Terdampak Kebakaran Tahun 2019',
  vAxis: {title: 'Kelas'},
  legend: {position: 'none'},
  hAxis: {
    title: 'Area (hektar)',
    logScale: true
  }
};
// Make a BarChart from the table and the options.
var chart2018 = new ui.Chart(dataTable2018, 'BarChart', optionsA);
var chart2019 = new ui.Chart(dataTable2019, 'BarChart', optionsA);
sidebar.add(chart2018).add(chart2019);
// Paint all the polygon edges with the same number and width, display.
var empty = ee.Image().byte();
var outline = empty.paint({
  featureCollection: batas,
  color: 1,
  width: 1
});
var text = require('users/gena/packages:text');
var shp = ee.FeatureCollection(batas);
var Scale = Map.getScale()*2;
var labels = shp.map(function(feat){
  feat = ee.Feature(feat);
  var name = ee.String (feat.get("NAMOBJ"));
  var centroid = feat.geometry().centroid();
  var t = text.draw(name, centroid,Scale,{
    fontSize: 10,
    textColor:'black',
    OutlineWidth:0.1,
    OutlineColor:'red'
  });
  return t;
  });
  var Labels_Final = ee.ImageCollection(labels);
var lon = ui.Label();
var lat = ui.Label();
// Add the widgets to a new panel.
Map.style().set('cursor', 'crosshair');
var legendRF = ui.Panel({
  style: {
    position: 'bottom-left',
    padding: '10px 16px'
  }});    
var legendTitleRF = ui.Label({
  value: 'Classification RF',
  style: {fontWeight: 'bold',
    fontSize: '18px',
    margin: '0 0 4px 0',
    padding: '0'
    }});
legendRF.add(legendTitleRF);
var makeRowRF = function(color, name) {
      // Membuat label dengan kotak berwarna
      var colorBoxRF = ui.Label({
        style: {
          backgroundColor: '#' + color,
          // Mengatur tinggi dan lebar kotak
          padding: '8px',
          margin: '0 0 4px 0'
        }});
      // Membuat label dengan isi teks deskripsi
      var descriptionRF = ui.Label({
        value: name,
        style: {margin: '0 0 4px 6px'}
      });
      // kembali mengatur panel
      return ui.Panel({
        widgets: [colorBoxRF, descriptionRF],
        layout: ui.Panel.Layout.Flow('horizontal')
      })};
var paletteRF =['e63400', 'ffed49', 'e4e4e4', '4fa71d'];
var namesRF = ['High Severity','Low Severity','Unburned', 'Regrowth'];
for (var i = 0; i < 4; i++) {
  legendRF.add(makeRowRF(paletteRF[i], namesRF[i]));
  }  
Map.add(legendRF);
// Make UI components.
var label = ui.Label('Click to check coordinate');
var inspector = ui.Panel({
  widgets: [label],
  layout: ui.Panel.Layout.flow('horizontal')
});
var closeButton = ui.Button({
  label: 'Close', 
  onClick: function() {
    inspector.clear();
    inspector.style().set('shown', false);
  }
});
function inspect(coords) {
  inspector.add(ui.Label('Loading...', {color: 'gray'}));
  inspector.style().set('shown', true);
  var point = ee.Geometry.Point(coords.lon, coords.lat);
  inspector.clear();
  inspector.add(ui.Label({
      value: coords.lon.toFixed(3) + ' , ' + coords.lat.toFixed(3),
      style: {stretch: 'vertical'}
    }));
  var dot = ui.Map.Layer(point, {color: 'blue'}, 'Location');
  Map.layers().set(7, dot);
}
// Setup the map.
Map.add(inspector);
Map.onClick(inspect);
// menjalankan algoritma slope terhadap SRTM
var slopeA = ee.Terrain.slope(DEMNASA.clip(batas));
var slopeB = ee.Terrain.slope(DEMNASB.clip(batas));
var slopemosaic = ee.ImageCollection([slopeA, slopeB]).mosaic();
// menampilkan hasil
Map.setCenter(111.2195, -7.6371, 13); // menuju ke Gunung Tumpangpitu
// buat aspect dari Tumpangpitu
var aspectA = ee.Terrain.aspect(DEMNASA.clip(batas));
var aspectB = ee.Terrain.aspect(DEMNASB.clip(batas));
// konversi ke radian, gunakan sin sebagai dasar pembuatan aspect
var sinA = aspectA.divide(180).multiply(Math.PI).sin();
var sinB = aspectB.divide(180).multiply(Math.PI).sin();
var sinmosaic = ee.ImageCollection([sinA, sinB]).mosaic();
// Create a binary layer using logical operations.
var fire2018 = RF2018.lt(1);
var fire2019 = RF2019.lt(1);
var red = ['ff0000'];
// Mask and display the binary layer.
Map.addLayer(RF2018, {min: 0, max: 3, palette: palette}, 'Penutupan Lahan Pra 2018', false);
Map.addLayer(RF2019, {min: 0, max: 3, palette: palette}, 'Penutupan Lahan Pra 2019', false);
Map.addLayer(sinmosaic, {min: -1, max: 1, opacity: 0.4}, 'hillshade');
Map.addLayer(fire2018.selfMask(), {palette: red}, 'fire 2018');
Map.addLayer(fire2019.selfMask(), {palette: red}, 'fire 2019');
Map.addLayer(outline, {palette: '000000'}, 'Batas Desa');
Map.addLayer(Labels_Final,{},"Desa");
var cbrf2018 = ui.Checkbox('Classification RF 2018', false);
var cbrf2019 = ui.Checkbox('Classification RF 2019', false);
var checkbox2018 = ui.Checkbox('Affected Area 2018', true);
var checkbox2019 = ui.Checkbox('Affected Area 2019', true);
cbrf2018.onChange(function(checked) {
  // Shows or hides the first map layer based on the checkbox's value.
  Map.layers().get(0).setShown(checked);
});
cbrf2019.onChange(function(checked) {
  // Shows or hides the first map layer based on the checkbox's value.
  Map.layers().get(1).setShown(checked);
});
checkbox2018.onChange(function(checked) {
  // Shows or hides the first map layer based on the checkbox's value.
  Map.layers().get(3).setShown(checked);
});
checkbox2019.onChange(function(checked) {
  // Shows or hides the first map layer based on the checkbox's value.
  Map.layers().get(4).setShown(checked);
});
//var checkbox2018 = ui.Label();
//var checkbox2019 = ui.Label();
//print(checkbox2019);
var cb = ui.Panel({
  widgets: [cbrf2018, cbrf2019, checkbox2018, checkbox2019],
  style: {position: 'bottom-left', padding: '10px 16px'}
});
Map.add(cb);