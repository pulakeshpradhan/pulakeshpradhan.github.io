var geometry = ui.import && ui.import("geometry", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            -113.98125527891483,
            46.84845445068015
          ]
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#98ff00",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Point([-113.98125527891483, 46.84845445068015]),
    sentinelPoly = ui.import && ui.import("sentinelPoly", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -113.98575222989051,
                46.848010742564746
              ],
              [
                -113.98572004338233,
                46.8479006748889
              ],
              [
                -113.98555911084144,
                46.847790606987516
              ],
              [
                -113.98533380528418,
                46.847533781007186
              ],
              [
                -113.9850655843827,
                46.847445726102684
              ],
              [
                -113.98474371930091,
                46.84728429173616
              ],
              [
                -113.98467934628455,
                46.84712285688449
              ],
              [
                -113.98409998913733,
                46.846733943658606
              ],
              [
                -113.98315585156409,
                46.84660185928098
              ],
              [
                -113.98322022458045,
                46.84623495652783
              ],
              [
                -113.982597952089,
                46.84598546122426
              ],
              [
                -113.98199713726966,
                46.846014813673065
              ],
              [
                -113.98167527218787,
                46.84576531734703
              ],
              [
                -113.98070967694251,
                46.84536905609447
              ],
              [
                -113.97974408169715,
                46.84492876238561
              ],
              [
                -113.97937930127112,
                46.84561855426097
              ],
              [
                -113.97907889386146,
                46.846469774578544
              ],
              [
                -113.97938813806536,
                46.84692078184133
              ],
              [
                -113.97986020685198,
                46.84737573507366
              ],
              [
                -113.98037519098284,
                46.84764723758605
              ],
              [
                -113.98041810632708,
                46.84789672517129
              ],
              [
                -113.98087944627764,
                46.84802880636493
              ],
              [
                -113.98142661691668,
                46.848226927546456
              ],
              [
                -113.98175921083453,
                46.848050819865634
              ],
              [
                -113.98233856798174,
                46.848226927546456
              ],
              [
                -113.98304667116167,
                46.84841037243332
              ],
              [
                -113.98357238412859,
                46.84858647893527
              ],
              [
                -113.98422684312823,
                46.84871855843284
              ],
              [
                -113.98449506402972,
                46.848417710215756
              ],
              [
                -113.98477401376726,
                46.84807283335733
              ],
              [
                -113.98518170953753,
                46.847977441494905
              ],
              [
                -113.98565377832415,
                46.84807283335733
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#0b4a8b",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-113.98575222989051, 46.848010742564746],
          [-113.98572004338233, 46.8479006748889],
          [-113.98555911084144, 46.847790606987516],
          [-113.98533380528418, 46.847533781007186],
          [-113.9850655843827, 46.847445726102684],
          [-113.98474371930091, 46.84728429173616],
          [-113.98467934628455, 46.84712285688449],
          [-113.98409998913733, 46.846733943658606],
          [-113.98315585156409, 46.84660185928098],
          [-113.98322022458045, 46.84623495652783],
          [-113.982597952089, 46.84598546122426],
          [-113.98199713726966, 46.846014813673065],
          [-113.98167527218787, 46.84576531734703],
          [-113.98070967694251, 46.84536905609447],
          [-113.97974408169715, 46.84492876238561],
          [-113.97937930127112, 46.84561855426097],
          [-113.97907889386146, 46.846469774578544],
          [-113.97938813806536, 46.84692078184133],
          [-113.97986020685198, 46.84737573507366],
          [-113.98037519098284, 46.84764723758605],
          [-113.98041810632708, 46.84789672517129],
          [-113.98087944627764, 46.84802880636493],
          [-113.98142661691668, 46.848226927546456],
          [-113.98175921083453, 46.848050819865634],
          [-113.98233856798174, 46.848226927546456],
          [-113.98304667116167, 46.84841037243332],
          [-113.98357238412859, 46.84858647893527],
          [-113.98422684312823, 46.84871855843284],
          [-113.98449506402972, 46.848417710215756],
          [-113.98477401376726, 46.84807283335733],
          [-113.98518170953753, 46.847977441494905],
          [-113.98565377832415, 46.84807283335733]]]),
    geometry3 = ui.import && ui.import("geometry3", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            -113.77940829493565,
            46.591114477825194
          ]
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#d63000",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Point([-113.77940829493565, 46.591114477825194]),
    geometry4 = ui.import && ui.import("geometry4", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            -110.93002182524647,
            45.733787300675154
          ]
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#98ff00",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Point([-110.93002182524647, 45.733787300675154]),
    cinnabarPoly = ui.import && ui.import("cinnabarPoly", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -113.80069430567784,
                46.599666318413476
              ],
              [
                -113.80017932154698,
                46.598368884619696
              ],
              [
                -113.79966433741612,
                46.59659960665212
              ],
              [
                -113.80138095118565,
                46.59518414268388
              ],
              [
                -113.80395587183995,
                46.59447639683498
              ],
              [
                -113.80361254908604,
                46.59282495390847
              ],
              [
                -113.79932101466221,
                46.59140939134609
              ],
              [
                -113.79657443263096,
                46.5922351406674
              ],
              [
                -113.79125292994541,
                46.594358438294876
              ],
              [
                -113.79365618922276,
                46.590465662430596
              ],
              [
                -113.79125292994541,
                46.58916800834068
              ],
              [
                -113.7876480410294,
                46.5877523502645
              ],
              [
                -113.77889331080479,
                46.58680855767304
              ],
              [
                -113.77786334254307,
                46.58515688109704
              ],
              [
                -113.77769168116612,
                46.58279725583287
              ],
              [
                -113.7766617129044,
                46.581145457038815
              ],
              [
                -113.77305682398838,
                46.58303322298096
              ],
              [
                -113.7660187075333,
                46.58433102393716
              ],
              [
                -113.76035388209385,
                46.58763437708925
              ],
              [
                -113.76001055933995,
                46.592353103829126
              ],
              [
                -113.7576073000626,
                46.59553801214212
              ],
              [
                -113.76258547999424,
                46.60013810481774
              ],
              [
                -113.76550372340245,
                46.60060988711395
              ],
              [
                -113.77219851710362,
                46.60096372114021
              ],
              [
                -113.77820666529698,
                46.599666318413476
              ],
              [
                -113.78078158595127,
                46.60049194192502
              ],
              [
                -113.78129657008213,
                46.601907267246474
              ],
              [
                -113.77906497218174,
                46.6037943101627
              ],
              [
                -113.78095324732823,
                46.60520954921575
              ],
              [
                -113.78610308863682,
                46.60332255559566
              ],
              [
                -113.79193957545323,
                46.6029687369745
              ],
              [
                -113.79726107813877,
                46.6021431512055
              ],
              [
                -113.80069430567784,
                46.60096372114021
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#d63000",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-113.80069430567784, 46.599666318413476],
          [-113.80017932154698, 46.598368884619696],
          [-113.79966433741612, 46.59659960665212],
          [-113.80138095118565, 46.59518414268388],
          [-113.80395587183995, 46.59447639683498],
          [-113.80361254908604, 46.59282495390847],
          [-113.79932101466221, 46.59140939134609],
          [-113.79657443263096, 46.5922351406674],
          [-113.79125292994541, 46.594358438294876],
          [-113.79365618922276, 46.590465662430596],
          [-113.79125292994541, 46.58916800834068],
          [-113.7876480410294, 46.5877523502645],
          [-113.77889331080479, 46.58680855767304],
          [-113.77786334254307, 46.58515688109704],
          [-113.77769168116612, 46.58279725583287],
          [-113.7766617129044, 46.581145457038815],
          [-113.77305682398838, 46.58303322298096],
          [-113.7660187075333, 46.58433102393716],
          [-113.76035388209385, 46.58763437708925],
          [-113.76001055933995, 46.592353103829126],
          [-113.7576073000626, 46.59553801214212],
          [-113.76258547999424, 46.60013810481774],
          [-113.76550372340245, 46.60060988711395],
          [-113.77219851710362, 46.60096372114021],
          [-113.77820666529698, 46.599666318413476],
          [-113.78078158595127, 46.60049194192502],
          [-113.78129657008213, 46.601907267246474],
          [-113.77906497218174, 46.6037943101627],
          [-113.78095324732823, 46.60520954921575],
          [-113.78610308863682, 46.60332255559566],
          [-113.79193957545323, 46.6029687369745],
          [-113.79726107813877, 46.6021431512055],
          [-113.80069430567784, 46.60096372114021]]]),
    bridgerPoly = ui.import && ui.import("bridgerPoly", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -110.97396713774647,
                45.713054860136836
              ],
              [
                -110.9698472646996,
                45.70993833697447
              ],
              [
                -110.95920443641249,
                45.70742117257894
              ],
              [
                -110.95714432280506,
                45.713054860136836
              ],
              [
                -110.94924789946522,
                45.7188079847968
              ],
              [
                -110.95062119048085,
                45.71593149650392
              ],
              [
                -110.95439774077381,
                45.708499883055765
              ],
              [
                -110.9478746084496,
                45.70826013713694
              ],
              [
                -110.94341141264881,
                45.707061392118284
              ],
              [
                -110.93414169829335,
                45.711376753874404
              ],
              [
                -110.92830521147694,
                45.70418429918675
              ],
              [
                -110.92315537016835,
                45.707061392118284
              ],
              [
                -110.91354233305897,
                45.71377403311059
              ],
              [
                -110.90804916899647,
                45.71641092150232
              ],
              [
                -110.91045242827381,
                45.721684325015815
              ],
              [
                -110.90804916899647,
                45.72575888685324
              ],
              [
                -110.90324265044178,
                45.72575888685324
              ],
              [
                -110.90186935942616,
                45.72072556139543
              ],
              [
                -110.89603287260975,
                45.72216370065628
              ],
              [
                -110.87612015288319,
                45.71928738511618
              ],
              [
                -110.86959702055897,
                45.72048586791963
              ],
              [
                -110.87474686186756,
                45.72480019315634
              ],
              [
                -110.88950974028553,
                45.728155549115655
              ],
              [
                -110.91113907378163,
                45.72887452774285
              ],
              [
                -110.90736252348866,
                45.732469282061025
              ],
              [
                -110.90221268218006,
                45.73486565640502
              ],
              [
                -110.89431625884022,
                45.736303431654164
              ],
              [
                -110.88916641753163,
                45.73798078932501
              ],
              [
                -110.88573318999256,
                45.74373134739364
              ],
              [
                -110.88092667143788,
                45.74852302667958
              ],
              [
                -110.87886673491444,
                45.752116516224866
              ],
              [
                -110.88676315825428,
                45.752116516224866
              ],
              [
                -110.88916641753163,
                45.74780430100746
              ],
              [
                -110.89122635405506,
                45.744450125507306
              ],
              [
                -110.89706284087147,
                45.74397094112646
              ],
              [
                -110.88985306303944,
                45.75427249889995
              ],
              [
                -110.88538986723866,
                45.76026090265497
              ],
              [
                -110.88332993071522,
                45.767685630788804
              ],
              [
                -110.88641983550038,
                45.77223578219596
              ],
              [
                -110.89122635405506,
                45.7705594538111
              ],
              [
                -110.89500290434803,
                45.76624866375245
              ],
              [
                -110.90633255522694,
                45.76696715189774
              ],
              [
                -110.91113907378163,
                45.762656084212665
              ],
              [
                -110.91766220610585,
                45.75642839828613
              ],
              [
                -110.92178207915272,
                45.751637397652914
              ],
              [
                -110.92658859770741,
                45.749960450260765
              ],
              [
                -110.92899185698475,
                45.75355384726258
              ],
              [
                -110.92761856596913,
                45.75978185400441
              ],
              [
                -110.92967850249256,
                45.7631351081852
              ],
              [
                -110.93963486235585,
                45.76409314379128
              ],
              [
                -110.94409805815663,
                45.76145850628695
              ],
              [
                -110.95027786772694,
                45.75882374436424
              ],
              [
                -110.95233780425038,
                45.75259563068381
              ],
              [
                -110.95165115874256,
                45.74924174309735
              ],
              [
                -110.95680100005116,
                45.740137318009
              ],
              [
                -110.96023422759022,
                45.736782681844346
              ],
              [
                -110.96401077788319,
                45.73222963897111
              ],
              [
                -110.9643541006371,
                45.72863486922873
              ],
              [
                -110.964697423391,
                45.72623822753199
              ],
              [
                -110.96538406889881,
                45.72144463565316
              ],
              [
                -110.97087723296131,
                45.72096525384295
              ],
              [
                -110.97259384673085,
                45.71593149650392
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#98ff00",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-110.97396713774647, 45.713054860136836],
          [-110.9698472646996, 45.70993833697447],
          [-110.95920443641249, 45.70742117257894],
          [-110.95714432280506, 45.713054860136836],
          [-110.94924789946522, 45.7188079847968],
          [-110.95062119048085, 45.71593149650392],
          [-110.95439774077381, 45.708499883055765],
          [-110.9478746084496, 45.70826013713694],
          [-110.94341141264881, 45.707061392118284],
          [-110.93414169829335, 45.711376753874404],
          [-110.92830521147694, 45.70418429918675],
          [-110.92315537016835, 45.707061392118284],
          [-110.91354233305897, 45.71377403311059],
          [-110.90804916899647, 45.71641092150232],
          [-110.91045242827381, 45.721684325015815],
          [-110.90804916899647, 45.72575888685324],
          [-110.90324265044178, 45.72575888685324],
          [-110.90186935942616, 45.72072556139543],
          [-110.89603287260975, 45.72216370065628],
          [-110.87612015288319, 45.71928738511618],
          [-110.86959702055897, 45.72048586791963],
          [-110.87474686186756, 45.72480019315634],
          [-110.88950974028553, 45.728155549115655],
          [-110.91113907378163, 45.72887452774285],
          [-110.90736252348866, 45.732469282061025],
          [-110.90221268218006, 45.73486565640502],
          [-110.89431625884022, 45.736303431654164],
          [-110.88916641753163, 45.73798078932501],
          [-110.88573318999256, 45.74373134739364],
          [-110.88092667143788, 45.74852302667958],
          [-110.87886673491444, 45.752116516224866],
          [-110.88676315825428, 45.752116516224866],
          [-110.88916641753163, 45.74780430100746],
          [-110.89122635405506, 45.744450125507306],
          [-110.89706284087147, 45.74397094112646],
          [-110.88985306303944, 45.75427249889995],
          [-110.88538986723866, 45.76026090265497],
          [-110.88332993071522, 45.767685630788804],
          [-110.88641983550038, 45.77223578219596],
          [-110.89122635405506, 45.7705594538111],
          [-110.89500290434803, 45.76624866375245],
          [-110.90633255522694, 45.76696715189774],
          [-110.91113907378163, 45.762656084212665],
          [-110.91766220610585, 45.75642839828613],
          [-110.92178207915272, 45.751637397652914],
          [-110.92658859770741, 45.749960450260765],
          [-110.92899185698475, 45.75355384726258],
          [-110.92761856596913, 45.75978185400441],
          [-110.92967850249256, 45.7631351081852],
          [-110.93963486235585, 45.76409314379128],
          [-110.94409805815663, 45.76145850628695],
          [-110.95027786772694, 45.75882374436424],
          [-110.95233780425038, 45.75259563068381],
          [-110.95165115874256, 45.74924174309735],
          [-110.95680100005116, 45.740137318009],
          [-110.96023422759022, 45.736782681844346],
          [-110.96401077788319, 45.73222963897111],
          [-110.9643541006371, 45.72863486922873],
          [-110.964697423391, 45.72623822753199],
          [-110.96538406889881, 45.72144463565316],
          [-110.97087723296131, 45.72096525384295],
          [-110.97259384673085, 45.71593149650392]]]),
    geometry2 = ui.import && ui.import("geometry2", "geometry", {
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            -114.2901999289338,
            46.63913303053384
          ]
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#d63000",
      "mode": "Geometry",
      "shown": true,
      "locked": false
    }) || /* color: #d63000 */ee.Geometry.Point([-114.2901999289338, 46.63913303053384]);
var sprg = ee.Geometry.Point([-113.8356, 48.586296]);
var alsp = ee.Geometry.Point([-112.4811727, 47.13032317])
var rgb = {min: 0, max: 1500, bands: ['B4','B3','B2']}
var alsp_pre = ee.ImageCollection("COPERNICUS/S2")
.filterDate('2017-07-15','2017-07-20')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 20)
.filterBounds(alsp)
var alsp_post = ee.ImageCollection("COPERNICUS/S2")
.filterDate('2018-07-20','2018-07-22')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 20)
.filterBounds(alsp)
var sprg_pre = ee.ImageCollection("COPERNICUS/S2")
.filterDate('2017-07-01','2017-07-30')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 20)
.filterBounds(sprg)
// print(sprg_pre)
// Map.addLayer(pre.median(), rgb)
var sprg_post = ee.ImageCollection("COPERNICUS/S2")
.filterDate('2018-07-01','2018-07-15')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 20)
.filterBounds(sprg)
// print(post)
// Map.addLayer(post.median(), rgb)
var sent_pre = ee.ImageCollection("COPERNICUS/S2_SR")
.filterDate('2020-08-15','2020-08-20')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 20)
.filterBounds(geometry)
var sent_post = ee.ImageCollection("COPERNICUS/S2_SR")
.filterDate('2020-08-21','2020-09-02')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 20)
.filterBounds(geometry)
// print(col);
// Map.centerObject(geometry,14)
// Map.addLayer(sent_before.median(), rgb)
// Map.addLayer(sent_after.median(), rgb)
// // print('Sentinel fire area (ac): ', sentinelPoly.area().divide(4047))
// /* ==== cinnabar fire */
var cin_pre = ee.ImageCollection("COPERNICUS/S2_SR")
.filterDate('2020-08-11','2020-08-12')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 15)
.filterBounds(geometry3)
var cin_post = ee.ImageCollection("COPERNICUS/S2_SR")
.filterDate('2020-08-26','2020-08-27')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 15)
.filterBounds(geometry3)
// print(col2_bef)
// print(col2_aft)
// // Map.centerObject(geometry3,13)
// Map.addLayer(col2_bef.median(), rgb, 'before')
// Map.addLayer(col2_aft.median(), rgb, 'after')
// print('Cinnabar fire area (ac): ', cinnabarPoly.area().divide(4047))
/* ==== bridger foothills fire */
var bri_pre = ee.ImageCollection("COPERNICUS/S2_SR")
.filterDate('2020-08-05','2020-09-11')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 40)
.filterBounds(geometry4)
var bri_post = ee.ImageCollection("COPERNICUS/S2_SR")
.filterDate('2020-09-09','2020-09-10')
.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 40)
.filterBounds(geometry4)
// print(col3_bef)  
// print(col3_aft)
// Map.centerObject(geometry4,12)
// Map.addLayer(col3_bef.median(), rgb, 'before')
// Map.addLayer(col3_aft.median(), rgb, 'after')
// print('Bridger fire area (ac): ', bridgerPoly.area().divide(4047))
var fires = {
  'Sentinel Fire 2020': {
    geo: ee.Geometry.Point([-113.98, 46.85]),
    pre: ee.Image(sent_pre.median().visualize(rgb)),
    post: ee.Image(sent_post.median().visualize(rgb))
  },
  'Cinnabar Fire 2020': {
    geo: ee.Geometry.Point([-113.78, 46.59]),
    pre: ee.Image(cin_pre.median().visualize(rgb)),
    post: ee.Image(cin_post.median().visualize(rgb))
  },
  'Bridger Foothills Fire 2020': {
    geo: ee.Geometry.Point([-110.93, 45.73]),
    pre: ee.Image(bri_pre.median().visualize(rgb)),
    post: ee.Image(bri_post.median().visualize(rgb))
  },
  'Sprague Creek Fire 2017': {
    geo: sprg,
    pre: ee.Image(sprg_pre.median().visualize(rgb)),
    post: ee.Image(sprg_post.median().visualize(rgb))
  },
  'Alice Springs Fire 2017': {
    geo: alsp,
    pre: ee.Image(alsp_pre.median().visualize(rgb)),
    post: ee.Image(alsp_post.median().visualize(rgb))
  }
};
var select = ui.Select({
  items: Object.keys(fires),
  onChange: function(key) {
    leftMap.centerObject(fires[key].geo, 13)
    leftMap.addLayer(fires[key].pre)
    rightMap.addLayer(fires[key].post);
  }
});
// Set a place holder.
select.setPlaceholder('Choose a fire from the list to explore...');
// /*
// * Set up the maps and control widgets
// */
// Create the left map, and have it display layer 0.
var leftMap = ui.Map();
leftMap.setControlVisibility(false);
// var leftSelector = addLayerSelector(leftMap, 0, 'top-left');
// Create the right map, and have it display layer 1.
var rightMap = ui.Map();
rightMap.setControlVisibility(false);
// var rightSelector = addLayerSelector(rightMap, 1, 'top-right');
var introPanel = ui.Panel([ui.Label({
      value: 'WILDFIRE EXPLORER',
      style: {fontWeight: 'bold', fontSize: '24px', margin: '10px 5px'}
    }),
    ui.Label('Swipe between pre-fire and post fire imagery')
  ])
introPanel.style().set({width: '400px', position: 'top-right'});
var controlPanel =
    ui.Panel({widgets: [select], style: {position: 'top-right'}});
/*
* Tie everything together
*/
// Create a SplitPanel to hold the adjacent, linked maps.
var splitPanel = ui.SplitPanel({
  firstPanel: leftMap,
  secondPanel: rightMap,
  wipe: true,
  style: {stretch: 'both'}
});
// Set the SplitPanel as the only thing in the UI root.
ui.root.widgets().reset([splitPanel]);
var linker = ui.Map.Linker([leftMap, rightMap]);
rightMap.add(introPanel).add(controlPanel);