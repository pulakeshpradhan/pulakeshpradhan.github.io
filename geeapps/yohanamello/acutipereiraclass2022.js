var roi = ui.import && ui.import("roi", "table", {
      "id": "users/yohanamello/Acuti_limite_imovel"
    }) || ee.FeatureCollection("users/yohanamello/Acuti_limite_imovel"),
    no_forest = ui.import && ui.import("no_forest", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.575923102517116,
                -1.9140327153527106
              ],
              [
                -50.575923102517116,
                -1.917292458674546
              ],
              [
                -50.57283319773196,
                -1.917292458674546
              ],
              [
                -50.57283319773196,
                -1.9140327153527106
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.569526270697594,
                -2.056570890991389
              ],
              [
                -50.569526270697594,
                -2.05880104992012
              ],
              [
                -50.566779688666344,
                -2.05880104992012
              ],
              [
                -50.566779688666344,
                -2.056570890991389
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.6216503549556,
                -2.137284623360785
              ],
              [
                -50.6216503549556,
                -2.13917158374356
              ],
              [
                -50.61959041843216,
                -2.13917158374356
              ],
              [
                -50.61959041843216,
                -2.137284623360785
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.64739956149857,
                -2.1076075790494184
              ],
              [
                -50.64739956149857,
                -2.108808395345914
              ],
              [
                -50.64602627048294,
                -2.108808395345914
              ],
              [
                -50.64602627048294,
                -2.1076075790494184
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.674178736303254,
                -2.075356739461833
              ],
              [
                -50.674178736303254,
                -2.0772437748905337
              ],
              [
                -50.671947138402864,
                -2.0772437748905337
              ],
              [
                -50.671947138402864,
                -2.075356739461833
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.58542980441849,
                -2.0500027123378857
              ],
              [
                -50.58542980441849,
                -2.051375123843997
              ],
              [
                -50.58388485202591,
                -2.051375123843997
              ],
              [
                -50.58388485202591,
                -2.0500027123378857
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.6079583237136,
                -1.95157629617524
              ],
              [
                -50.6079583237136,
                -1.9558653358869207
              ],
              [
                -50.60383845066673,
                -1.9558653358869207
              ],
              [
                -50.60383845066673,
                -1.95157629617524
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.57398809038673,
                -2.1579223180146885
              ],
              [
                -50.57398809038673,
                -2.1587800159795174
              ],
              [
                -50.5726147993711,
                -2.1587800159795174
              ],
              [
                -50.5726147993711,
                -2.1579223180146885
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.530386100640634,
                -2.180994224112904
              ],
              [
                -50.530386100640634,
                -2.1818519089915185
              ],
              [
                -50.52969945513282,
                -2.1818519089915185
              ],
              [
                -50.52969945513282,
                -2.180994224112904
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.589780937066415,
                -2.163754654625138
              ],
              [
                -50.589780937066415,
                -2.1659846597573966
              ],
              [
                -50.58772100054298,
                -2.1659846597573966
              ],
              [
                -50.58772100054298,
                -2.163754654625138
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.52923344512448,
                -2.11419539812805
              ],
              [
                -50.52923344512448,
                -2.115396209334055
              ],
              [
                -50.527945984797334,
                -2.115396209334055
              ],
              [
                -50.527945984797334,
                -2.11419539812805
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.57257794280515,
                -2.1069905114000793
              ],
              [
                -50.57257794280515,
                -2.1080197829760765
              ],
              [
                -50.57146214385495,
                -2.1080197829760765
              ],
              [
                -50.57146214385495,
                -2.1069905114000793
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.5851950540112,
                -2.096183118845006
              ],
              [
                -50.5851950540112,
                -2.097727036644345
              ],
              [
                -50.58390759368405,
                -2.097727036644345
              ],
              [
                -50.58390759368405,
                -2.096183118845006
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.668608942512975,
                -2.0405134840242725
              ],
              [
                -50.668608942512975,
                -2.041328358318514
              ],
              [
                -50.667106905464635,
                -2.041328358318514
              ],
              [
                -50.667106905464635,
                -2.0405134840242725
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.69871416315567,
                -2.0367964372629785
              ],
              [
                -50.69871416315567,
                -2.037697089855024
              ],
              [
                -50.697083380074616,
                -2.037697089855024
              ],
              [
                -50.697083380074616,
                -2.0367964372629785
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.70425024256241,
                -2.036882213722015
              ],
              [
                -50.70425024256241,
                -2.037825754469923
              ],
              [
                -50.70315590128433,
                -2.037825754469923
              ],
              [
                -50.70315590128433,
                -2.036882213722015
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.69532385096085,
                -2.0353382367608224
              ],
              [
                -50.69532385096085,
                -2.036388999020208
              ],
              [
                -50.694336798043366,
                -2.036388999020208
              ],
              [
                -50.694336798043366,
                -2.0353382367608224
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.63398991817912,
                -2.0693129683167437
              ],
              [
                -50.63398991817912,
                -2.070470926563426
              ],
              [
                -50.63276683086833,
                -2.070470926563426
              ],
              [
                -50.63276683086833,
                -2.0693129683167437
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.65387006416887,
                -2.05069974597572
              ],
              [
                -50.65387006416887,
                -2.0522437081646228
              ],
              [
                -50.65232511177629,
                -2.0522437081646228
              ],
              [
                -50.65232511177629,
                -2.05069974597572
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.61301465645403,
                -1.8666791880129776
              ],
              [
                -50.61301465645403,
                -1.869939020331084
              ],
              [
                -50.60923810616106,
                -1.869939020331084
              ],
              [
                -50.60923810616106,
                -1.8666791880129776
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        }
      ],
      "displayProperties": [
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        }
      ],
      "properties": {
        "landcover": 1
      },
      "color": "#d63000",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.575923102517116, -1.9140327153527106],
                  [-50.575923102517116, -1.917292458674546],
                  [-50.57283319773196, -1.917292458674546],
                  [-50.57283319773196, -1.9140327153527106]]], null, false),
            {
              "landcover": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.569526270697594, -2.056570890991389],
                  [-50.569526270697594, -2.05880104992012],
                  [-50.566779688666344, -2.05880104992012],
                  [-50.566779688666344, -2.056570890991389]]], null, false),
            {
              "landcover": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.6216503549556, -2.137284623360785],
                  [-50.6216503549556, -2.13917158374356],
                  [-50.61959041843216, -2.13917158374356],
                  [-50.61959041843216, -2.137284623360785]]], null, false),
            {
              "landcover": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.64739956149857, -2.1076075790494184],
                  [-50.64739956149857, -2.108808395345914],
                  [-50.64602627048294, -2.108808395345914],
                  [-50.64602627048294, -2.1076075790494184]]], null, false),
            {
              "landcover": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.674178736303254, -2.075356739461833],
                  [-50.674178736303254, -2.0772437748905337],
                  [-50.671947138402864, -2.0772437748905337],
                  [-50.671947138402864, -2.075356739461833]]], null, false),
            {
              "landcover": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.58542980441849, -2.0500027123378857],
                  [-50.58542980441849, -2.051375123843997],
                  [-50.58388485202591, -2.051375123843997],
                  [-50.58388485202591, -2.0500027123378857]]], null, false),
            {
              "landcover": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.6079583237136, -1.95157629617524],
                  [-50.6079583237136, -1.9558653358869207],
                  [-50.60383845066673, -1.9558653358869207],
                  [-50.60383845066673, -1.95157629617524]]], null, false),
            {
              "landcover": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.57398809038673, -2.1579223180146885],
                  [-50.57398809038673, -2.1587800159795174],
                  [-50.5726147993711, -2.1587800159795174],
                  [-50.5726147993711, -2.1579223180146885]]], null, false),
            {
              "landcover": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.530386100640634, -2.180994224112904],
                  [-50.530386100640634, -2.1818519089915185],
                  [-50.52969945513282, -2.1818519089915185],
                  [-50.52969945513282, -2.180994224112904]]], null, false),
            {
              "landcover": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.589780937066415, -2.163754654625138],
                  [-50.589780937066415, -2.1659846597573966],
                  [-50.58772100054298, -2.1659846597573966],
                  [-50.58772100054298, -2.163754654625138]]], null, false),
            {
              "landcover": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.52923344512448, -2.11419539812805],
                  [-50.52923344512448, -2.115396209334055],
                  [-50.527945984797334, -2.115396209334055],
                  [-50.527945984797334, -2.11419539812805]]], null, false),
            {
              "landcover": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.57257794280515, -2.1069905114000793],
                  [-50.57257794280515, -2.1080197829760765],
                  [-50.57146214385495, -2.1080197829760765],
                  [-50.57146214385495, -2.1069905114000793]]], null, false),
            {
              "landcover": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.5851950540112, -2.096183118845006],
                  [-50.5851950540112, -2.097727036644345],
                  [-50.58390759368405, -2.097727036644345],
                  [-50.58390759368405, -2.096183118845006]]], null, false),
            {
              "landcover": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.668608942512975, -2.0405134840242725],
                  [-50.668608942512975, -2.041328358318514],
                  [-50.667106905464635, -2.041328358318514],
                  [-50.667106905464635, -2.0405134840242725]]], null, false),
            {
              "landcover": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.69871416315567, -2.0367964372629785],
                  [-50.69871416315567, -2.037697089855024],
                  [-50.697083380074616, -2.037697089855024],
                  [-50.697083380074616, -2.0367964372629785]]], null, false),
            {
              "landcover": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.70425024256241, -2.036882213722015],
                  [-50.70425024256241, -2.037825754469923],
                  [-50.70315590128433, -2.037825754469923],
                  [-50.70315590128433, -2.036882213722015]]], null, false),
            {
              "landcover": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.69532385096085, -2.0353382367608224],
                  [-50.69532385096085, -2.036388999020208],
                  [-50.694336798043366, -2.036388999020208],
                  [-50.694336798043366, -2.0353382367608224]]], null, false),
            {
              "landcover": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.63398991817912, -2.0693129683167437],
                  [-50.63398991817912, -2.070470926563426],
                  [-50.63276683086833, -2.070470926563426],
                  [-50.63276683086833, -2.0693129683167437]]], null, false),
            {
              "landcover": 1,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.65387006416887, -2.05069974597572],
                  [-50.65387006416887, -2.0522437081646228],
                  [-50.65232511177629, -2.0522437081646228],
                  [-50.65232511177629, -2.05069974597572]]], null, false),
            {
              "landcover": 1,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.61301465645403, -1.8666791880129776],
                  [-50.61301465645403, -1.869939020331084],
                  [-50.60923810616106, -1.869939020331084],
                  [-50.60923810616106, -1.8666791880129776]]], null, false),
            {
              "landcover": 1,
              "system:index": "19"
            })]),
    forest = ui.import && ui.import("forest", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.52637014008935,
                -1.9320558100374858
              ],
              [
                -50.52637014008935,
                -1.9344577013866657
              ],
              [
                -50.523966880812004,
                -1.9344577013866657
              ],
              [
                -50.523966880812004,
                -1.9320558100374858
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.56360048017072,
                -1.9595286871215212
              ],
              [
                -50.56360048017072,
                -1.9613300765935298
              ],
              [
                -50.56136888227033,
                -1.9613300765935298
              ],
              [
                -50.56136888227033,
                -1.9595286871215212
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.62759716328657,
                -2.0057268376734347
              ],
              [
                -50.62759716328657,
                -2.007699732850421
              ],
              [
                -50.625279734697706,
                -2.007699732850421
              ],
              [
                -50.625279734697706,
                -2.0057268376734347
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.648539851274855,
                -2.0318031722453997
              ],
              [
                -50.648539851274855,
                -2.0338618123771246
              ],
              [
                -50.64699489888228,
                -2.0338618123771246
              ],
              [
                -50.64699489888228,
                -2.0318031722453997
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.56570351478511,
                -2.032221322647837
              ],
              [
                -50.56570351478511,
                -2.033507972704573
              ],
              [
                -50.56437313911373,
                -2.033507972704573
              ],
              [
                -50.56437313911373,
                -2.032221322647837
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.61123669502193,
                -2.019440543182356
              ],
              [
                -50.61123669502193,
                -2.0212847558365077
              ],
              [
                -50.609820488662066,
                -2.0212847558365077
              ],
              [
                -50.609820488662066,
                -2.019440543182356
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.71841563302986,
                -2.001659019827245
              ],
              [
                -50.71841563302986,
                -2.003631919907018
              ],
              [
                -50.716355696506426,
                -2.003631919907018
              ],
              [
                -50.716355696506426,
                -2.001659019827245
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.599655324365024,
                -2.0663225674005963
              ],
              [
                -50.599655324365024,
                -2.0684669378998026
              ],
              [
                -50.59579294338358,
                -2.0684669378998026
              ],
              [
                -50.59579294338358,
                -2.0663225674005963
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.57802599086893,
                -2.1172976522491287
              ],
              [
                -50.57802599086893,
                -2.121414707126617
              ],
              [
                -50.574678594018344,
                -2.121414707126617
              ],
              [
                -50.574678594018344,
                -2.1172976522491287
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.52807253017557,
                -2.1251028928159768
              ],
              [
                -50.52807253017557,
                -2.12827644089308
              ],
              [
                -50.52481096401346,
                -2.12827644089308
              ],
              [
                -50.52481096401346,
                -2.1251028928159768
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.59329419784877,
                -2.140288260975097
              ],
              [
                -50.59329419784877,
                -2.1423467590636824
              ],
              [
                -50.59123426132533,
                -2.1423467590636824
              ],
              [
                -50.59123426132533,
                -2.140288260975097
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.58758740252073,
                -2.0758276253904935
              ],
              [
                -50.58758740252073,
                -2.07891549945256
              ],
              [
                -50.585012481866436,
                -2.07891549945256
              ],
              [
                -50.585012481866436,
                -2.0758276253904935
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.62635458306236,
                -1.9715796813316062
              ],
              [
                -50.62635458306236,
                -1.9729950487169021
              ],
              [
                -50.62485254601402,
                -1.9729950487169021
              ],
              [
                -50.62485254601402,
                -1.9715796813316062
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.66047228173179,
                -1.9715796813316062
              ],
              [
                -50.66047228173179,
                -1.972909268909645
              ],
              [
                -50.6593564827816,
                -1.972909268909645
              ],
              [
                -50.6593564827816,
                -1.9715796813316062
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.674162276543804,
                -1.9734239476868158
              ],
              [
                -50.674162276543804,
                -1.9745819743529285
              ],
              [
                -50.67308939293785,
                -1.9745819743529285
              ],
              [
                -50.67308939293785,
                -1.9734239476868158
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.67557848290367,
                -1.9619723073110875
              ],
              [
                -50.67557848290367,
                -1.963816584290902
              ],
              [
                -50.674162276543804,
                -1.963816584290902
              ],
              [
                -50.674162276543804,
                -1.9619723073110875
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.652919181145855,
                -1.9695209629865047
              ],
              [
                -50.652919181145855,
                -1.9713652316227575
              ],
              [
                -50.651374228753276,
                -1.9713652316227575
              ],
              [
                -50.651374228753276,
                -1.9695209629865047
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.64345076721311,
                -2.0457048415933787
              ],
              [
                -50.64345076721311,
                -2.0475919121745876
              ],
              [
                -50.64053252380491,
                -2.0475919121745876
              ],
              [
                -50.64053252380491,
                -2.0457048415933787
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.62590833098031,
                -2.0697344608858868
              ],
              [
                -50.62590833098031,
                -2.0723076996005694
              ],
              [
                -50.6235479870472,
                -2.0723076996005694
              ],
              [
                -50.6235479870472,
                -2.0697344608858868
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -50.60407399239601,
                -2.090675363856048
              ],
              [
                -50.60407399239601,
                -2.0919619666502376
              ],
              [
                -50.60265778603615,
                -2.0919619666502376
              ],
              [
                -50.60265778603615,
                -2.090675363856048
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        }
      ],
      "displayProperties": [
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        },
        {
          "type": "rectangle"
        }
      ],
      "properties": {
        "landcover": 0
      },
      "color": "#98ff00",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.52637014008935, -1.9320558100374858],
                  [-50.52637014008935, -1.9344577013866657],
                  [-50.523966880812004, -1.9344577013866657],
                  [-50.523966880812004, -1.9320558100374858]]], null, false),
            {
              "landcover": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.56360048017072, -1.9595286871215212],
                  [-50.56360048017072, -1.9613300765935298],
                  [-50.56136888227033, -1.9613300765935298],
                  [-50.56136888227033, -1.9595286871215212]]], null, false),
            {
              "landcover": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.62759716328657, -2.0057268376734347],
                  [-50.62759716328657, -2.007699732850421],
                  [-50.625279734697706, -2.007699732850421],
                  [-50.625279734697706, -2.0057268376734347]]], null, false),
            {
              "landcover": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.648539851274855, -2.0318031722453997],
                  [-50.648539851274855, -2.0338618123771246],
                  [-50.64699489888228, -2.0338618123771246],
                  [-50.64699489888228, -2.0318031722453997]]], null, false),
            {
              "landcover": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.56570351478511, -2.032221322647837],
                  [-50.56570351478511, -2.033507972704573],
                  [-50.56437313911373, -2.033507972704573],
                  [-50.56437313911373, -2.032221322647837]]], null, false),
            {
              "landcover": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.61123669502193, -2.019440543182356],
                  [-50.61123669502193, -2.0212847558365077],
                  [-50.609820488662066, -2.0212847558365077],
                  [-50.609820488662066, -2.019440543182356]]], null, false),
            {
              "landcover": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.71841563302986, -2.001659019827245],
                  [-50.71841563302986, -2.003631919907018],
                  [-50.716355696506426, -2.003631919907018],
                  [-50.716355696506426, -2.001659019827245]]], null, false),
            {
              "landcover": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.599655324365024, -2.0663225674005963],
                  [-50.599655324365024, -2.0684669378998026],
                  [-50.59579294338358, -2.0684669378998026],
                  [-50.59579294338358, -2.0663225674005963]]], null, false),
            {
              "landcover": 0,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.57802599086893, -2.1172976522491287],
                  [-50.57802599086893, -2.121414707126617],
                  [-50.574678594018344, -2.121414707126617],
                  [-50.574678594018344, -2.1172976522491287]]], null, false),
            {
              "landcover": 0,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.52807253017557, -2.1251028928159768],
                  [-50.52807253017557, -2.12827644089308],
                  [-50.52481096401346, -2.12827644089308],
                  [-50.52481096401346, -2.1251028928159768]]], null, false),
            {
              "landcover": 0,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.59329419784877, -2.140288260975097],
                  [-50.59329419784877, -2.1423467590636824],
                  [-50.59123426132533, -2.1423467590636824],
                  [-50.59123426132533, -2.140288260975097]]], null, false),
            {
              "landcover": 0,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.58758740252073, -2.0758276253904935],
                  [-50.58758740252073, -2.07891549945256],
                  [-50.585012481866436, -2.07891549945256],
                  [-50.585012481866436, -2.0758276253904935]]], null, false),
            {
              "landcover": 0,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.62635458306236, -1.9715796813316062],
                  [-50.62635458306236, -1.9729950487169021],
                  [-50.62485254601402, -1.9729950487169021],
                  [-50.62485254601402, -1.9715796813316062]]], null, false),
            {
              "landcover": 0,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.66047228173179, -1.9715796813316062],
                  [-50.66047228173179, -1.972909268909645],
                  [-50.6593564827816, -1.972909268909645],
                  [-50.6593564827816, -1.9715796813316062]]], null, false),
            {
              "landcover": 0,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.674162276543804, -1.9734239476868158],
                  [-50.674162276543804, -1.9745819743529285],
                  [-50.67308939293785, -1.9745819743529285],
                  [-50.67308939293785, -1.9734239476868158]]], null, false),
            {
              "landcover": 0,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.67557848290367, -1.9619723073110875],
                  [-50.67557848290367, -1.963816584290902],
                  [-50.674162276543804, -1.963816584290902],
                  [-50.674162276543804, -1.9619723073110875]]], null, false),
            {
              "landcover": 0,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.652919181145855, -1.9695209629865047],
                  [-50.652919181145855, -1.9713652316227575],
                  [-50.651374228753276, -1.9713652316227575],
                  [-50.651374228753276, -1.9695209629865047]]], null, false),
            {
              "landcover": 0,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.64345076721311, -2.0457048415933787],
                  [-50.64345076721311, -2.0475919121745876],
                  [-50.64053252380491, -2.0475919121745876],
                  [-50.64053252380491, -2.0457048415933787]]], null, false),
            {
              "landcover": 0,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.62590833098031, -2.0697344608858868],
                  [-50.62590833098031, -2.0723076996005694],
                  [-50.6235479870472, -2.0723076996005694],
                  [-50.6235479870472, -2.0697344608858868]]], null, false),
            {
              "landcover": 0,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-50.60407399239601, -2.090675363856048],
                  [-50.60407399239601, -2.0919619666502376],
                  [-50.60265778603615, -2.0919619666502376],
                  [-50.60265778603615, -2.090675363856048]]], null, false),
            {
              "landcover": 0,
              "system:index": "19"
            })]);
//Ajustes iniciais
//1. Fazer o upload dos arquivos do shp compactados .zip
//2. Selcionar a ferramenta de desenho e selecionar amostras de não floresta e floresta
//3. Editar as geometrias
//a) Renomear as geometrias (amostras), 
//b) Selecionar import as "FeatureCollection", 
//c) Em Property escrever "landcover" e em Value "0" para floresta e "1" par não floresta
//4. Renomear os arquivos e pasta para exportar 
Map.centerObject(roi, 5)
//Indices (only ndvi and bsi)
var addIndices = function(image) {
  var ndvi = image.normalizedDifference(['B8', 'B4']).rename(['ndvi']);
  var bsi = image.expression(
      '(( X + Y ) - (A + B)) /(( X + Y ) + (A + B)) ', {
        'X': image.select('B11'), //swir1
        'Y': image.select('B4'),  //red
        'A': image.select('B8'), // nir
        'B': image.select('B2'), // blue
  }).rename('bsi');
  return image.addBands(ndvi).addBands(bsi)
} 
//Image normalization
function normalize(image){
  var bandNames = image.bandNames();
  // Compute min and max of the image
  var minDict = image.reduceRegion({
    reducer: ee.Reducer.min(),
    geometry: roi,
    scale: 10,
    maxPixels: 1e9,
    bestEffort: true,
    tileScale: 16
  });
  var maxDict = image.reduceRegion({
    reducer: ee.Reducer.max(),
    geometry: roi,
    scale: 20,
    maxPixels: 1e9,
    bestEffort: true,
    tileScale: 16
  });
  var mins = ee.Image.constant(minDict.values(bandNames));
  var maxs = ee.Image.constant(maxDict.values(bandNames));
  var normalized = image.subtract(mins).divide(maxs.subtract(mins))
  return normalized
}
//Prepare the images 
var s2 = ee.ImageCollection("COPERNICUS/S2_SR")
var rgbVis = {
  gamma: 2,
  min: 0,
  max: 1,
  bands: ['B4', 'B3', 'B2'],
};
var img2022 = s2
  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 30))
  .filter(ee.Filter.date('2022-10-04', '2022-10-06')) //Select the range of date
  .filter(ee.Filter.bounds(roi))
  .select('B.*')
print(img2022)
var comp_2022 = img2022.median().clip(roi); //reduce and clip
var comp_2022 = addIndices(comp_2022); 
var comp_2022 = normalize(comp_2022);
// Display the input composite.
Map.addLayer(comp_2022, rgbVis, 'image');
//Display indices
var ndvi = comp_2022.select("ndvi")
var bsi = comp_2022.select("bsi")
Map.addLayer(ndvi, {palette: ['white','red','orange','yellow','green'],min: -0.4, max: 1}, 'ndvi');
Map.addLayer(bsi, {palette: ['red','white','blue'],min: -0.4, max: 1}, 'bsi');
// Merge the samples
var gcp = forest.merge(no_forest)//the first clase is 0
// Overlay the point on the image to get training data.
var train_2022 = comp_2022.sampleRegions({
  collection: gcp, 
  properties: ['landcover'], 
  scale: 10,
  tileScale: 16
});
// Add a random column and split the GCPs into training and validation set
var gcp = gcp.randomColumn()
// This being a simpler classification, we take 60% points
// for validation. Normal recommended ratio is
// 70% training, 30% validation
var trainingGcp = gcp.filter(ee.Filter.lt('random', 0.6));
var validationGcp = gcp.filter(ee.Filter.gte('random', 0.6));
// Overlay the point on the image to get training data.
var train_2022 = comp_2022.sampleRegions({
  collection: trainingGcp,
  properties: ['landcover'],
  scale: 10,
  tileScale: 16
});
// Train a classifier.
var class_2022 = ee.Classifier.smileRandomForest(50)
.train({
  features: train_2022,  
  classProperty: 'landcover',
  inputProperties: comp_2022.bandNames()
});
// Classify the image.
var classified_2022 = comp_2022.classify(class_2022);
//Majority filter
var kernel = ee.Kernel.manhattan(1);
var fmajority_2022 = classified_2022.reduceNeighborhood({
  reducer: ee.Reducer.mode(),
  kernel:kernel,
});
Map.addLayer(fmajority_2022, {min: 0, max: 2, palette: ['green', 'orange', 'blue']}, 'fmajority_2022');
Map.centerObject(roi, 10)
//Export monitoring
  Export.image.toDrive({
  image: fmajority_2022, 
  scale: 5, 
  description: 'Class_2022', //Rename the file
  maxPixels: 1e12,
  folder: 'Class', //Rename the folder
  region: roi,
  skipEmptyTiles: true,
  formatOptions: {
    cloudOptimized: true,
  }
});
// Export an ee.FeatureCollection as an Earth Engine asset.
Export.table.toDrive({
  collection: gcp,
  folder: 'Class',
  description:'samples_exp', //Rename the file
});
//Export image 2022
var Exp_comp_2022 = comp_2022.select("B2", "B3", "B4", "B8", "ndvi", "bsi")
  Export.image.toDrive({
  image: Exp_comp_2022, 
  scale: 5, 
  description: 'IMG_2022', //Rename the file
  maxPixels: 1e12,
  folder: 'Class', //Rename the folder
  region: roi,
  skipEmptyTiles: true,
  formatOptions: {
    cloudOptimized: true,
  }
});
//************************************************************************** 
// Accuracy Assessment
//************************************************************************** 
// Use classification map to assess accuracy using the validation fraction
// of the overall training set created above.
var test_2022 = classified_2022.sampleRegions({
  collection: validationGcp,
  properties: ['landcover'],
  tileScale: 16,
  scale: 10,
});
var testConfusionMatrix_2022 = test_2022.errorMatrix('landcover', 'classification')
// Printing of confusion matrix may time out. Alternatively, you can export it as CSV
print('Confusion Matrix 2022', testConfusionMatrix_2022);
print('Test Accuracy 2022', testConfusionMatrix_2022.accuracy());