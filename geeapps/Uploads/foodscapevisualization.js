var koeppen = ui.import && ui.import("koeppen", "image", {
      "id": "users/Uploads/Beck_KG_V1_present_0p0083"
    }) || ee.Image("users/Uploads/Beck_KG_V1_present_0p0083"),
    marine = ui.import && ui.import("marine", "image", {
      "id": "users/Uploads/IIASA/007_CombinedClusters_marine_39_5km"
    }) || ee.Image("users/Uploads/IIASA/007_CombinedClusters_marine_39_5km"),
    terrestrial = ui.import && ui.import("terrestrial", "image", {
      "id": "users/Uploads/IIASA/007_CombinedClusters_terrestrial_86_5km_reordered"
    }) || ee.Image("users/Uploads/IIASA/007_CombinedClusters_terrestrial_86_5km_reordered");
// ------------------------------- //
var lvl_comb = terrestrial.unmask().add(marine.unmask());
// Combine both
// Make copy and use that for viz
var cur_image = terrestrial;
//-------------- 
//var sld_terrestrial = "<RasterSymbolizer> <ColorMap type=\"intervals\" extended=\"false\" ><ColorMapEntry color='#BCBCBC' quantity='1' label='Areas with little or only subsistence food production'/><ColorMapEntry color='#FF2A00' quantity='2' label='Highly urbanized land'/><ColorMapEntry color='#add8e6' quantity='3' label='Inland water'/><ColorMapEntry color='#FFEBBE' quantity='101' label='Entisols on plains with bare land, little food production and grass cover'/><ColorMapEntry color='#F9E5BA' quantity='102' label='Entisols on plains with grazed bare land and grass cover'/><ColorMapEntry color='#F4E0B5' quantity='103' label='Entisols on plains with bare land and scattered mixed crop production and low nutrient application rate'/><ColorMapEntry color='#EEDAB1' quantity='104' label='Entisols on plains with bare land and scattered mixed crop production and low nutrient application rate'/><ColorMapEntry color='#E8D4AC' quantity='105' label='Entisols on plains with bare land and scattered mixed crop production and low nutrient application rate'/><ColorMapEntry color='#E3CFA8' quantity='106' label='Entisols on dry plains and bare land with mixed irrigated crop production'/><ColorMapEntry color='#DDC9A3' quantity='107' label='Entisols on dry plains and bare land with irrigated vegetable production and high nutrient application rates'/><ColorMapEntry color='#D7C39F' quantity='108' label='Entisols on dry plains and bare land with irrigated vegetable production and high nutrient application rates'/><ColorMapEntry color='#D2BE9A' quantity='109' label='Entisols on dry plains and large cultivated fields and livestock'/><ColorMapEntry color='#CCB896' quantity='110' label='Entisols on dry rainfed plains with legumes and pulses production and occassionaly other crops'/><ColorMapEntry color='#BED2FF' quantity='201' label='Inceptisols on humid hilly tree-covered land with scattered crop production'/><ColorMapEntry color='#AABDEC' quantity='202' label='Inceptisols on humid hilly tree-covered land with scattered crop production'/><ColorMapEntry color='#96A9DA' quantity='203' label='Inceptisols on humid mountaineous land with tree cover and scattered mixed crop production'/><ColorMapEntry color='#8495C7' quantity='204' label='Inceptisols on humid hilly-mountains with tree cover and small farmed mixed and intensive diverse production'/><ColorMapEntry color='#7282B4' quantity='205' label='Inceptisols on humid forested hills with intensive mixed crop production and grazing'/><ColorMapEntry color='#6270A1' quantity='206' label='Inceptisols on humid land with intensive mixed perrenial tree crops and non-ruminant grazing'/><ColorMapEntry color='#535F8F' quantity='207' label='Inceptisols on humid hilly land with intensive mixed livestock and other crops grown with high nutrient application rates'/><ColorMapEntry color='#444F7C' quantity='208' label='Inceptisols on humid hilly mixed tree-covered land with rainfed perennial crops and other livestock'/><ColorMapEntry color='#374069' quantity='209' label='Inceptisols on humid hilly tree-covered land with scattered crop production'/><ColorMapEntry color='#2B3257' quantity='210' label='Mixed rainfed highly productive land with agroforestry and diverse crops'/><ColorMapEntry color='#F50000' quantity='301' label='Highly urbanized land with little crop production'/><ColorMapEntry color='#EC0000' quantity='302' label='Highly urbanized land with little crop production'/><ColorMapEntry color='#E20000' quantity='303' label='Highly urbanized land with little crop production'/><ColorMapEntry color='#D80000' quantity='304' label='Peri-urban regions with marginal agriculture and livestock'/><ColorMapEntry color='#CF0000' quantity='305' label='Peri-urban regions with marginal agriculture and livestock'/><ColorMapEntry color='#C50000' quantity='306' label='Peri-urban regions with irrigated interspersed agriculture and livestock'/><ColorMapEntry color='#BB0000' quantity='307' label='Peri-urban regions with irrigated interspersed agriculture and livestock'/><ColorMapEntry color='#B20000' quantity='308' label='Peri-urban regions with marginal agriculture and livestock'/><ColorMapEntry color='#A80000' quantity='309' label='Peri-urban regions with marginal agriculture and livestock'/><ColorMapEntry color='#FF0000' quantity='310' label='Peri-urban regions with marginal agriculture and livestock'/><ColorMapEntry color='#D1B06F' quantity='401' label='Mollisols in mountaineous bare areas with little crop production and grazing'/><ColorMapEntry color='#C29F5C' quantity='402' label='Mollisols in mountaineous-hilly areas with low density livestock grazing and scattered crop production'/><ColorMapEntry color='#B4904A' quantity='403' label='Mollisols in mountaineous-hilly areas with low density livestock grazing and scattered crop production'/><ColorMapEntry color='#A5813A' quantity='404' label='Mollisols in mountaineous-hilly cultivated land with grazing ruminants and rainfed mixed crops'/><ColorMapEntry color='#96722C' quantity='405' label='Mollisols in hilly conventionally tillaged cultivated land with interspersed grazing'/><ColorMapEntry color='#876420' quantity='406' label='Mollisols and Inceptisols in plains with irrigated intensive crop production'/><ColorMapEntry color='#795715' quantity='407' label='Mollisols in plains with intensive irrigated cereal and oil crop production and high nutrient application rates'/><ColorMapEntry color='#6A4A0C' quantity='408' label='Mollisols in intensive rainfed cereal and oil crop producing land with high nutrient application rates'/><ColorMapEntry color='#5B3E05' quantity='409' label='Mollisols in plains with intensive rainfed large field with cereal and oil crop production'/><ColorMapEntry color='#3B2700' quantity='410' label='Mollisols in plains with intensive rainfed cereal and oil crop producing land that is single cropped'/><ColorMapEntry color='#D9CA77' quantity='501' label='Vertisols in plains with grazed shrubby land and scattered mixed crop production'/><ColorMapEntry color='#CCBD64' quantity='502' label='Vertisols in plains with grazed shrubby land and scattered mixed crop production'/><ColorMapEntry color='#BEAF51' quantity='503' label='Vertisols in plains with grazed shrubby land and scattered mixed crop production'/><ColorMapEntry color='#B1A241' quantity='504' label='Vertisols in plains diversely cultivated land and interspersed grazing'/><ColorMapEntry color='#A49632' quantity='505' label='Vertisols in plains with mixed crop and livestock production'/><ColorMapEntry color='#978925' quantity='506' label='Vertisols in plains with mixed irrigated and rainfed production with mixed crop production'/><ColorMapEntry color='#8A7D19' quantity='507' label='Vertisols in plains with mixed irrigated and rainfed production with mixed crop production'/><ColorMapEntry color='#7D700F' quantity='508' label='Vertisols in plains with rainfed intensively cultivated land with mixed production and sparse grazing'/><ColorMapEntry color='#6F6407' quantity='509' label='Vertisols in plains with larger intensively cultivated fields with reduced tillage'/><ColorMapEntry color='#625800' quantity='510' label='Vertisols in plains with rainfed intensively cultivated land with mixed production and sparse grazing'/><ColorMapEntry color='#D4F0FF' quantity='601' label='Inceptisols on bare grassy land with scattered grazing'/><ColorMapEntry color='#B3DDF2' quantity='602' label='Inceptisols on mixed forest and grassland'/><ColorMapEntry color='#94CBE5' quantity='603' label='Inceptisols in hilly grassy land with scattered grazing and marginal crop production'/><ColorMapEntry color='#77BAD8' quantity='604' label='Inceptisols in mountaineous bare land with small fields and traditional tillage'/><ColorMapEntry color='#5EABCB' quantity='605' label='Inceptisols in hilly land with mixed production of conventional tillage and high nutrient application'/><ColorMapEntry color='#469DBE' quantity='606' label='Inceptisols in hills and mountains with irrigated intensive mixed crop production'/><ColorMapEntry color='#318FB1' quantity='607' label='Inceptisols in hilly shrubland with irrigated intensive mixed crop production and high nutrient application'/><ColorMapEntry color='#1E83A4' quantity='608' label='Mollisols in intensive rainfed cereal and oil crop producing land with high nutrient application rates'/><ColorMapEntry color='#0E7797' quantity='609' label='Inceptisols in forested land with few scattered large farms and low crop diversity'/><ColorMapEntry color='#006C8A' quantity='610' label='Inceptisols in arid hilly land with rainfed cereal and legume production and other livestock'/><ColorMapEntry color='#FFD9D9' quantity='701' label='Alfisols in plains and grasslands with little crop production and grazing'/><ColorMapEntry color='#EFB4B4' quantity='702' label='Alfisols in shrubby plains that are grazed with scattered cropland'/><ColorMapEntry color='#DE9393' quantity='703' label='Alfisols in mixed food production landscapes with scattered grazing'/><ColorMapEntry color='#CE7575' quantity='704' label='Alfisols in mixed diverse crop systems on small fields with some livestock and agroforestry and low nutrient application rates'/><ColorMapEntry color='#BD5959' quantity='705' label='Alfisols with mixed crop production, some ruminants, and higher nutrient application rates'/><ColorMapEntry color='#AD4141' quantity='706' label='Alfisols with irrigated intensive mixed crop production and ruminants'/><ColorMapEntry color='#9C2C2C' quantity='707' label='Alfisols with mixed irrigated intensive cereal production and livestock with high nutrient application rates'/><ColorMapEntry color='#8C1A1A' quantity='708' label='Alfisols with rainfed intensive cereal production and livestock with high nutrient application rates'/><ColorMapEntry color='#7C0C0C' quantity='709' label='Alfisols with rainfed crop production on large fields with some livestock'/><ColorMapEntry color='#6B0000' quantity='710' label='Alfisols with rainfed diverse crop production with some livestock'/><ColorMapEntry color='#CCCCCC' quantity='801' label='Andisols on bare land with little crop production'/><ColorMapEntry color='#B3B3B3' quantity='802' label='Andisols on hilly land with little crop production'/><ColorMapEntry color='#999999' quantity='803' label='Andisols on hilly and mountainous land with sparse crop production and ruminants'/><ColorMapEntry color='#808080' quantity='804' label='Andisols on hilly and mountainous land with sparse crop production and ruminants'/><ColorMapEntry color='#666666' quantity='805' label='Andisols on hilly and mountainous land with sparse crop production and ruminants'/><ColorMapEntry color='#4D4D4D' quantity='807' label='Andisols on hilly tree and shrub land with scattered crop production'/><ColorMapEntry color='#333333' quantity='808' label='Andisols on hilly tree and shrub land with scattered crop production'/><ColorMapEntry color='#1A1A1A' quantity='809' label='Andisols on hilly tree and shrub land with scattered crop production'/><ColorMapEntry color='#000000' quantity='810' label='Andisols on hilly tree and shrub land with scattered crop production'/><ColorMapEntry color='#BED2FF' quantity='901' label='Histosols and Spodosols on wet mountainous land with little crop production'/><ColorMapEntry color='#9FAFEF' quantity='902' label='Spodosols on hilly tree-covered land with scattered crop production'/><ColorMapEntry color='#828AE0' quantity='903' label='Spodosols on hilly tree-covered land with scattered crop production'/><ColorMapEntry color='#6967D0' quantity='904' label='Histosols and Spodosols on mountainous land with grazing and interspersed food production'/><ColorMapEntry color='#5E50C1' quantity='905' label='Histosols and Spodosols on hilly tree-covered land grazed and cultivated with high nutrient application rate'/><ColorMapEntry color='#563BB1' quantity='906' label='Histosols and Spodosols on hilly tree-covered land grazed and cultivated with high nutrient application rate'/><ColorMapEntry color='#5128A2' quantity='907' label='Histosols and Spodosols on intensively cultivated land with high livestock production'/><ColorMapEntry color='#4F1892' quantity='908' label='Spodosols on intensively cultivated land high livestock production and nutrient application rate'/><ColorMapEntry color='#4D0B83' quantity='909' label='Histosols and Spodosols in tree-covered landscapes with scattered crop production on large fields'/><ColorMapEntry color='#4C0073' quantity='910' label='Histosols and Spodosols with rainfed mixed crop production and livestock including ruminants'/><ColorMapEntry color='#DBF0B3' quantity='1001' label='Oxisols on humid tree-covered land with little food production'/><ColorMapEntry color='#C5DF93' quantity='1002' label='Oxisols and Ultisols on humid tree-covered land with scattered cropland and livestock'/><ColorMapEntry color='#B0CE77' quantity='1003' label='Oxisols and Ultisols on humid tree-covered land with diverse small field production and agroforestry'/><ColorMapEntry color='#9DBD5E' quantity='1004' label='Oxisols and Ultisols on humid tree-covered land with diverse small field production and agroforestry'/><ColorMapEntry color='#8AAC47' quantity='1005' label='Oxisols and Ultisols on humid hilly tree-covered land with agroforestry and some livestock'/><ColorMapEntry color='#789B33' quantity='1006' label='Oxisols and Ultisols on land with humid rainfed and irrigated perennial production and other mixed crops and livestock'/><ColorMapEntry color='#678A22' quantity='1007' label='Oxisols and Ultisols on humid irrigated intensive perennial production and other mixed crops and livestock'/><ColorMapEntry color='#577914' quantity='1008' label='Oxisols and Ultisols with rainfed perennial crops and agroforestry and high nutrient rates and livestock'/><ColorMapEntry color='#476809' quantity='1009' label='Oxisols and Ultisols with mixed grazing and crop production on large fields'/><ColorMapEntry color='#395700' quantity='1010' label='Oxisols and Ultisols with rainfed perennial crops and agroforestry and some livestock'/><ColorMapEntry color='#F5F57A' quantity='1101' label='Ultisols on humid tree-covered land with little crop production'/><ColorMapEntry color='#E5E565' quantity='1102' label='Ultisols on humid tree-covered land with scattered crop production'/><ColorMapEntry color='#D5D553' quantity='1103' label='Ultisols on humid tree-covered land with diverse crop production and high nutrient application rates'/><ColorMapEntry color='#C5C542' quantity='1104' label='Ultisols on hilly and mountainous tree-covered land with diverse crop production and high nutrient application rates'/><ColorMapEntry color='#B5B532' quantity='1105' label='Ultisols on humid tree-covered land with diverse crop production and some livestock'/><ColorMapEntry color='#A6A625' quantity='1106' label='Ultisols with intensively cultivated rainfed and irrigated mixed crop and livestock production'/><ColorMapEntry color='#969619' quantity='1107' label='Ultisols with intensively cultivated rainfed and irrigated mixed crop and livestock production and high nutrient application rates'/><ColorMapEntry color='#86860F' quantity='1108' label='Ultisols with mixed crop and livestock production and high nutrient application rates'/><ColorMapEntry color='#767607' quantity='1109' label='Ultisols on humid tree-covered land with scattered crop production on large fields'/><ColorMapEntry color='#666600' quantity='1110' label='Ultisols with mixed crops including perennials and livestock production'/></ColorMap></RasterSymbolizer>";
//var sld_marine = "<RasterSymbolizer> <ColorMap type=\"intervals\" extended=\"false\" ><ColorMapEntry color='#B2F6F8' quantity='1201' label='Cold openwater and productive with marginal other fishery catches using line gear'/><ColorMapEntry color='#9BD7D9' quantity='1202' label='Cold openwater and productive with marginal other fishery catches using line gear'/><ColorMapEntry color='#8ABFC0' quantity='1203' label='Cold openwater and productive finfish fisheries with large nets'/><ColorMapEntry color='#7CACAD' quantity='1204' label='Cold openwater and productive fishing with scattered linegear and small nets'/><ColorMapEntry color='#719C9D' quantity='1205' label='Cold openwater and productive finfish fisheries with large nets'/><ColorMapEntry color='#678F90' quantity='1206' label='Cold openwater and productive smallnet fishing'/><ColorMapEntry color='#5F8485' quantity='1207' label='Cold openwater with crustacean and molluscs fishing using other and mixed gears'/><ColorMapEntry color='#597B7C' quantity='1208' label='Cold openwater and productive intense fishing with large and small nets'/><ColorMapEntry color='#ABDCFF' quantity='1301' label='Warm openwater far from commercial ports with scattered harvests'/><ColorMapEntry color='#95C0DF' quantity='1302' label='Warm openwater and other fisheries with mixed gears'/><ColorMapEntry color='#85ABC6' quantity='1303' label='Warm openwater finfish fishing far from ports with large nets'/><ColorMapEntry color='#779AB2' quantity='1304' label='Warm water productive finfish fishing with line gear'/><ColorMapEntry color='#6C8CA2' quantity='1305' label='Warm openwater and productive diverse finfish fishing'/><ColorMapEntry color='#638094' quantity='1306' label='Warm water and productive diverse fishing with small nets'/><ColorMapEntry color='#5C7689' quantity='1307' label='Warm water and productive mollusc and crustacean fishing with other gear'/><ColorMapEntry color='#556E7F' quantity='1308' label='Warm water and productive maricultural production with largenet fishing'/><ColorMapEntry color='#91D1DE' quantity='1401' label='Cold neritic and productive waters far from ports and with sparse fishing'/><ColorMapEntry color='#7EB6C2' quantity='1402' label='Cold neritic and productive waters far from ports and with sparse fishing'/><ColorMapEntry color='#70A2AC' quantity='1403' label='Cold neritic and productive waters with diverse fisheries'/><ColorMapEntry color='#65929B' quantity='1404' label='Neritic waters with diverse fisheries caught with line gears'/><ColorMapEntry color='#5C858D' quantity='1405' label='Cold neritic and productive waters with diverse fisheries'/><ColorMapEntry color='#547981' quantity='1406' label='Cold neritic and productive waters with diverse fisheries caught with small nets'/><ColorMapEntry color='#4E7077' quantity='1407' label='Neritic productive waters and molluscs and crustaceans and interspersed mariculture'/><ColorMapEntry color='#48686F' quantity='1408' label='Neritic productive and intensively fished waters with diverse maricultural production'/><ColorMapEntry color='#C9E1E0' quantity='1501' label='Openwater far from commercial ports with little fishing'/><ColorMapEntry color='#AFC4C4' quantity='1502' label='Openwater far from commercial ports with little fishing'/><ColorMapEntry color='#9CAFAE' quantity='1503' label='Openwater far from commercial ports with sparse largenet fishing'/><ColorMapEntry color='#8C9D9C' quantity='1504' label='Openwater and sparse fin fishing with mixed gears'/><ColorMapEntry color='#7F8F8E' quantity='1505' label='Openwater and finfish fishing with large and small nets'/><ColorMapEntry color='#758382' quantity='1506' label='Openwater and finfish fishing with large and small nets'/><ColorMapEntry color='#6C7978' quantity='1507' label='Openwater and molluscs and crustacean fishing with mixed gear'/><ColorMapEntry color='#647070' quantity='1508' label='Openwater and intensive finfish fishing with large and small nets and aquaculture production'/><ColorMapEntry color='#6F6FDC' quantity='1601' label='Warm openwater with diverse mariculture production and sparse fishing with large nets'/><ColorMapEntry color='#6161C0' quantity='1602' label='Warm openwater and other fisheries with mixed gears'/><ColorMapEntry color='#5656AB' quantity='1603' label='Warm openwater and productive finfish far from commercial ports with large nets'/><ColorMapEntry color='#4D4D9A' quantity='1604' label='Warm openwater and diverse finfish harvest with line gears'/><ColorMapEntry color='#46468C' quantity='1605' label='Warm openwater and productive diverse finfish harvest with large nets'/><ColorMapEntry color='#404080' quantity='1606' label='Warm openwater and productive diverse fishing with mixed gear'/><ColorMapEntry color='#3B3B76' quantity='1607' label='Warm openwater intensive fishing of molluscs and crustaceans with other gear'/><ColorMapEntry color='#37376E' quantity='1608' label='Warm intensively fished waters with productive mariculture'/><ColorMapEntry color='#CE8FBC' quantity='1701' label='Coastal waters far from commercial ports with only marginal fishing'/><ColorMapEntry color='#B47DA4' quantity='1702' label='Coastal waters of other fisheries products with small nets'/><ColorMapEntry color='#A06F92' quantity='1703' label='Coastal waters of other fisheries products with small nets'/><ColorMapEntry color='#906483' quantity='1704' label='Coastal waters and productive fishing with line gear'/><ColorMapEntry color='#835B77' quantity='1705' label='Coastal productive and intensively fished waters with large and small nets'/><ColorMapEntry color='#78536D' quantity='1706' label='Coastal productive and intensively fished waters with large and small nets'/><ColorMapEntry color='#6E4D65' quantity='1707' label='Coastal productive and intensively fished waters for molluscs and crustaceans'/><ColorMapEntry color='#67475E' quantity='1708' label='Coastal productive and intensively fished waters with interspersed mariculture'/></ColorMap></RasterSymbolizer>";
var sld_comb = "<RasterSymbolizer> <ColorMap type=\"intervals\" extended=\"false\" ><ColorMapEntry color='#BCBCBC' quantity='1' label='Areas with little or only subsistence food production'/><ColorMapEntry color='#FF2A00' quantity='2' label='Highly urbanized land'/><ColorMapEntry color='#ADD8E6' quantity='3' label='Inland water'/><ColorMapEntry color='#FFEBBE' quantity='101' label='Entisols on plains with bare land, little food production and grass cover'/><ColorMapEntry color='#F9E5BA' quantity='102' label='Entisols on plains with grazed bare land and grass cover'/><ColorMapEntry color='#F4E0B5' quantity='103' label='Entisols on plains with bare land and scattered mixed crop production and low nutrient application rate'/><ColorMapEntry color='#EEDAB1' quantity='104' label='Entisols on dry plains and large cultivated fields and livestock'/><ColorMapEntry color='#E8D4AC' quantity='105' label='Entisols on dry rainfed plains with legumes and pulses production and occassionaly other crops'/><ColorMapEntry color='#D2BE9A' quantity='109' label='Entisols on dry plains and bare land with mixed irrigated crop production'/><ColorMapEntry color='#CCB896' quantity='110' label='Entisols on dry plains and bare land with irrigated vegetable production and high nutrient application rates'/><ColorMapEntry color='#BED2FF' quantity='201' label='Inceptisols on humid hilly tree-covered land with scattered crop production'/><ColorMapEntry color='#AABDEC' quantity='202' label='Inceptisols on humid mountaineous land with tree cover and scattered mixed crop production'/><ColorMapEntry color='#96A9DA' quantity='203' label='Inceptisols on humid hilly-mountains with tree cover and small farmed mixed and intensive diverse production'/><ColorMapEntry color='#8495C7' quantity='204' label='Inceptisols on humid forested hills with intensive mixed crop production and grazing'/><ColorMapEntry color='#7282B4' quantity='205' label='Inceptisols on humid hilly mixed tree-covered land with rainfed perennial crops and other livestock'/><ColorMapEntry color='#6270A1' quantity='206' label='Mixed rainfed highly productive land with agroforestry and diverse crops'/><ColorMapEntry color='#374069' quantity='209' label='Inceptisols on humid land with intensive mixed perrenial tree crops and non-ruminant grazing'/><ColorMapEntry color='#2B3257' quantity='210' label='Inceptisols on humid hilly land with intensive mixed livestock and other crops grown with high nutrient application rates'/><ColorMapEntry color='#F50000' quantity='301' label='Highly urbanized land with little crop production'/><ColorMapEntry color='#D80000' quantity='304' label='Peri-urban regions with marginal agriculture and livestock'/><ColorMapEntry color='#C50000' quantity='306' label='Peri-urban regions with irrigated interspersed agriculture and livestock'/><ColorMapEntry color='#D1B06F' quantity='401' label='Mollisols in mountaineous bare areas with little crop production and grazing'/><ColorMapEntry color='#C29F5C' quantity='402' label='Mollisols in mountaineous-hilly areas with low density livestock grazing and scattered crop production'/><ColorMapEntry color='#B4904A' quantity='403' label='Mollisols in mountaineous-hilly cultivated land with grazing ruminants and rainfed mixed crops'/><ColorMapEntry color='#A5813A' quantity='404' label='Mollisols in hilly conventionally tillaged cultivated land with interspersed grazing'/><ColorMapEntry color='#876420' quantity='406' label='Mollisols and Inceptisols in plains with irrigated intensive crop production'/><ColorMapEntry color='#795715' quantity='407' label='Mollisols in plains with intensive irrigated cereal and oil crop production and high nutrient application rates'/><ColorMapEntry color='#6A4A0C' quantity='408' label='Mollisols in intensive rainfed cereal and oil crop producing land with high nutrient application rates'/><ColorMapEntry color='#5B3E05' quantity='409' label='Mollisols in plains with intensive rainfed large field with cereal and oil crop production'/><ColorMapEntry color='#3B2700' quantity='410' label='Mollisols in plains with intensive rainfed cereal and oil crop producing land that is single cropped'/><ColorMapEntry color='#D9CA77' quantity='501' label='Vertisols in plains with grazed shrubby land and scattered mixed crop production'/><ColorMapEntry color='#B1A241' quantity='504' label='Vertisols in plains diversely cultivated land and interspersed grazing'/><ColorMapEntry color='#978925' quantity='506' label='Vertisols in plains with mixed crop and livestock production'/><ColorMapEntry color='#7D700F' quantity='508' label='Vertisols in plains with mixed irrigated and rainfed production with mixed crop production'/><ColorMapEntry color='#6F6407' quantity='509' label='Vertisols in plains with rainfed intensively cultivated land with mixed production and sparse grazing'/><ColorMapEntry color='#625800' quantity='510' label='Vertisols in plains with larger intensively cultivated fields with reduced tillage'/><ColorMapEntry color='#D4F0FF' quantity='601' label='Inceptisols on bare grassy land with scattered grazing'/><ColorMapEntry color='#B3DDF2' quantity='602' label='Inceptisols on mixed forest and grassland'/><ColorMapEntry color='#94CBE5' quantity='603' label='Inceptisols in hilly grassy land with scattered grazing and marginal crop production'/><ColorMapEntry color='#77BAD8' quantity='604' label='Inceptisols in mountaineous bare land with small fields and traditional tillage'/><ColorMapEntry color='#5EABCB' quantity='605' label='Inceptisols in forested land with few scattered large farms and low crop diversity'/><ColorMapEntry color='#469DBE' quantity='606' label='Inceptisols in hilly land with mixed production of conventional tillage and high nutrient application'/><ColorMapEntry color='#318FB1' quantity='607' label='Inceptisols in arid hilly land with rainfed cereal and legume production and other livestock'/><ColorMapEntry color='#0E7797' quantity='609' label='Inceptisols in hills and mountains with irrigated intensive mixed crop production'/><ColorMapEntry color='#006C8A' quantity='610' label='Inceptisols in hilly shrubland with irrigated intensive mixed crop production and high nutrient application'/><ColorMapEntry color='#FFD9D9' quantity='701' label='Alfisols in plains and grasslands with little crop production and grazing'/><ColorMapEntry color='#EFB4B4' quantity='702' label='Alfisols in shrubby plains that are grazed with scattered cropland'/><ColorMapEntry color='#DE9393' quantity='703' label='Alfisols in mixed food production landscapes with scattered grazing'/><ColorMapEntry color='#CE7575' quantity='704' label='Alfisols in mixed diverse crop systems on small fields with some livestock and agroforestry and low nutrient application rates'/><ColorMapEntry color='#BD5959' quantity='705' label='Alfisols with mixed crop production, some ruminants, and higher nutrient application rates'/><ColorMapEntry color='#AD4141' quantity='706' label='Alfisols with rainfed crop production on large fields with some livestock'/><ColorMapEntry color='#9C2C2C' quantity='707' label='Alfisols with rainfed diverse crop production with some livestock'/><ColorMapEntry color='#8C1A1A' quantity='708' label='Alfisols with irrigated intensive mixed crop production and ruminants'/><ColorMapEntry color='#7C0C0C' quantity='709' label='Alfisols with mixed irrigated intensive cereal production and livestock with high nutrient application rates'/><ColorMapEntry color='#6B0000' quantity='710' label='Alfisols with rainfed intensive cereal production and livestock with high nutrient application rates'/><ColorMapEntry color='#CCCCCC' quantity='801' label='Andisols on bare land with little crop production'/><ColorMapEntry color='#B3B3B3' quantity='802' label='Andisols on hilly land with little crop production'/><ColorMapEntry color='#999999' quantity='803' label='Andisols on hilly and mountainous land with sparse crop production and ruminants'/><ColorMapEntry color='#808080' quantity='804' label='Andisols on hilly tree and shrub land with scattered crop production'/><ColorMapEntry color='#BED2FF' quantity='901' label='Histosols and Spodosols on wet mountainous land with little crop production'/><ColorMapEntry color='#9FAFEF' quantity='902' label='Spodosols on hilly tree-covered land with scattered crop production'/><ColorMapEntry color='#828AE0' quantity='903' label='Histosols and Spodosols with rainfed mixed crop production and livestock including ruminants'/><ColorMapEntry color='#6967D0' quantity='904' label='Histosols and Spodosols in tree-covered landscapes with scattered crop production on large fields'/><ColorMapEntry color='#5E50C1' quantity='905' label='Histosols and Spodosols on mountainous land with grazing and interspersed food production'/><ColorMapEntry color='#563BB1' quantity='906' label='Histosols and Spodosols on hilly tree-covered land grazed and cultivated with high nutrient application rate'/><ColorMapEntry color='#4D0B83' quantity='909' label='Histosols and Spodosols on intensively cultivated land with high livestock production'/><ColorMapEntry color='#4C0073' quantity='910' label='Spodosols on intensively cultivated land high livestock production and nutrient application rate'/><ColorMapEntry color='#DBF0B3' quantity='1001' label='Oxisols on humid tree-covered land with little food production'/><ColorMapEntry color='#C5DF93' quantity='1002' label='Oxisols and Ultisols on humid tree-covered land with scattered cropland and livestock'/><ColorMapEntry color='#B0CE77' quantity='1003' label='Oxisols and Ultisols on humid hilly tree-covered land with agroforestry and some livestock'/><ColorMapEntry color='#9DBD5E' quantity='1004' label='Oxisols and Ultisols on humid tree-covered land with diverse small field production and agroforestry'/><ColorMapEntry color='#8AAC47' quantity='1005' label='Oxisols and Ultisols with rainfed perennial crops and agroforestry and some livestock'/><ColorMapEntry color='#789B33' quantity='1006' label='Oxisols and Ultisols with mixed grazing and crop production on large fields'/><ColorMapEntry color='#678A22' quantity='1007' label='Oxisols and Ultisols with rainfed perennial crops and agroforestry and high nutrient rates and livestock'/><ColorMapEntry color='#476809' quantity='1009' label='Oxisols and Ultisols on land with humid rainfed and irrigated perennial production and other mixed crops and livestock'/><ColorMapEntry color='#395700' quantity='1010' label='Oxisols and Ultisols on humid irrigated intensive perennial production and other mixed crops and livestock'/><ColorMapEntry color='#F5F57A' quantity='1101' label='Ultisols on humid tree-covered land with little crop production'/><ColorMapEntry color='#E5E565' quantity='1102' label='Ultisols on humid tree-covered land with scattered crop production'/><ColorMapEntry color='#D5D553' quantity='1103' label='Ultisols on humid tree-covered land with scattered crop production on large fields'/><ColorMapEntry color='#C5C542' quantity='1104' label='Ultisols on humid tree-covered land with diverse crop production'/><ColorMapEntry color='#B5B532' quantity='1105' label='Ultisols on hilly and mountainous tree-covered land with diverse crop production and high nutrient application rates'/><ColorMapEntry color='#A6A625' quantity='1106' label='Ultisols with mixed crop and livestock production and high nutrient application rates'/><ColorMapEntry color='#969619' quantity='1107' label='Ultisols on humid tree-covered land with diverse crop production and some livestock'/><ColorMapEntry color='#86860F' quantity='1108' label='Ultisols with mixed crops including perennials and livestock production'/><ColorMapEntry color='#767607' quantity='1109' label='Ultisols with intensively cultivated rainfed and irrigated mixed crop and livestock production'/><ColorMapEntry color='#666600' quantity='1110' label='Ultisols with intensively cultivated rainfed and irrigated mixed crop and livestock production and high nutrient application rates'/></ColorMap></RasterSymbolizer>";
// Construct lookup tables with ids for both levels
var lookup_table = ee.Dictionary({
"1" : "Areas with little or only subsistence food production","2" : "Highly urbanized land","3" : "Inland water","101" : "Entisols on plains with bare land, little food production and grass cover","102" : "Entisols on plains with grazed bare land and grass cover","103" : "Entisols on plains with bare land and scattered mixed crop production and low nutrient application rate","104" : "Entisols on dry plains and large cultivated fields and livestock","105" : "Entisols on dry rainfed plains with legumes and pulses production and occassionaly other crops","109" : "Entisols on dry plains and bare land with mixed irrigated crop production","110" : "Entisols on dry plains and bare land with irrigated vegetable production and high nutrient application rates","201" : "Inceptisols on humid hilly tree-covered land with scattered crop production","202" : "Inceptisols on humid mountaineous land with tree cover and scattered mixed crop production","203" : "Inceptisols on humid hilly-mountains with tree cover and small farmed mixed and intensive diverse production","204" : "Inceptisols on humid forested hills with intensive mixed crop production and grazing","205" : "Inceptisols on humid hilly mixed tree-covered land with rainfed perennial crops and other livestock","206" : "Mixed rainfed highly productive land with agroforestry and diverse crops","209" : "Inceptisols on humid land with intensive mixed perrenial tree crops and non-ruminant grazing","210" : "Inceptisols on humid hilly land with intensive mixed livestock and other crops grown with high nutrient application rates","301" : "Highly urbanized land with little crop production","304" : "Peri-urban regions with marginal agriculture and livestock","306" : "Peri-urban regions with irrigated interspersed agriculture and livestock","401" : "Mollisols in mountaineous bare areas with little crop production and grazing","402" : "Mollisols in mountaineous-hilly areas with low density livestock grazing and scattered crop production","403" : "Mollisols in mountaineous-hilly cultivated land with grazing ruminants and rainfed mixed crops","404" : "Mollisols in hilly conventionally tillaged cultivated land with interspersed grazing","406" : "Mollisols and Inceptisols in plains with irrigated intensive crop production","407" : "Mollisols in plains with intensive irrigated cereal and oil crop production and high nutrient application rates","408" : "Mollisols in intensive rainfed cereal and oil crop producing land with high nutrient application rates","409" : "Mollisols in plains with intensive rainfed large field with cereal and oil crop production","410" : "Mollisols in plains with intensive rainfed cereal and oil crop producing land that is single cropped","501" : "Vertisols in plains with grazed shrubby land and scattered mixed crop production","504" : "Vertisols in plains diversely cultivated land and interspersed grazing","506" : "Vertisols in plains with mixed crop and livestock production","508" : "Vertisols in plains with mixed irrigated and rainfed production with mixed crop production","509" : "Vertisols in plains with rainfed intensively cultivated land with mixed production and sparse grazing","510" : "Vertisols in plains with larger intensively cultivated fields with reduced tillage","601" : "Inceptisols on bare grassy land with scattered grazing","602" : "Inceptisols on mixed forest and grassland","603" : "Inceptisols in hilly grassy land with scattered grazing and marginal crop production","604" : "Inceptisols in mountaineous bare land with small fields and traditional tillage","605" : "Inceptisols in forested land with few scattered large farms and low crop diversity","606" : "Inceptisols in hilly land with mixed production of conventional tillage and high nutrient application","607" : "Inceptisols in arid hilly land with rainfed cereal and legume production and other livestock","609" : "Inceptisols in hills and mountains with irrigated intensive mixed crop production","610" : "Inceptisols in hilly shrubland with irrigated intensive mixed crop production and high nutrient application","701" : "Alfisols in plains and grasslands with little crop production and grazing","702" : "Alfisols in shrubby plains that are grazed with scattered cropland","703" : "Alfisols in mixed food production landscapes with scattered grazing","704" : "Alfisols in mixed diverse crop systems on small fields with some livestock and agroforestry and low nutrient application rates","705" : "Alfisols with mixed crop production, some ruminants, and higher nutrient application rates","706" : "Alfisols with rainfed crop production on large fields with some livestock","707" : "Alfisols with rainfed diverse crop production with some livestock","708" : "Alfisols with irrigated intensive mixed crop production and ruminants","709" : "Alfisols with mixed irrigated intensive cereal production and livestock with high nutrient application rates","710" : "Alfisols with rainfed intensive cereal production and livestock with high nutrient application rates","801" : "Andisols on bare land with little crop production","802" : "Andisols on hilly land with little crop production","803" : "Andisols on hilly and mountainous land with sparse crop production and ruminants","804" : "Andisols on hilly tree and shrub land with scattered crop production","901" : "Histosols and Spodosols on wet mountainous land with little crop production","902" : "Spodosols on hilly tree-covered land with scattered crop production","903" : "Histosols and Spodosols with rainfed mixed crop production and livestock including ruminants","904" : "Histosols and Spodosols in tree-covered landscapes with scattered crop production on large fields","905" : "Histosols and Spodosols on mountainous land with grazing and interspersed food production","906" : "Histosols and Spodosols on hilly tree-covered land grazed and cultivated with high nutrient application rate","909" : "Histosols and Spodosols on intensively cultivated land with high livestock production","910" : "Spodosols on intensively cultivated land high livestock production and nutrient application rate","1001" : "Oxisols on humid tree-covered land with little food production","1002" : "Oxisols and Ultisols on humid tree-covered land with scattered cropland and livestock","1003" : "Oxisols and Ultisols on humid hilly tree-covered land with agroforestry and some livestock","1004" : "Oxisols and Ultisols on humid tree-covered land with diverse small field production and agroforestry","1005" : "Oxisols and Ultisols with rainfed perennial crops and agroforestry and some livestock","1006" : "Oxisols and Ultisols with mixed grazing and crop production on large fields","1007" : "Oxisols and Ultisols with rainfed perennial crops and agroforestry and high nutrient rates and livestock","1009" : "Oxisols and Ultisols on land with humid rainfed and irrigated perennial production and other mixed crops and livestock","1010" : "Oxisols and Ultisols on humid irrigated intensive perennial production and other mixed crops and livestock","1101" : "Ultisols on humid tree-covered land with little crop production","1102" : "Ultisols on humid tree-covered land with scattered crop production","1103" : "Ultisols on humid tree-covered land with scattered crop production on large fields","1104" : "Ultisols on humid tree-covered land with diverse crop production","1105" : "Ultisols on hilly and mountainous tree-covered land with diverse crop production and high nutrient application rates","1106" : "Ultisols with mixed crop and livestock production and high nutrient application rates","1107" : "Ultisols on humid tree-covered land with diverse crop production and some livestock","1108" : "Ultisols with mixed crops including perennials and livestock production","1109" : "Ultisols with intensively cultivated rainfed and irrigated mixed crop and livestock production","1110" : "Ultisols with intensively cultivated rainfed and irrigated mixed crop and livestock production and high nutrient application rates",
"1201" : "Cold openwater and productive with marginal other fishery catches using line gear","1202" : "Cold openwater and productive with marginal other fishery catches using line gear","1203" : "Cold openwater and productive finfish fisheries with large nets","1204" : "Cold openwater and productive fishing with scattered linegear and small nets","1205" : "Cold openwater and productive finfish fisheries with large nets","1206" : "Cold openwater and productive smallnet fishing","1207" : "Cold openwater with crustacean and molluscs fishing using other and mixed gears","1208" : "Cold openwater and productive intense fishing with large and small nets","1301" : "Warm openwater far from commercial ports with scattered harvests","1302" : "Warm openwater and other fisheries with mixed gears","1303" : "Warm openwater finfish fishing far from ports with large nets","1304" : "Warm water productive finfish fishing with line gear","1305" : "Warm openwater and productive diverse finfish fishing","1306" : "Warm water and productive diverse fishing with small nets","1307" : "Warm water and productive mollusc and crustacean fishing with other gear","1308" : "Warm water and productive maricultural production with largenet fishing","1401" : "Cold neritic and productive waters far from ports and with sparse fishing","1402" : "Cold neritic and productive waters far from ports and with sparse fishing","1403" : "Cold neritic and productive waters with diverse fisheries","1404" : "Neritic waters with diverse fisheries caught with line gears","1405" : "Cold neritic and productive waters with diverse fisheries","1406" : "Cold neritic and productive waters with diverse fisheries caught with small nets","1407" : "Neritic productive waters and molluscs and crustaceans and interspersed mariculture","1408" : "Neritic productive and intensively fished waters with diverse maricultural production","1501" : "Openwater far from commercial ports with little fishing","1502" : "Openwater far from commercial ports with little fishing","1503" : "Openwater far from commercial ports with sparse largenet fishing","1504" : "Openwater and sparse fin fishing with mixed gears","1505" : "Openwater and finfish fishing with large and small nets","1506" : "Openwater and finfish fishing with large and small nets","1507" : "Openwater and molluscs and crustacean fishing with mixed gear","1508" : "Openwater and intensive finfish fishing with large and small nets and aquaculture production","1601" : "Warm openwater with diverse mariculture production and sparse fishing with large nets","1602" : "Warm openwater and other fisheries with mixed gears","1603" : "Warm openwater and productive finfish far from commercial ports with large nets","1604" : "Warm openwater and diverse finfish harvest with line gears","1605" : "Warm openwater and productive diverse finfish harvest with large nets","1606" : "Warm openwater and productive diverse fishing with mixed gear","1607" : "Warm openwater intensive fishing of molluscs and crustaceans with other gear","1608" : "Warm intensively fished waters with productive mariculture","1701" : "Coastal waters far from commercial ports with only marginal fishing","1702" : "Coastal waters of other fisheries products with small nets","1703" : "Coastal waters of other fisheries products with small nets","1704" : "Coastal waters and productive fishing with line gear","1705" : "Coastal productive and intensively fished waters with large and small nets","1706" : "Coastal productive and intensively fished waters with large and small nets","1707" : "Coastal productive and intensively fished waters for molluscs and crustaceans","1708" : "Coastal productive and intensively fished waters with interspersed mariculture"
});
var layers = {
  'Combined terrestrial': 'terrestrial'
//  'Combined marine': 'marine',
//  'Both combined': 'lvl_comb'
};
//--------------
// Load the classified layer
Map.addLayer(cur_image.sldStyle(sld_comb),{},'Foodscapes terrestrial clusters');
//--------------
var inspector = ui.Panel({
  layout: ui.Panel.Layout.absolute(),
  style: {width: '700px', height: '50px', position: 'top-center', border: '3px solid black' } 
});
// Add a label to the panel.
inspector.add(ui.Label('Click on a pixel to get the class number.'));
Map.add(inspector);
// --- Clicking --- //
var LCquery = function(cur_image){
  // Register a callback on the map to be invoked when the map is clicked.
  Map.onClick(function(coords){
  // Clear the panel and show a loading message.
  inspector.clear();
  inspector.style().set('shown', true);
  inspector.add(ui.Label('Loading...', {color: 'gray'}));
  // Extract the land cover - a potentially long-running server operation.
  var point = ee.Geometry.Point(coords.lon, coords.lat);
  var ex = cur_image.reduce(ee.Reducer.mode());
  var sampledPoint = ex.reduceRegion(ee.Reducer.mode(), point, 110);
  var computedValue = sampledPoint.get('mode');
  // Request the value from the server and use the results in a function.
  computedValue.evaluate(function(result){
    inspector.clear();
    var code = ee.String( ee.Number( result ).int16()).getInfo(); 
    var name = lookup_table.getString( ee.String( ee.Number( result ).int16()) ).getInfo(); 
//    var name = ee.String( ee.Number( result )).getInfo(); 
    // Add a label with the results from the server.
    var name_format = ui.Label({value: code + ' - ' + name, style: {fontWeight: 'bold',textAlign: 'center',stretch: 'horizontal'} });
    var p = ui.Panel([name_format] );
    p.setLayout(ui.Panel.Layout.absolute());
    p.style({position: 'top-center', whiteSpace:'nowrap' });
    inspector.add(p);
    });
  });
};
// Set the default map's cursor to a "crosshair".
Map.style().set('cursor', 'crosshair');
LCquery(cur_image);
// -----------------------------
// Add a panel with a textfield for filtering 
// Create a panel to hold the chart.
var panel = ui.Panel();
panel.style().set({
  width: '250px',
  height: '260px',
  position: 'bottom-left'
});
// Create a select box that allows users to select either the level 1 or level 2 map
panel.add(ui.Label({value: 'Select layer:', style: {fontWeight:"bold"}  }));
// Selection
var select = ui.Select({
  items: Object.keys(layers),
  placeholder: 'Choose a level...',
  onChange: function(key) {
    Map.clear(); // Clear the map
    if(layers[key] == 'terrestrial'){
      var what = 'terrestrial';
      var cur_image = terrestrial;
     Map.addLayer(cur_image.sldStyle(sld_comb), {}, what);
    } else if(layers[key] == 'marine') {
      var what = 'marine';
      var cur_image = marine;
      Map.addLayer(cur_image.sldStyle(sld_marine), {}, what);
    } else if(layers[key] == 'lvl_comb') {
      var what = 'lvl_comb';
      var cur_image = lvl_comb;
      Map.addLayer(cur_image.sldStyle(sld_comb), {}, what);
    } 
    Map.addLayer(koeppen.sldStyle(koep_sdl), {}, 'Köppen-Geiger climate zones',false,0.5);
    Map.add(panel);
    Map.add(inspector);
    LCquery(cur_image); // Add the query script again
  }
});
panel.add(select);
// Create a entry form and button
var textbox = ui.Textbox({
  placeholder: 'Specify class and press enter...',
  style: {stretch: 'horizontal'},
  onChange: function(text) {
    Map.clear();
    var x = select.getValue();
    if(x == 'Combined terrestrial'){cur_image = terrestrial;}
    if(x == 'Combined marine'){cur_image = marine;}
    if(x == 'Both combined'){cur_image = lvl_comb;}
    var sub = cur_image.expression('b(0) == '+ text).selfMask();
    Map.addLayer(sub.randomVisualizer(),{},'Filtered subset');
    Map.addLayer(koeppen.sldStyle(koep_sdl), {}, 'Köppen-Geiger climate zones',false,0.5);
    Map.add(panel);
    Map.add(inspector);
    LCquery(cur_image); // Add the query script again
  }
});
panel.add(ui.Label('Enter a class number to filter the classified map'));
panel.add(textbox);
panel.add(ui.Button({
  label: 'Reset',
  style: {stretch: 'horizontal'},
  onClick: function(){
    Map.clear();
    var cur_image = terrestrial;
    Map.addLayer(cur_image.sldStyle(sld_comb), {}, 'Foodscapes terrestrial clusters');
    Map.addLayer(koeppen.sldStyle(koep_sdl), {}, 'Köppen-Geiger climate zones',false,0.5);
    Map.add(panel);
    Map.add(inspector);
    LCquery(cur_image);
  }
}));
Map.add(panel);
// ----------------------- //
// Create a style for Köppen //
var koep_sdl = '<RasterSymbolizer>' +
 ' <ColorMap  type="intervals" extended="false" >' +
    '<ColorMapEntry color="#0000FF" quantity="1" label="Af"/>' +
    '<ColorMapEntry color="#0078ff" quantity="2" label="Am"/>' +
    '<ColorMapEntry color="#46aafa" quantity="3" label="Aw"/>' +
    '<ColorMapEntry color="#ff0000" quantity="4" label="BWh"/>' +
    '<ColorMapEntry color="#ff9696" quantity="5" label="BSk"/>' +
    '<ColorMapEntry color="#f5a500" quantity="6" label="BSh"/>' +
    '<ColorMapEntry color="#ffdc64" quantity="7" label="BSk"/>' +
    '<ColorMapEntry color="#ffff00" quantity="8" label="CSa"/>' +
    '<ColorMapEntry color="#c8c800" quantity="9" label="Csb"/>' +
    '<ColorMapEntry color="#969600" quantity="10" label="Csc"/>' +
    '<ColorMapEntry color="#96ff96" quantity="11" label="Cwa"/>' +
    '<ColorMapEntry color="#64c864" quantity="12" label="Cwb"/>' +
    '<ColorMapEntry color="#329632" quantity="13" label="Cwc"/>' +
    '<ColorMapEntry color="#c8ff50" quantity="14" label="Cfa"/>' +
    '<ColorMapEntry color="#64ff50" quantity="15" label="Cfb"/>' +
    '<ColorMapEntry color="#32c800" quantity="16" label="Cfc"/>' +
    '<ColorMapEntry color="#ff00ff" quantity="17" label="Dsa"/>' +
    '<ColorMapEntry color="#c800c8" quantity="18" label="Dsb"/>' +
    '<ColorMapEntry color="#963296" quantity="19" label="Dsc"/>' +
    '<ColorMapEntry color="#966496" quantity="20" label="Dsd"/>' +
    '<ColorMapEntry color="#aaafff" quantity="21" label="Dwa"/>' +
    '<ColorMapEntry color="#5a78dc" quantity="22" label="Dwb"/>' +
    '<ColorMapEntry color="#4b50b4" quantity="23" label="Dwc"/>' +
    '<ColorMapEntry color="#320087" quantity="24" label="Dwd"/>' +
    '<ColorMapEntry color="#00ffff" quantity="25" label="Dfa"/>' +
    '<ColorMapEntry color="#37c8ff" quantity="26" label="Dfb"/>' +
    '<ColorMapEntry color="#007d7d" quantity="27" label="Dfc"/>' +
    '<ColorMapEntry color="#00465f" quantity="28" label="Dfd"/>' +
    '<ColorMapEntry color="#b2b2b2" quantity="29" label="ET"/>' +
    '<ColorMapEntry color="#666666" quantity="30" label="EF"/>' +
  '</ColorMap>' +
'</RasterSymbolizer>';
Map.addLayer(koeppen.sldStyle(koep_sdl), {}, 'Köppen-Geiger climate zones',false,0.5);