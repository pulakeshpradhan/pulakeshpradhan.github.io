var roi = ui.import && ui.import("roi", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.65239665506684,
                16.432594670368932
              ],
              [
                -98.65239665506684,
                15.594401574499148
              ],
              [
                -95.11067912576996,
                15.594401574499148
              ],
              [
                -95.11067912576996,
                16.432594670368932
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        }
      ],
      "displayProperties": [
        {
          "type": "rectangle"
        }
      ],
      "properties": {},
      "color": "#d6d6d6",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d6d6d6 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-98.65239665506684, 16.432594670368932],
          [-98.65239665506684, 15.594401574499148],
          [-95.11067912576996, 15.594401574499148],
          [-95.11067912576996, 16.432594670368932]]], null, false),
    loss = ui.import && ui.import("loss", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.17855312894622,
                16.214589365951937
              ],
              [
                -98.17945435117522,
                16.214012449130728
              ],
              [
                -98.1809993035678,
                16.21364157313938
              ],
              [
                -98.18018391202727,
                16.213023444935825
              ],
              [
                -98.17876770566741,
                16.21310586214167
              ],
              [
                -98.17846729825774,
                16.212858610420717
              ],
              [
                -98.1781801126839,
                16.21327069644993
              ],
              [
                -98.17886675819172,
                16.21364157313938
              ],
              [
                -98.1781801126839,
                16.214383324423995
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.18290080055012,
                16.216526145782048
              ],
              [
                -98.18296517356647,
                16.216196482474732
              ],
              [
                -98.18281496986164,
                16.215125072916155
              ],
              [
                -98.18249310477985,
                16.216290889440113
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.07509899177111,
                16.182135545967103
              ],
              [
                -98.07572126426257,
                16.181290635322906
              ],
              [
                -98.07537794150866,
                16.18087848247719
              ],
              [
                -98.07442111845768,
                16.180837267145296
              ],
              [
                -98.07405633803165,
                16.181537926617402
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.46182423235824,
                16.287268058091716
              ],
              [
                -98.46184569003036,
                16.286938513414494
              ],
              [
                -98.46210318209579,
                16.286526581789193
              ],
              [
                -98.46184569003036,
                16.286320615652063
              ],
              [
                -98.4612234175389,
                16.287268058091716
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.4352627323019,
                16.281559014755636
              ],
              [
                -98.43547730902309,
                16.281023488786403
              ],
              [
                -98.43558459738368,
                16.28048796135528
              ],
              [
                -98.43485503653163,
                16.281044085966105
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.4029903934347,
                16.274411682354895
              ],
              [
                -98.4033122585165,
                16.274226301393888
              ],
              [
                -98.40301185110683,
                16.27393793066203
              ],
              [
                -98.4026470706808,
                16.27393793066203
              ],
              [
                -98.40262561300868,
                16.274205703498513
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.01522969710473,
                16.135661070706423
              ],
              [
                -98.01677464949731,
                16.13557862118346
              ],
              [
                -98.01565885054711,
                16.13450677426143
              ],
              [
                -98.01458596694115,
                16.134630449202334
              ],
              [
                -98.01544427382592,
                16.13508392332487
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.0081272076333,
                16.129106226535875
              ],
              [
                -98.00849198805932,
                16.13007503791873
              ],
              [
                -98.00960778700951,
                16.130590361192205
              ],
              [
                -98.01063775527123,
                16.130631586996167
              ],
              [
                -98.01085233199242,
                16.13019871562662
              ],
              [
                -98.0109381626809,
                16.12984829525378
              ],
              [
                -98.00887822615746,
                16.128425994436217
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.01321267592553,
                16.130899554512858
              ],
              [
                -98.01224708068017,
                16.130549135379646
              ],
              [
                -98.01186084258202,
                16.13092016738374
              ],
              [
                -98.01252603041772,
                16.131332424351033
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -98.00971507537011,
                16.13508392332487
              ],
              [
                -98.01057338225488,
                16.133249407978703
              ],
              [
                -98.00988673674706,
                16.133496759353505
              ],
              [
                -98.00872802245263,
                16.133558597148948
              ],
              [
                -98.00821303832177,
                16.134362486732787
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.05201051114653,
                15.808375919402454
              ],
              [
                -96.05102345822905,
                15.806930686969503
              ],
              [
                -96.05102345822905,
                15.806146127898181
              ],
              [
                -96.04999348996733,
                15.80544415141436
              ],
              [
                -96.04947850583648,
                15.805609322570762
              ],
              [
                -96.05003640531157,
                15.807426196394898
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#ff3900",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #ff3900 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[-98.17855312894622, 16.214589365951937],
           [-98.17945435117522, 16.214012449130728],
           [-98.1809993035678, 16.21364157313938],
           [-98.18018391202727, 16.213023444935825],
           [-98.17876770566741, 16.21310586214167],
           [-98.17846729825774, 16.212858610420717],
           [-98.1781801126839, 16.21327069644993],
           [-98.17886675819172, 16.21364157313938],
           [-98.1781801126839, 16.214383324423995]]],
         [[[-98.18290080055012, 16.216526145782048],
           [-98.18296517356647, 16.216196482474732],
           [-98.18281496986164, 16.215125072916155],
           [-98.18249310477985, 16.216290889440113]]],
         [[[-98.07509899177111, 16.182135545967103],
           [-98.07572126426257, 16.181290635322906],
           [-98.07537794150866, 16.18087848247719],
           [-98.07442111845768, 16.180837267145296],
           [-98.07405633803165, 16.181537926617402]]],
         [[[-98.46182423235824, 16.287268058091716],
           [-98.46184569003036, 16.286938513414494],
           [-98.46210318209579, 16.286526581789193],
           [-98.46184569003036, 16.286320615652063],
           [-98.4612234175389, 16.287268058091716]]],
         [[[-98.4352627323019, 16.281559014755636],
           [-98.43547730902309, 16.281023488786403],
           [-98.43558459738368, 16.28048796135528],
           [-98.43485503653163, 16.281044085966105]]],
         [[[-98.4029903934347, 16.274411682354895],
           [-98.4033122585165, 16.274226301393888],
           [-98.40301185110683, 16.27393793066203],
           [-98.4026470706808, 16.27393793066203],
           [-98.40262561300868, 16.274205703498513]]],
         [[[-98.01522969710473, 16.135661070706423],
           [-98.01677464949731, 16.13557862118346],
           [-98.01565885054711, 16.13450677426143],
           [-98.01458596694115, 16.134630449202334],
           [-98.01544427382592, 16.13508392332487]]],
         [[[-98.0081272076333, 16.129106226535875],
           [-98.00849198805932, 16.13007503791873],
           [-98.00960778700951, 16.130590361192205],
           [-98.01063775527123, 16.130631586996167],
           [-98.01085233199242, 16.13019871562662],
           [-98.0109381626809, 16.12984829525378],
           [-98.00887822615746, 16.128425994436217]]],
         [[[-98.01321267592553, 16.130899554512858],
           [-98.01224708068017, 16.130549135379646],
           [-98.01186084258202, 16.13092016738374],
           [-98.01252603041772, 16.131332424351033]]],
         [[[-98.00971507537011, 16.13508392332487],
           [-98.01057338225488, 16.133249407978703],
           [-98.00988673674706, 16.133496759353505],
           [-98.00872802245263, 16.133558597148948],
           [-98.00821303832177, 16.134362486732787]]],
         [[[-96.05201051114653, 15.808375919402454],
           [-96.05102345822905, 15.806930686969503],
           [-96.05102345822905, 15.806146127898181],
           [-96.04999348996733, 15.80544415141436],
           [-96.04947850583648, 15.805609322570762],
           [-96.05003640531157, 15.807426196394898]]]]),
    T1T2ndvi_asset = ui.import && ui.import("T1T2ndvi_asset", "image", {
      "id": "users/alejandromarambio/202203manglar/T1T2ndvi"
    }) || ee.Image("users/alejandromarambio/202203manglar/T1T2ndvi"),
    T2asset = ui.import && ui.import("T2asset", "image", {
      "id": "users/alejandromarambio/202203manglar/T2"
    }) || ee.Image("users/alejandromarambio/202203manglar/T2"),
    T1asset = ui.import && ui.import("T1asset", "image", {
      "id": "users/alejandromarambio/202203manglar/T1"
    }) || ee.Image("users/alejandromarambio/202203manglar/T1");
Map.centerObject(roi, 10);
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var nicfi = ee.ImageCollection('projects/planet-nicfi/assets/basemaps/americas');
// Filter basemaps by date and get the first image from filtered results
var T1= nicfi.filter(ee.Filter.date('2021-01-01','2021-02-25')).median(); //first()
var T2= nicfi.filter(ee.Filter.date('2022-01-01','2022-02-25')).median(); //first()
var T1ndvi = T1.normalizedDifference(['N','R']).rename('NDVI_T1');
var T2ndvi = T2.normalizedDifference(['N','R']).rename('NDVI_T2');
var T1T2ndvi = (T1ndvi.addBands(T2ndvi)); // Red =cleared , blue = grown , white = no change
var vis = {"bands":["R","G","B"],"min":100,"max":1500,"gamma":1};
Map.addLayer(T1asset.clip(roi), vis, '2021',true);
Map.addLayer(T2asset.clip(roi), vis, '2022',true);
Map.addLayer(T1T2ndvi_asset.clip(roi), {"bands":["NDVI_T1","NDVI_T2","NDVI_T2"],"min":0.2,"max":1,"gamma":1}, 'DIFF',false);
Export.image.toAsset({image: T1, description: 'T1', maxPixels: 1e13, scale: 10,crs: 'EPSG:3857', region: roi});
Export.image.toAsset({image: T2, description: 'T2', maxPixels: 1e13, scale: 10,crs: 'EPSG:3857', region: roi});
Export.image.toAsset({image: T1T2ndvi, description: 'T1T2ndvi', maxPixels: 1e13, scale: 10,crs: 'EPSG:3857', region: roi});
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//uso de suelo 2021 sentinel 2
var image = ee.ImageCollection("ESA/WorldCover/v100");
var esa_lc = image.first()
var treecover= esa_lc.eq(10)
var builtup= esa_lc.eq(50)
var wetland= esa_lc.eq(90)
var mangroves= esa_lc.eq(95)
var shrubland= esa_lc.eq(20)
var grassland= esa_lc.eq(30)
var cropland= esa_lc.eq(40)
var water= esa_lc.eq(80)
var dict1 = { // ESA WorldCover
"names": ['Tree cover','Shrubland','Grassland','Cropland','Built-up','Bare / sparse vegetation','Snow and ice',
'Open water','Herbaceous wetland','Mangroves','Moss and lichen'],
"colors": ['006400','ffbb22','ffff4c','f096ff','fa0000','b4b4b4','f0f0f0','0064c8','0096a0','00cf75','fae6a0']};
//Map.addLayer(esa_lc.clip(roi), {}, 'ESA_WC_LC_2020');
Map.addLayer(mangroves.clip(roi), {}, 'manglares',false);
//Export.image.toDrive({image: esa_lc, description: 'esa_lc', maxPixels: 1e13, scale: 10,crs: 'EPSG:3857', region: roi});
//Export.image.toDrive({image: mangroves, description: 'mangroves', maxPixels: 1e13, scale: 10,crs: 'EPSG:3857', region: roi});
//Export.image.toDrive({image: water, description: 'water', maxPixels: 1e13, scale: 10,crs: 'EPSG:3857', region: roi});
///////////////////////////////////////////////////////////////////////////
Map.addLayer(loss, {color: 'red'}, 'pérdidas',false);