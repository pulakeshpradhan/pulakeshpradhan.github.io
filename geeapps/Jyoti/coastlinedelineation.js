var geometry = ui.import && ui.import("geometry", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.69843171122629,
                19.622944086247053
              ],
              [
                72.69843171122629,
                19.577664007022236
              ],
              [
                72.70804474833567,
                19.53625393673162
              ],
              [
                72.71765778544504,
                19.484476413357633
              ],
              [
                72.71628449442942,
                19.42879710663231
              ],
              [
                72.73551056864817,
                19.38475809003813
              ],
              [
                72.73963044169504,
                19.336819742074535
              ],
              [
                72.74100373271067,
                19.27720108562501
              ],
              [
                72.74787018778879,
                19.211076771007136
              ],
              [
                72.76160309794504,
                19.155304224520112
              ],
              [
                72.77258942607004,
                19.100810502001263
              ],
              [
                72.77945588114817,
                19.057981408259234
              ],
              [
                72.76984284403879,
                18.981380623215276
              ],
              [
                72.76846955302317,
                18.926829770708256
              ],
              [
                72.80005524638254,
                18.864464127352363
              ],
              [
                72.81104157450754,
                18.825473813067113
              ],
              [
                72.82258695933974,
                18.76615851185289
              ],
              [
                72.8198403773085,
                18.703733239933154
              ],
              [
                72.814347213246,
                18.625669264903994
              ],
              [
                72.84455961558974,
                18.54496548212571
              ],
              [
                72.8637856898085,
                18.445986231503063
              ],
              [
                72.87202543590224,
                18.339128836211316
              ],
              [
                72.913224166371,
                18.195679798074742
              ],
              [
                72.946183150746,
                18.07300242297813
              ],
              [
                72.99287504527724,
                17.905814553094967
              ],
              [
                73.03682035777724,
                17.830005529698855
              ],
              [
                73.10273832652724,
                17.769858175986297
              ],
              [
                73.16316313121474,
                17.803856997420898
              ],
              [
                73.11921781871474,
                17.90842808024173
              ],
              [
                73.11274390775898,
                17.9471598500102
              ],
              [
                73.15943580229023,
                17.9811247595845
              ],
              [
                73.17042213041523,
                18.041200510912837
              ],
              [
                73.09077125150898,
                18.06209161979447
              ],
              [
                73.03034644682148,
                18.114308519767995
              ],
              [
                73.09351783354023,
                18.12997055678597
              ],
              [
                73.14570289213398,
                18.20565062359638
              ],
              [
                73.09351783354023,
                18.27608183645327
              ],
              [
                73.13471656400898,
                18.35169833822746
              ],
              [
                73.03034644682148,
                18.364732325013428
              ],
              [
                72.97266822416523,
                18.4064344656818
              ],
              [
                72.95344214994648,
                18.45333730237583
              ],
              [
                73.04407935697773,
                18.40382837753381
              ],
              [
                73.09901099760273,
                18.463758416524165
              ],
              [
                73.09626441557148,
                18.510645594528807
              ],
              [
                73.02759986479023,
                18.539292549525452
              ],
              [
                72.95618873197773,
                18.614793302968756
              ],
              [
                72.90675025541523,
                18.705870283262477
              ],
              [
                72.92872291166523,
                18.74228736848422
              ],
              [
                72.97266822416523,
                18.71107320425302
              ],
              [
                73.00562720854023,
                18.640820284839176
              ],
              [
                73.09077125150898,
                18.56533106856711
              ],
              [
                73.15394263822773,
                18.5705382956713
              ],
              [
                73.10175757963398,
                18.674649399063643
              ],
              [
                73.05506568510273,
                18.721478566141403
              ],
              [
                73.08802466947773,
                18.763093606891037
              ],
              [
                73.13196998197773,
                18.861888151032957
              ],
              [
                73.06879859525898,
                18.916460199571198
              ],
              [
                73.03309302885273,
                18.869685246526405
              ],
              [
                73.02485328275898,
                18.934646927496022
              ],
              [
                73.06879859525898,
                19.002180281948128
              ],
              [
                73.05506568510273,
                19.056706453322462
              ],
              [
                73.01386695463398,
                19.090451772893882
              ],
              [
                73.01112037260273,
                19.165704995985827
              ],
              [
                72.96168189604023,
                19.178676222323897
              ],
              [
                72.91499000150898,
                19.103428911319995
              ],
              [
                72.87928443510273,
                19.06189848816341
              ],
              [
                72.84357886869648,
                19.098238178067234
              ],
              [
                72.84357886869648,
                19.16051621961358
              ],
              [
                72.85731177885273,
                19.212396629595286
              ],
              [
                72.86555152494648,
                19.251296199387202
              ],
              [
                72.93970923979023,
                19.246110122520726
              ],
              [
                72.95618873197773,
                19.212396629595286
              ],
              [
                73.03309302885273,
                19.196834223258797
              ],
              [
                73.10999732572773,
                19.246110122520726
              ],
              [
                73.03034644682148,
                19.29842882223813
              ],
              [
                72.96442847807148,
                19.345082693989664
              ],
              [
                72.89301734525898,
                19.365813469934192
              ],
              [
                72.81061988432148,
                19.38395073654986
              ],
              [
                72.78315406400898,
                19.451300030250128
              ],
              [
                72.86555152494648,
                19.492731863745533
              ],
              [
                72.90949683744648,
                19.482374898615607
              ],
              [
                72.96168189604023,
                19.503088166219356
              ],
              [
                72.90675025541523,
                19.60661467981907
              ],
              [
                72.84357886869648,
                19.622137920634938
              ],
              [
                72.81061988432148,
                19.5626240309442
              ],
              [
                72.75843482572773,
                19.56780002494908
              ],
              [
                72.78315406400898,
                19.642833242667486
              ],
              [
                72.73096900541523,
                19.658352983611707
              ],
              [
                72.68977027494648,
                19.65317990342583
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#d63000",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[72.69843171122629, 19.622944086247053],
          [72.69843171122629, 19.577664007022236],
          [72.70804474833567, 19.53625393673162],
          [72.71765778544504, 19.484476413357633],
          [72.71628449442942, 19.42879710663231],
          [72.73551056864817, 19.38475809003813],
          [72.73963044169504, 19.336819742074535],
          [72.74100373271067, 19.27720108562501],
          [72.74787018778879, 19.211076771007136],
          [72.76160309794504, 19.155304224520112],
          [72.77258942607004, 19.100810502001263],
          [72.77945588114817, 19.057981408259234],
          [72.76984284403879, 18.981380623215276],
          [72.76846955302317, 18.926829770708256],
          [72.80005524638254, 18.864464127352363],
          [72.81104157450754, 18.825473813067113],
          [72.82258695933974, 18.76615851185289],
          [72.8198403773085, 18.703733239933154],
          [72.814347213246, 18.625669264903994],
          [72.84455961558974, 18.54496548212571],
          [72.8637856898085, 18.445986231503063],
          [72.87202543590224, 18.339128836211316],
          [72.913224166371, 18.195679798074742],
          [72.946183150746, 18.07300242297813],
          [72.99287504527724, 17.905814553094967],
          [73.03682035777724, 17.830005529698855],
          [73.10273832652724, 17.769858175986297],
          [73.16316313121474, 17.803856997420898],
          [73.11921781871474, 17.90842808024173],
          [73.11274390775898, 17.9471598500102],
          [73.15943580229023, 17.9811247595845],
          [73.17042213041523, 18.041200510912837],
          [73.09077125150898, 18.06209161979447],
          [73.03034644682148, 18.114308519767995],
          [73.09351783354023, 18.12997055678597],
          [73.14570289213398, 18.20565062359638],
          [73.09351783354023, 18.27608183645327],
          [73.13471656400898, 18.35169833822746],
          [73.03034644682148, 18.364732325013428],
          [72.97266822416523, 18.4064344656818],
          [72.95344214994648, 18.45333730237583],
          [73.04407935697773, 18.40382837753381],
          [73.09901099760273, 18.463758416524165],
          [73.09626441557148, 18.510645594528807],
          [73.02759986479023, 18.539292549525452],
          [72.95618873197773, 18.614793302968756],
          [72.90675025541523, 18.705870283262477],
          [72.92872291166523, 18.74228736848422],
          [72.97266822416523, 18.71107320425302],
          [73.00562720854023, 18.640820284839176],
          [73.09077125150898, 18.56533106856711],
          [73.15394263822773, 18.5705382956713],
          [73.10175757963398, 18.674649399063643],
          [73.05506568510273, 18.721478566141403],
          [73.08802466947773, 18.763093606891037],
          [73.13196998197773, 18.861888151032957],
          [73.06879859525898, 18.916460199571198],
          [73.03309302885273, 18.869685246526405],
          [73.02485328275898, 18.934646927496022],
          [73.06879859525898, 19.002180281948128],
          [73.05506568510273, 19.056706453322462],
          [73.01386695463398, 19.090451772893882],
          [73.01112037260273, 19.165704995985827],
          [72.96168189604023, 19.178676222323897],
          [72.91499000150898, 19.103428911319995],
          [72.87928443510273, 19.06189848816341],
          [72.84357886869648, 19.098238178067234],
          [72.84357886869648, 19.16051621961358],
          [72.85731177885273, 19.212396629595286],
          [72.86555152494648, 19.251296199387202],
          [72.93970923979023, 19.246110122520726],
          [72.95618873197773, 19.212396629595286],
          [73.03309302885273, 19.196834223258797],
          [73.10999732572773, 19.246110122520726],
          [73.03034644682148, 19.29842882223813],
          [72.96442847807148, 19.345082693989664],
          [72.89301734525898, 19.365813469934192],
          [72.81061988432148, 19.38395073654986],
          [72.78315406400898, 19.451300030250128],
          [72.86555152494648, 19.492731863745533],
          [72.90949683744648, 19.482374898615607],
          [72.96168189604023, 19.503088166219356],
          [72.90675025541523, 19.60661467981907],
          [72.84357886869648, 19.622137920634938],
          [72.81061988432148, 19.5626240309442],
          [72.75843482572773, 19.56780002494908],
          [72.78315406400898, 19.642833242667486],
          [72.73096900541523, 19.658352983611707],
          [72.68977027494648, 19.65317990342583]]]);
// Define a color palette for the three classes: Negative (Red) - accretion, Zero (Transparent), Positive (Green) - erosion
var palette = ['FF0000', '00FF00']; // Red, Transparent, Green
// Create a visualization parameter dictionary for the images
var imageVisParams = {
  min: -1,  // Minimum pixel value for the negative class (adjust as needed)
  max: 1,   // Maximum pixel value for the positive class (adjust as needed)
  palette: palette
};
// Display Assets for Mumbai
// Define app title
var appTitle = ui.Label({
  value: 'Mumbai Tide Visualization',
  style: {
    fontWeight: 'bold',
    fontSize: '24px',
    margin: '10px 0',
  }
});
// Load vector assets
var asset1 = ee.FeatureCollection('users/Jyoti/WRI_coastline/final_app_vectors/Historical_hightide_1990-03-09_line_shp');
var asset2 = ee.FeatureCollection('users/Jyoti/WRI_coastline/final_app_vectors/Historical_lowtide_1989-12-19_line_shp');
var asset3 = ee.FeatureCollection('users/Jyoti/WRI_coastline/final_app_vectors/Recent_hightide_2018-01-17_line_shp');
var asset4 = ee.FeatureCollection('users/Jyoti/WRI_coastline/final_app_vectors/Recent_lowtide_2020-12-08_line_shp');
// Load your image assets from the GEE assets
var highImage = ee.Image('users/Jyoti/WRI_coastline/tidal_changes/high_tide_changes');
highImage=highImage.mask(highImage.neq(0)).clip(geometry)
var lowImage = ee.Image('users/Jyoti/WRI_coastline/tidal_changes/low_tide_changes');
lowImage=lowImage.mask(lowImage.neq(0)).clip(geometry)
// Define the polygon for Mumbai
var mumbaiPolygon = ee.Geometry.Polygon([
  // Mumbai polygon coordinates
  [
    [72.7411, 18.8914],
    [72.9799, 18.8914],
    [72.9799, 19.2873],
    [72.7411, 19.2873],
  ]
]);
// Create a dropdown menu for asset selection
var assetDropdown = ui.Select({
  items: [
    'High Tide Historic',
    'Low Tide Historic',
    'High Tide Current',
    'Low Tide Current',
    'High Tide Changes',
    'Low Tide Changes',
    'Historical Comparison - Low Tide',  // New option
    'Historical Comparison - High Tide', // New option
    'Historical Coastline - 1990s',     // New option
    'Current Coastline - 2018s',        // New option
    'All'
  ],
  value: 'All', // Set the default option to show all assets
});
// Create a panel for the description and dropdowns
var descriptionPanel = ui.Panel({
  style: {
    width: '300px',
    padding: '10px',
    backgroundColor: '#f9f9f9',
    position: 'top-right',
    margin: '10px',
  }
});
// Add app title to the description panel
descriptionPanel.add(appTitle);
// Add app description to the description panel
descriptionPanel.add(ui.Label({
  value: 'This Google Earth Engine app enables the visualization of satellite-derived high and low tide lines for Mumbai on the map. The delineation is based on the availability of cloud-free satellite data and is also limited in areas with mangroves. Accretion includes: natural or land extension and reclamation. Choose the assets to display using the dropdown below.',
  style: {
    fontSize: '14px',
    margin: '0 0 10px 0',
  }
}));
// Add asset dropdown to the description panel
descriptionPanel.add(ui.Label('Select Asset:'));
descriptionPanel.add(assetDropdown);
// Add the description panel to the user interface
ui.root.add(descriptionPanel);
// Center the map on Mumbai
Map.centerObject(mumbaiPolygon, 10);
// Create a legend for the image
var imageLegend = ui.Panel({
  style: {
    position: 'bottom-right',
    padding: '8px 15px',
  }
});
// Create legend title for the image
var imageLegendTitle = ui.Label({
  value: 'Legend',
  style: {
    fontWeight: 'bold',
    fontSize: '18px',
  }
});
// Create a legend entry for the "High Tide Changes" with sub-entries for "Erosion" and "Accretion"
var highTideChangesLegend = ui.Panel({
  layout: ui.Panel.Layout.flow('vertical'),
});
// Sub-entry for Erosion
var erosionLegend = ui.Label({
  value: 'Accretion',
  style: { color: 'FF0000' }, // Red color for Erosion
});
// Sub-entry for Accretion
var accretionLegend = ui.Label({
  value: 'Erosion',
  style: { color: '00FF00' }, // Green color for Accretion
});
// Add sub-entries to the "High Tide Changes" entry
highTideChangesLegend.add(erosionLegend);
highTideChangesLegend.add(accretionLegend);
// Add the "High Tide Changes" entry with sub-entries to the legend
imageLegend.add(imageLegendTitle);
imageLegend.add(highTideChangesLegend);
// Create a legend for the vector assets
var vectorLegend = ui.Panel({
  style: {
    position: 'bottom-right',
    padding: '8px 15px',
  }
});
// Create legend title for the vector assets
var vectorLegendTitle = ui.Label({
  value: 'Vector Assets',
  style: {
    fontWeight: 'bold',
    fontSize: '18px',
  }
});
// Create the legend entries for vector assets
var highTideHistoricLegend = ui.Label({
  value: 'High Tide Historic',
  style: { color: 'FF0000' },
});
var lowTideHistoricLegend = ui.Label({
  value: 'Low Tide Historic',
  style: { color: '0000FF' },
});
var highTideCurrentLegend = ui.Label({
  value: 'High Tide Current',
  style: { color: '#FFA500' },
});
var lowTideCurrentLegend = ui.Label({
  value: 'Low Tide Current',
  style: { color: '#0096FF' },
});
// Add legend entries to the panel for vector assets
vectorLegend.add(vectorLegendTitle);
vectorLegend.add(highTideHistoricLegend);
vectorLegend.add(lowTideHistoricLegend);
vectorLegend.add(highTideCurrentLegend);
vectorLegend.add(lowTideCurrentLegend);
// Add the legend panels to the map
Map.add(imageLegend);
Map.add(vectorLegend);
// Update the map layers function to include both image assets on top
function updateMapLayers() {
  // Clear the map
  Map.layers().reset();
  // Add the image layers with the specified visualization parameters on top
  var selectedOption = assetDropdown.getValue();
  if (selectedOption === 'High Tide Changes' || selectedOption === 'All') {
    Map.layers().set(0, ui.Map.Layer(highImage, imageVisParams, 'High Tide Changes'));
  }
  if (selectedOption === 'Low Tide Changes' || selectedOption === 'All') {
    Map.layers().set(1, ui.Map.Layer(lowImage, imageVisParams, 'Low Tide Changes'));
  }
  // Add the selected assets on the map (vector layers)
  if (selectedOption === 'High Tide Historic' || selectedOption === 'All') {
    Map.addLayer(asset1, { color: 'FF0000' }, 'High Tide Historic');
  }
  if (selectedOption === 'Low Tide Historic' || selectedOption === 'All') {
    Map.addLayer(asset2, { color: '0000FF' }, 'Low Tide Historic');
  }
  if (selectedOption === 'High Tide Current' || selectedOption === 'All') {
    Map.addLayer(asset3, { color: '#FFA500' }, 'High Tide Current');
  }
  if (selectedOption === 'Low Tide Current' || selectedOption === 'All') {
    Map.addLayer(asset4, { color: '#0096FF' }, 'Low Tide Current');
  }
  // Handle the new options with correct colors
  if (selectedOption === 'Historical Comparison - Low Tide' || selectedOption === 'All') {
    // Load low tide layers from both historic and current
    Map.addLayer(asset2, { color: '0000FF' }, 'Low Tide Historic');
    Map.addLayer(asset4, { color: '#0096FF' }, 'Low Tide Current');
  }
  if (selectedOption === 'Historical Comparison - High Tide' || selectedOption === 'All') {
    // Load high tide layers from both historic and current
    Map.addLayer(asset1, { color: 'FF0000' }, 'High Tide Historic');
    Map.addLayer(asset3, { color: '#FFA500' }, 'High Tide Current');
  }
  if (selectedOption === 'Historical Coastline - 1990s' || selectedOption === 'All') {
    // Load high tide and low tide layers from historic data
    Map.addLayer(asset1, { color: 'FF0000' }, 'High Tide Historic');
    Map.addLayer(asset2, { color: '0000FF' }, 'Low Tide Historic');
  }
  if (selectedOption === 'Current Coastline - 2018s' || selectedOption === 'All') {
    // Load high tide and low tide layers from current data
    Map.addLayer(asset3, { color: '#FFA500' }, 'High Tide Current');
    Map.addLayer(asset4, { color: '#0096FF' }, 'Low Tide Current');
  }
}
// Add an observer to the asset dropdown to update the map when the selection changes
assetDropdown.onChange(updateMapLayers);
// Initialize the map layers
updateMapLayers();