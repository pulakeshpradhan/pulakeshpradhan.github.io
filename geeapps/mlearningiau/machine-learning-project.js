var urbano = ui.import && ui.import("urbano", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.986339672877484,
                -22.676441081580414
              ],
              [
                -46.986339672877484,
                -22.67899511886276
              ],
              [
                -46.984859093501264,
                -22.67899511886276
              ],
              [
                -46.984859093501264,
                -22.676441081580414
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.00688281263484,
                -22.6879588597448
              ],
              [
                -47.00525202955379,
                -22.685701953563207
              ],
              [
                -47.00598159040584,
                -22.68514762004427
              ],
              [
                -47.007826950208084,
                -22.68744413002747
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.992849495068924,
                -22.689225878505148
              ],
              [
                -46.991562034741776,
                -22.68981978951667
              ],
              [
                -46.98975959028377,
                -22.68835480436572
              ],
              [
                -46.99096121992244,
                -22.68784007613545
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.98837115507263,
                -22.696197041476125
              ],
              [
                -46.98734118681091,
                -22.695385400225707
              ],
              [
                -46.988950512219844,
                -22.69344536019341
              ],
              [
                -46.990409633923946,
                -22.69433619831314
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.99992727020916,
                -22.687473937450868
              ],
              [
                -46.99627946594891,
                -22.690007972223956
              ],
              [
                -46.99567865112957,
                -22.685810951667975
              ],
              [
                -46.99743818024334,
                -22.684543901338156
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.00507711151776,
                -22.69452160559251
              ],
              [
                -47.005849587714046,
                -22.69646163038482
              ],
              [
                -47.00327466705975,
                -22.69745142836826
              ],
              [
                -47.00275968292889,
                -22.696144893519726
              ],
              [
                -47.001600968634456,
                -22.69661999854275
              ],
              [
                -47.00104306915936,
                -22.69436323500887
              ],
              [
                -47.001643883978694,
                -22.694125678790165
              ],
              [
                -47.00125764588055,
                -22.693135856778728
              ],
              [
                -47.00331758240399,
                -22.693492193526627
              ],
              [
                -47.00357507446942,
                -22.694719568564604
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.98108743408856,
                -22.67995074571543
              ],
              [
                -46.982417809759944,
                -22.682880880006216
              ],
              [
                -46.9814736721867,
                -22.68446471030364
              ],
              [
                -46.980186211859554,
                -22.682484919572566
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.0034463284367,
                -22.67610979916768
              ],
              [
                -47.00627874115643,
                -22.68050510024937
              ],
              [
                -47.00520585755047,
                -22.68090106640128
              ],
              [
                -47.00125764588055,
                -22.679831955166545
              ],
              [
                -47.00044225434002,
                -22.676584973644573
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "cobertura": 1
      },
      "color": "#d63000",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.986339672877484, -22.676441081580414],
                  [-46.986339672877484, -22.67899511886276],
                  [-46.984859093501264, -22.67899511886276],
                  [-46.984859093501264, -22.676441081580414]]], null, false),
            {
              "cobertura": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.00688281263484, -22.6879588597448],
                  [-47.00525202955379, -22.685701953563207],
                  [-47.00598159040584, -22.68514762004427],
                  [-47.007826950208084, -22.68744413002747]]]),
            {
              "cobertura": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.992849495068924, -22.689225878505148],
                  [-46.991562034741776, -22.68981978951667],
                  [-46.98975959028377, -22.68835480436572],
                  [-46.99096121992244, -22.68784007613545]]]),
            {
              "cobertura": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.98837115507263, -22.696197041476125],
                  [-46.98734118681091, -22.695385400225707],
                  [-46.988950512219844, -22.69344536019341],
                  [-46.990409633923946, -22.69433619831314]]]),
            {
              "cobertura": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.99992727020916, -22.687473937450868],
                  [-46.99627946594891, -22.690007972223956],
                  [-46.99567865112957, -22.685810951667975],
                  [-46.99743818024334, -22.684543901338156]]]),
            {
              "cobertura": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.00507711151776, -22.69452160559251],
                  [-47.005849587714046, -22.69646163038482],
                  [-47.00327466705975, -22.69745142836826],
                  [-47.00275968292889, -22.696144893519726],
                  [-47.001600968634456, -22.69661999854275],
                  [-47.00104306915936, -22.69436323500887],
                  [-47.001643883978694, -22.694125678790165],
                  [-47.00125764588055, -22.693135856778728],
                  [-47.00331758240399, -22.693492193526627],
                  [-47.00357507446942, -22.694719568564604]]]),
            {
              "cobertura": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.98108743408856, -22.67995074571543],
                  [-46.982417809759944, -22.682880880006216],
                  [-46.9814736721867, -22.68446471030364],
                  [-46.980186211859554, -22.682484919572566]]]),
            {
              "cobertura": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.0034463284367, -22.67610979916768],
                  [-47.00627874115643, -22.68050510024937],
                  [-47.00520585755047, -22.68090106640128],
                  [-47.00125764588055, -22.679831955166545],
                  [-47.00044225434002, -22.676584973644573]]]),
            {
              "cobertura": 1,
              "system:index": "7"
            })]),
    vegetacao_natural = ui.import && ui.import("vegetacao_natural", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.97267641645234,
                -22.695941454676394
              ],
              [
                -46.97267641645234,
                -22.700118369436307
              ],
              [
                -46.970230241830755,
                -22.700118369436307
              ],
              [
                -46.970230241830755,
                -22.695941454676394
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.967857829420176,
                -22.711687705365573
              ],
              [
                -46.967857829420176,
                -22.714161911788505
              ],
              [
                -46.96528290876588,
                -22.714161911788505
              ],
              [
                -46.96528290876588,
                -22.711687705365573
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.99891148174586,
                -22.713229360528498
              ],
              [
                -46.99891148174586,
                -22.716237955779384
              ],
              [
                -46.99640093410792,
                -22.716237955779384
              ],
              [
                -46.99640093410792,
                -22.713229360528498
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.023684364207405,
                -22.714496145536703
              ],
              [
                -47.023684364207405,
                -22.71598064429807
              ],
              [
                -47.021216731913704,
                -22.71598064429807
              ],
              [
                -47.021216731913704,
                -22.714496145536703
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.03652180007316,
                -22.682554030031305
              ],
              [
                -47.03652180007316,
                -22.683741907302267
              ],
              [
                -47.03506267836906,
                -22.683741907302267
              ],
              [
                -47.03506267836906,
                -22.682554030031305
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "cobertura": 2
      },
      "color": "#049e0b",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || /* color: #049e0b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.97267641645234, -22.695941454676394],
                  [-46.97267641645234, -22.700118369436307],
                  [-46.970230241830755, -22.700118369436307],
                  [-46.970230241830755, -22.695941454676394]]], null, false),
            {
              "cobertura": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.967857829420176, -22.711687705365573],
                  [-46.967857829420176, -22.714161911788505],
                  [-46.96528290876588, -22.714161911788505],
                  [-46.96528290876588, -22.711687705365573]]], null, false),
            {
              "cobertura": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.99891148174586, -22.713229360528498],
                  [-46.99891148174586, -22.716237955779384],
                  [-46.99640093410792, -22.716237955779384],
                  [-46.99640093410792, -22.713229360528498]]], null, false),
            {
              "cobertura": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.023684364207405, -22.714496145536703],
                  [-47.023684364207405, -22.71598064429807],
                  [-47.021216731913704, -22.71598064429807],
                  [-47.021216731913704, -22.714496145536703]]], null, false),
            {
              "cobertura": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.03652180007316, -22.682554030031305],
                  [-47.03652180007316, -22.683741907302267],
                  [-47.03506267836906, -22.683741907302267],
                  [-47.03506267836906, -22.682554030031305]]], null, false),
            {
              "cobertura": 2,
              "system:index": "4"
            })]),
    pastagem = ui.import && ui.import("pastagem", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.028079000512285,
                -22.684714201574142
              ],
              [
                -47.0267486248409,
                -22.684308347542963
              ],
              [
                -47.02663060764424,
                -22.68287300047603
              ],
              [
                -47.028079000512285,
                -22.68291259645877
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.01318821028687,
                -22.729624874473718
              ],
              [
                -47.008810845174565,
                -22.72914988399276
              ],
              [
                -47.00868209914185,
                -22.726972823182482
              ],
              [
                -47.013295498647466,
                -22.727507195862845
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.97857168169573,
                -22.735376965784326
              ],
              [
                -46.97826054723968,
                -22.733576037591913
              ],
              [
                -46.979719660549534,
                -22.733486980087747
              ],
              [
                -46.9799771511332,
                -22.735297804603988
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.98034775582272,
                -22.729736649746545
              ],
              [
                -46.978711608323636,
                -22.73110718482988
              ],
              [
                -46.97802496281582,
                -22.730567878439576
              ],
              [
                -46.97938752499539,
                -22.729518946158787
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.010755022978955,
                -22.688502838746967
              ],
              [
                -47.008008440947705,
                -22.689908431394286
              ],
              [
                -47.007021388030225,
                -22.68862162178188
              ],
              [
                -47.00987525842207,
                -22.68705763690946
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.00637765786665,
                -22.689334317829292
              ],
              [
                -47.00369544885176,
                -22.69115563533346
              ],
              [
                -47.002772768950635,
                -22.690145994924514
              ],
              [
                -47.005283316588574,
                -22.68838405560911
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "cobertura": 3
      },
      "color": "#81c350",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || /* color: #81c350 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.028079000512285, -22.684714201574142],
                  [-47.0267486248409, -22.684308347542963],
                  [-47.02663060764424, -22.68287300047603],
                  [-47.028079000512285, -22.68291259645877]]]),
            {
              "cobertura": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.01318821028687, -22.729624874473718],
                  [-47.008810845174565, -22.72914988399276],
                  [-47.00868209914185, -22.726972823182482],
                  [-47.013295498647466, -22.727507195862845]]]),
            {
              "cobertura": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.97857168169573, -22.735376965784326],
                  [-46.97826054723968, -22.733576037591913],
                  [-46.979719660549534, -22.733486980087747],
                  [-46.9799771511332, -22.735297804603988]]]),
            {
              "cobertura": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.98034775582272, -22.729736649746545],
                  [-46.978711608323636, -22.73110718482988],
                  [-46.97802496281582, -22.730567878439576],
                  [-46.97938752499539, -22.729518946158787]]]),
            {
              "cobertura": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.010755022978955, -22.688502838746967],
                  [-47.008008440947705, -22.689908431394286],
                  [-47.007021388030225, -22.68862162178188],
                  [-47.00987525842207, -22.68705763690946]]]),
            {
              "cobertura": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.00637765786665, -22.689334317829292],
                  [-47.00369544885176, -22.69115563533346],
                  [-47.002772768950635, -22.690145994924514],
                  [-47.005283316588574, -22.68838405560911]]]),
            {
              "cobertura": 3,
              "system:index": "5"
            })]),
    culturas = ui.import && ui.import("culturas", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.042543429875344,
                -22.70820235181993
              ],
              [
                -47.038251895451516,
                -22.710102594715647
              ],
              [
                -47.036063212895364,
                -22.70762831492486
              ],
              [
                -47.04041912033555,
                -22.70566865359996
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.03800930076704,
                -22.705001305832514
              ],
              [
                -47.03517688804731,
                -22.706208783122946
              ],
              [
                -47.033803597031685,
                -22.704486640144545
              ],
              [
                -47.03672184043989,
                -22.70347709798448
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.045293110647556,
                -22.68980815132847
              ],
              [
                -47.044070023336765,
                -22.69095637208298
              ],
              [
                -47.04140927199399,
                -22.68881829812859
              ],
              [
                -47.04312588576352,
                -22.687194923403485
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.045967692240225,
                -22.675486883056315
              ],
              [
                -47.04427253614281,
                -22.675744270604852
              ],
              [
                -47.043242567881094,
                -22.677011402261797
              ],
              [
                -47.04182636152123,
                -22.676278843200507
              ],
              [
                -47.0415688694558,
                -22.674457328031295
              ],
              [
                -47.04487335096215,
                -22.67378415325899
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.04614725903332,
                -22.68584347084989
              ],
              [
                -47.04520312146008,
                -22.686001851280007
              ],
              [
                -47.04434481457531,
                -22.686833345535536
              ],
              [
                -47.043958576477166,
                -22.68641759903832
              ],
              [
                -47.046254547393914,
                -22.68433884763629
              ],
              [
                -47.04689827755749,
                -22.68552670944064
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "cobertura": 4
      },
      "color": "#aaff09",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || /* color: #aaff09 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.042543429875344, -22.70820235181993],
                  [-47.038251895451516, -22.710102594715647],
                  [-47.036063212895364, -22.70762831492486],
                  [-47.04041912033555, -22.70566865359996]]]),
            {
              "cobertura": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.03800930076704, -22.705001305832514],
                  [-47.03517688804731, -22.706208783122946],
                  [-47.033803597031685, -22.704486640144545],
                  [-47.03672184043989, -22.70347709798448]]]),
            {
              "cobertura": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.045293110647556, -22.68980815132847],
                  [-47.044070023336765, -22.69095637208298],
                  [-47.04140927199399, -22.68881829812859],
                  [-47.04312588576352, -22.687194923403485]]]),
            {
              "cobertura": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.045967692240225, -22.675486883056315],
                  [-47.04427253614281, -22.675744270604852],
                  [-47.043242567881094, -22.677011402261797],
                  [-47.04182636152123, -22.676278843200507],
                  [-47.0415688694558, -22.674457328031295],
                  [-47.04487335096215, -22.67378415325899]]]),
            {
              "cobertura": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.04614725903332, -22.68584347084989],
                  [-47.04520312146008, -22.686001851280007],
                  [-47.04434481457531, -22.686833345535536],
                  [-47.043958576477166, -22.68641759903832],
                  [-47.046254547393914, -22.68433884763629],
                  [-47.04689827755749, -22.68552670944064]]]),
            {
              "cobertura": 4,
              "system:index": "4"
            })]),
    solo_exposto = ui.import && ui.import("solo_exposto", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.05421703835939,
                -22.689569942337645
              ],
              [
                -47.05329435845827,
                -22.689550145309294
              ],
              [
                -47.05322998544191,
                -22.686699343371565
              ],
              [
                -47.05466764947389,
                -22.686580558670613
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.05265062829469,
                -22.686003337798887
              ],
              [
                -47.05147045632814,
                -22.68598354025534
              ],
              [
                -47.05147045632814,
                -22.684637300586136
              ],
              [
                -47.053079781737075,
                -22.684696693791498
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.00467195443669,
                -22.670063468432712
              ],
              [
                -47.0068177216486,
                -22.669984269035055
              ],
              [
                -47.00688209466496,
                -22.67067726221421
              ],
              [
                -47.00814809731999,
                -22.670598063170928
              ],
              [
                -47.00810518197575,
                -22.671291053249096
              ],
              [
                -47.0043500893549,
                -22.671330652576394
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.94071952441103,
                -22.662592798941326
              ],
              [
                -46.9375437889374,
                -22.66453327556471
              ],
              [
                -46.93649236300356,
                -22.663404634336864
              ],
              [
                -46.93975392916567,
                -22.661464141752656
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.9489989115665,
                -22.657094562129494
              ],
              [
                -46.94663857171945,
                -22.655866852423408
              ],
              [
                -46.94854830123212,
                -22.655550022329475
              ],
              [
                -46.94938514899603,
                -22.656500510417093
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.021741351103955,
                -22.693075911267755
              ],
              [
                -47.020518263793164,
                -22.692976928630014
              ],
              [
                -47.02062555215376,
                -22.690383558042928
              ],
              [
                -47.02279277703779,
                -22.690383558042928
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "cobertura": 5
      },
      "color": "#ffbf00",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || /* color: #ffbf00 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.05421703835939, -22.689569942337645],
                  [-47.05329435845827, -22.689550145309294],
                  [-47.05322998544191, -22.686699343371565],
                  [-47.05466764947389, -22.686580558670613]]]),
            {
              "cobertura": 5,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.05265062829469, -22.686003337798887],
                  [-47.05147045632814, -22.68598354025534],
                  [-47.05147045632814, -22.684637300586136],
                  [-47.053079781737075, -22.684696693791498]]]),
            {
              "cobertura": 5,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.00467195443669, -22.670063468432712],
                  [-47.0068177216486, -22.669984269035055],
                  [-47.00688209466496, -22.67067726221421],
                  [-47.00814809731999, -22.670598063170928],
                  [-47.00810518197575, -22.671291053249096],
                  [-47.0043500893549, -22.671330652576394]]]),
            {
              "cobertura": 5,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.94071952441103, -22.662592798941326],
                  [-46.9375437889374, -22.66453327556471],
                  [-46.93649236300356, -22.663404634336864],
                  [-46.93975392916567, -22.661464141752656]]]),
            {
              "cobertura": 5,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.9489989115665, -22.657094562129494],
                  [-46.94663857171945, -22.655866852423408],
                  [-46.94854830123212, -22.655550022329475],
                  [-46.94938514899603, -22.656500510417093]]]),
            {
              "cobertura": 5,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.021741351103955, -22.693075911267755],
                  [-47.020518263793164, -22.692976928630014],
                  [-47.02062555215376, -22.690383558042928],
                  [-47.02279277703779, -22.690383558042928]]]),
            {
              "cobertura": 5,
              "system:index": "5"
            })]),
    limites_ca = ui.import && ui.import("limites_ca", "table", {
      "id": "users/mlearningiau/municipios"
    }) || ee.FeatureCollection("users/mlearningiau/municipios"),
    agua = ui.import && ui.import("agua", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.9934764353514,
                -22.722722680811597
              ],
              [
                -46.9934764353514,
                -22.723316446552147
              ],
              [
                -46.99239282290938,
                -22.723316446552147
              ],
              [
                -46.99239282290938,
                -22.722722680811597
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.049318777866475,
                -22.697172906716347
              ],
              [
                -47.049318777866475,
                -22.698024128992902
              ],
              [
                -47.04792402917873,
                -22.698024128992902
              ],
              [
                -47.04792402917873,
                -22.697172906716347
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -47.032950811331865,
                -22.688806286185486
              ],
              [
                -47.032950811331865,
                -22.68973674847655
              ],
              [
                -47.03159897798836,
                -22.68973674847655
              ],
              [
                -47.03159897798836,
                -22.688806286185486
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.994686593699086,
                -22.65770857640564
              ],
              [
                -46.994686593699086,
                -22.658421433111887
              ],
              [
                -46.99410723655187,
                -22.658421433111887
              ],
              [
                -46.99410723655187,
                -22.65770857640564
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.99466513602697,
                -22.65967882411023
              ],
              [
                -46.99466513602697,
                -22.660490676744768
              ],
              [
                -46.9942574402567,
                -22.660490676744768
              ],
              [
                -46.9942574402567,
                -22.65967882411023
              ]
            ]
          ],
          "geodesic": false,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.9721276515475,
                -22.66485510168984
              ],
              [
                -46.97193453249843,
                -22.66517191085074
              ],
              [
                -46.97145173487575,
                -22.664538291797427
              ],
              [
                -46.9716233962527,
                -22.664310584235412
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.96466038165004,
                -22.662657217995598
              ],
              [
                -46.96522900833018,
                -22.663003733725475
              ],
              [
                -46.96571180758388,
                -22.663508654595145
              ],
              [
                -46.96622679171474,
                -22.664241281858914
              ],
              [
                -46.96577618060024,
                -22.66536991620483
              ],
              [
                -46.965540146206926,
                -22.66574612559035
              ],
              [
                -46.96442434725673,
                -22.66566692370018
              ],
              [
                -46.96320125994594,
                -22.66527091356351
              ],
              [
                -46.96245024142177,
                -22.664874902283835
              ],
              [
                -46.96165630755336,
                -22.66408287629551
              ],
              [
                -46.96123788294704,
                -22.663736363487992
              ],
              [
                -46.9607443564883,
                -22.663340347779293
              ],
              [
                -46.9601864570132,
                -22.66318194117581
              ],
              [
                -46.959328150128435,
                -22.662785923867027
              ],
              [
                -46.95866296229274,
                -22.6626077157052
              ],
              [
                -46.95812652048976,
                -22.662449308255955
              ],
              [
                -46.957568621014666,
                -22.662409706365064
              ],
              [
                -46.95720384058864,
                -22.66252851200344
              ],
              [
                -46.95696780619533,
                -22.662449308255955
              ],
              [
                -46.956839060162615,
                -22.661736472471418
              ],
              [
                -46.95694634852321,
                -22.661380053190566
              ],
              [
                -46.95713946757228,
                -22.661182042078977
              ],
              [
                -46.957590078686785,
                -22.66096422952623
              ],
              [
                -46.957804655407976,
                -22.660568205817356
              ],
              [
                -46.95812652048976,
                -22.66025138602745
              ],
              [
                -46.958319639538836,
                -22.66031078979377
              ],
              [
                -46.9587273353091,
                -22.660389994775528
              ],
              [
                -46.959070658063006,
                -22.660568205817356
              ],
              [
                -46.95943543848903,
                -22.660746416627777
              ],
              [
                -46.95971438822658,
                -22.660825621358118
              ],
              [
                -46.95997188029201,
                -22.661182042078977
              ],
              [
                -46.96014354166896,
                -22.66157806401643
              ],
              [
                -46.9602937453738,
                -22.661875079719536
              ],
              [
                -46.96052977976711,
                -22.66207308983111
              ],
              [
                -46.96093747553737,
                -22.662231497714654
              ],
              [
                -46.9616455787173,
                -22.662053288832816
              ],
              [
                -46.96196744379909,
                -22.661835477662923
              ],
              [
                -46.96241805491359,
                -22.661498859720375
              ],
              [
                -46.962589716290545,
                -22.661221644324144
              ],
              [
                -46.96286866602809,
                -22.66112263868978
              ],
              [
                -46.96323344645412,
                -22.661182042078977
              ],
              [
                -46.9636625998965,
                -22.661221644324144
              ],
              [
                -46.963834261273455,
                -22.661261246557885
              ],
              [
                -46.964091753338884,
                -22.661657268266787
              ],
              [
                -46.96415612635524,
                -22.662033487831657
              ],
              [
                -46.964327787732195,
                -22.662310701587856
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -46.97902727699212,
                -22.67519576277019
              ],
              [
                -46.97902727699212,
                -22.676462899495526
              ],
              [
                -46.97859812354974,
                -22.677056865804897
              ],
              [
                -46.977181917189874,
                -22.67668068744102
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "cobertura": 6
      },
      "color": "#037dff",
      "mode": "FeatureCollection",
      "shown": true,
      "locked": false
    }) || /* color: #037dff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.9934764353514, -22.722722680811597],
                  [-46.9934764353514, -22.723316446552147],
                  [-46.99239282290938, -22.723316446552147],
                  [-46.99239282290938, -22.722722680811597]]], null, false),
            {
              "cobertura": 6,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.049318777866475, -22.697172906716347],
                  [-47.049318777866475, -22.698024128992902],
                  [-47.04792402917873, -22.698024128992902],
                  [-47.04792402917873, -22.697172906716347]]], null, false),
            {
              "cobertura": 6,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.032950811331865, -22.688806286185486],
                  [-47.032950811331865, -22.68973674847655],
                  [-47.03159897798836, -22.68973674847655],
                  [-47.03159897798836, -22.688806286185486]]], null, false),
            {
              "cobertura": 6,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.994686593699086, -22.65770857640564],
                  [-46.994686593699086, -22.658421433111887],
                  [-46.99410723655187, -22.658421433111887],
                  [-46.99410723655187, -22.65770857640564]]], null, false),
            {
              "cobertura": 6,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.99466513602697, -22.65967882411023],
                  [-46.99466513602697, -22.660490676744768],
                  [-46.9942574402567, -22.660490676744768],
                  [-46.9942574402567, -22.65967882411023]]], null, false),
            {
              "cobertura": 6,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.9721276515475, -22.66485510168984],
                  [-46.97193453249843, -22.66517191085074],
                  [-46.97145173487575, -22.664538291797427],
                  [-46.9716233962527, -22.664310584235412]]]),
            {
              "cobertura": 6,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.96466038165004, -22.662657217995598],
                  [-46.96522900833018, -22.663003733725475],
                  [-46.96571180758388, -22.663508654595145],
                  [-46.96622679171474, -22.664241281858914],
                  [-46.96577618060024, -22.66536991620483],
                  [-46.965540146206926, -22.66574612559035],
                  [-46.96442434725673, -22.66566692370018],
                  [-46.96320125994594, -22.66527091356351],
                  [-46.96245024142177, -22.664874902283835],
                  [-46.96165630755336, -22.66408287629551],
                  [-46.96123788294704, -22.663736363487992],
                  [-46.9607443564883, -22.663340347779293],
                  [-46.9601864570132, -22.66318194117581],
                  [-46.959328150128435, -22.662785923867027],
                  [-46.95866296229274, -22.6626077157052],
                  [-46.95812652048976, -22.662449308255955],
                  [-46.957568621014666, -22.662409706365064],
                  [-46.95720384058864, -22.66252851200344],
                  [-46.95696780619533, -22.662449308255955],
                  [-46.956839060162615, -22.661736472471418],
                  [-46.95694634852321, -22.661380053190566],
                  [-46.95713946757228, -22.661182042078977],
                  [-46.957590078686785, -22.66096422952623],
                  [-46.957804655407976, -22.660568205817356],
                  [-46.95812652048976, -22.66025138602745],
                  [-46.958319639538836, -22.66031078979377],
                  [-46.9587273353091, -22.660389994775528],
                  [-46.959070658063006, -22.660568205817356],
                  [-46.95943543848903, -22.660746416627777],
                  [-46.95971438822658, -22.660825621358118],
                  [-46.95997188029201, -22.661182042078977],
                  [-46.96014354166896, -22.66157806401643],
                  [-46.9602937453738, -22.661875079719536],
                  [-46.96052977976711, -22.66207308983111],
                  [-46.96093747553737, -22.662231497714654],
                  [-46.9616455787173, -22.662053288832816],
                  [-46.96196744379909, -22.661835477662923],
                  [-46.96241805491359, -22.661498859720375],
                  [-46.962589716290545, -22.661221644324144],
                  [-46.96286866602809, -22.66112263868978],
                  [-46.96323344645412, -22.661182042078977],
                  [-46.9636625998965, -22.661221644324144],
                  [-46.963834261273455, -22.661261246557885],
                  [-46.964091753338884, -22.661657268266787],
                  [-46.96415612635524, -22.662033487831657],
                  [-46.964327787732195, -22.662310701587856]]]),
            {
              "cobertura": 6,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.97902727699212, -22.67519576277019],
                  [-46.97902727699212, -22.676462899495526],
                  [-46.97859812354974, -22.677056865804897],
                  [-46.977181917189874, -22.67668068744102]]]),
            {
              "cobertura": 6,
              "system:index": "7"
            })]),
    geo = ui.import && ui.import("geo", "table", {
      "id": "users/mlearningiau/Geodiversidade"
    }) || ee.FeatureCollection("users/mlearningiau/Geodiversidade"),
    pedo = ui.import && ui.import("pedo", "table", {
      "id": "users/mlearningiau/Pedologico"
    }) || ee.FeatureCollection("users/mlearningiau/Pedologico"),
    bacias = ui.import && ui.import("bacias", "table", {
      "id": "users/mlearningiau/Subbacias"
    }) || ee.FeatureCollection("users/mlearningiau/Subbacias"),
    turismo = ui.import && ui.import("turismo", "table", {
      "id": "users/mlearningiau/Turismo"
    }) || ee.FeatureCollection("users/mlearningiau/Turismo"),
    curvas = ui.import && ui.import("curvas", "imageCollection", {
      "id": "users/mlearningiau/cartasIGC"
    }) || ee.ImageCollection("users/mlearningiau/cartasIGC");
//****(MENU)*****
var panel = ui.Panel({style: {width: '280px'}});
ui.root.add(panel);
var map = ui.Map();
map.style().set('cursor', 'crosshair');
//Inserção da logo através do método ui.Chart (utilizando HTML)
var table = ui.Chart(
    [
      ['<h6><b>Projeto Machine Learning</b></h6>'],
      ['<img src=https://livreopiniaoportal.files.wordpress.com/2014/08/iau2.jpg width=230px>']
    ],
    'Table', {allowHtml: true});
panel.add(ui.Panel(table));
// Definição de constantes
var AGUAS_DE_LINDOIA = 'ÁGUAS DE LINDÓIA';
var AMPARO = 'AMPARO';
var HOLAMBRA = 'HOLAMBRA';
var JAGUARIUNA = 'JAGUARIÚNA';
var LINDOIA = 'LINDÓIA';
var MONTE_ALEGRE_DO_SUL = 'MONTE ALEGRE DO SUL';
var PEDREIRA = 'PEDREIRA';
var SERRA_NEGRA = 'SERRA NEGRA';
var SOCORRO = 'SOCORRO';
var TODAS = 'TODOS'
var cidade = TODAS;
var dateinicial = '2017-01-01';
var datefinal = '2017-12-31';
// ***CLASSIFICAÇÃO***
function classificacao(){
Map.clear();
Map.drawingTools().setShown(false);
var area_estudo = limites_ca  //limites_ca serve para classificar toda a área
  if (cidade != TODAS) { 
    area_estudo = limites_ca.filter(ee.Filter.eq('NM_MUNICIP', cidade)) 
      }
var area_treino = limites_ca.filter(ee.Filter.eq('NM_MUNICIP', JAGUARIUNA))
Map.centerObject(area_estudo);
// Classifica as imagens pelo mínimo de pixel nublado % e seleci
var s2image_treino = ee.ImageCollection('COPERNICUS/S2')
                   .filterDate('2018-01-01','2018-12-31')
                   .filterBounds(area_treino)                   
                   .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 10))
                   .sort('CLOUDY_PIXEL_PERCENTAGE')
                   .map(function(img){
                    var t = img.select(['B4','B3','B2','B1','B5','B6','B7','B8','B8A', 'B9','B10', 'B11','B12']).divide(10000);
                    var out = t.copyProperties(img).copyProperties(img,['system:time_start']);
                   return out;
                     });
// Obtém a imagem menos nublada
var s2leastCloud_treino = s2image_treino.median();
var reflec_min_treino = s2leastCloud_treino.clip(area_treino);
// Agrupamento das amostras em um único arquivo
var amostras = urbano.merge(vegetacao_natural).merge(pastagem).merge(culturas).merge(solo_exposto).merge(agua);
// Propriedade das amostras
var classe = 'cobertura';
 // Preparação para o treinamento do classificador
var treinamento = reflec_min_treino.sampleRegions({
collection: amostras,
properties: [classe],
scale: 30,
geometries: true
});
// Treinamento das amostras
var classificador = ee.Classifier.libsvm().train({
features: treinamento,
classProperty: classe,
});
print(classificador,treinamento);
/* ----Imagem do Ano a Classificar----*/
// Classifica as imagens pelo mínimo de pixel nublado% e seleciona as bandas
var s2image_class = ee.ImageCollection('COPERNICUS/S2')
                   .filterDate(dateinicial, datefinal)
                   .filterBounds(limites_ca)
                   .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 10))
                   .sort('CLOUDY_PIXEL_PERCENTAGE')
                   .map(function(img){
                     var t = img.select(['B4','B3','B2','B1','B5','B6','B7','B8','B8A', 'B9','B10', 'B11','B12']).divide(10000);//Rescale to 0-1
                     var out = t.copyProperties(img).copyProperties(img,['system:time_start']);
                   return out;
                     });
print(s2image_class,'s2image class')
// Obtém a imagem menos nublada
var s2leastCloud_class = s2image_class.median();
var reflec_min_class = s2leastCloud_class.clip(area_estudo);
var mapa = s2leastCloud_class.select('B4', 'B3', 'B2').clip(area_estudo);
// Aplicar classificação
var classificada = reflec_min_class.classify(classificador);
print(classificada,'Classificação');
// Definição da paleta de cores para cada classe
var paletaDeClasses = [
'red', // urbano
'darkgreen', // vegetação natural
'lightgreen', // pastagem
'lime', //culturas
'orange', // solo exposto
'blue', // água
];
// ***NDVI***
// Parâmetros de visualização
var visParams = {bands: ['B8', 'B4', 'B3'], max: 3048, gamma: 1};
var visParams_ndvi = {min: -0.2, max: 1, palette: 'FFFFFF, CE7E45, DF923D, F1B555, FCD163, 99B718, 74A901, 66A000, 529400,' + '3E8601, 207401, 056201, 004C00, 023B01, 012E01, 011D01, 011301'};
// Cálculo do NDVI
var image = reflec_min_class.clip(area_estudo);
var image_ndvi = image.normalizedDifference(['B8','B4']);
//// Cálculo de áreas das classes (retorna lista com valores)
//var class_area = ee.Image.pixelArea().addBands(classificada)
// .reduceRegion({
//   reducer: ee.Reducer.sum().group({
//     groupField: 1,
//     groupName: 'amostras',
//   }),
//   geometry: area_estudo,
//   scale: 30, 
//   maxPixels: 1e9
// }).get('groups');
//
//print('Area por Classe (m2)', class_area);
//
// Resultados do Mapa
Map.centerObject(area_estudo);
Map.addLayer(image_ndvi,visParams_ndvi,'NDVI ' + dateinicial + ' à ' + datefinal);
Map.addLayer(mapa,{bands: ['B4', 'B3', 'B2'], min: 0, max: 0.3},'Satélite ' + dateinicial + ' à ' + datefinal);
Map.addLayer(classificada, {min: 1, max: 6, palette: paletaDeClasses}, 'Classificação '+ cidade);
//Shapes Importados
Map.addLayer(curvas,{bands:["b1"] , max: 1 ,opacity: 0.40, palette:['black', 'white']},'Curvas 5m')  
Map.addLayer(geo,{color:'mediumpurple'},'Geodiversidade');
Map.addLayer(pedo,{color:'brown'},'Pedologia');
Map.addLayer(bacias,{color:'darkblue'},'Sub-bacias Hidrográficas');
Map.addLayer(turismo,{color:'forestgreen'},'Turismo Rural');
var lista = Map.layers();
print(lista,'layers');
// ***LEGENDA***
//Adição de legenda para facilitar a interpretação
//Posição do Painel
var legend = ui.Panel({
 style: {
   position: 'bottom-left',
   padding: '8px 15px'
 }
});
// Título da legenda
var legendTitle = ui.Label({
 value: 'Classificação',
 style: {
   fontWeight: 'bold',
   fontSize: '18px',
   margin: '0 0 4px 0',
   padding: '0'
   }
});
// Adiciona o título ao painel na tela
legend.add(legendTitle);
// Cria os estilos da legenda
var makeRow = function(color, name) {
     // Rótulos da legenda
     var colorBox = ui.Label({
         style: {
         backgroundColor: '#' + color,
         // Tamanho
         padding: '8px',
         margin: '0 0 4px 0'
       }
     });
     // Descrição
     var description = ui.Label({
             value: name,
           style: {margin: '0 0 4px 6px'}
     });
     // Retorna o painel
     return ui.Panel({
           widgets: [colorBox, description],
           layout: ui.Panel.Layout.Flow('horizontal')
     });
};
//  Paleta de cores para a legenda (em hexadecimal)
var palette =['FF0000','006400','90EE90','00FF00','FFA500','0000FF'];
// Nomes para a legenda
var names = ['Urbano','Vegetação Natural','Pastagens','Culturas','Solo Exposto','Água'];
// Concatenação de Paletas
for (var i = 0; i < 6; i++) {
legend.add(makeRow(palette[i], names[i]));
 } 
// Adiciona a legenda ao mapa
Map.add(legend);
}
//***COMBOBOX MUNICÍPIOS***
// Cria um seletor de camada que determina qual camada está visível no mapa.
var select = ui.Select({
items: [TODAS, AGUAS_DE_LINDOIA, AMPARO, HOLAMBRA, JAGUARIUNA, LINDOIA, MONTE_ALEGRE_DO_SUL, PEDREIRA, SERRA_NEGRA, SOCORRO],
     value: TODAS,
     onChange: redraw,
});
panel.add(ui.Label('Escolha o Município:')).add(select);
var select2 = ui.Select({
 items: ['2016-01-01', '2016-12-31', '2017-01-01', '2017-12-31', '2018-01-01', '2018-12-31', '2019-01-01', '2019-12-31'],
     value: '2018-01-01',
     onChange: redraw,
});
panel.add(ui.Label('Escolha a data de início:')).add(select2);
var select3 = ui.Select({
 items: ['2016-01-01', '2016-12-31', '2017-12-31', '2017-12-31', '2018-01-01', '2018-12-31', '2019-01-01', '2019-12-31'],
     value: '2018-12-31',
     onChange: redraw,
});
panel.add(ui.Label('Escolha a data de fim:')).add(select3);
// Cria uma função para renderizar uma camada de mapa configurada pelas entradas do usuário.
 function redraw() {
     cidade = select.getValue();
     dateinicial = select2.getValue();
     datefinal = select3.getValue();
}
// Botão 'gerar mapa', chama as funções redraw(atribui os valores do menu) e classificação (classifica de acordo com redraw)
panel.add(ui.Button({label: 'Gerar mapa ',
    style: {stretch: 'horizontal'}, 
    "onClick": function (){
  redraw();
     classificacao();
 }}));
//***CheckBox Visualização***
var cb_00 = ui.Checkbox('NDVI', true);
var cb_01 = ui.Checkbox('Imegens do Satélite', true);
var cb_02 = ui.Checkbox('Classificação', true);
var cb_03 = ui.Checkbox('Curvas de Nível (5m)', true);
var cb_04 = ui.Checkbox('Geodiversidade', true);
var cb_05 = ui.Checkbox('Solos (Pedologia)', true);
var cb_06 = ui.Checkbox('Sub-bacias Hidrográficas', true);
var cb_07 = ui.Checkbox('Turismo Rural', true);
cb_00.onChange(function(checked) {Map.layers().get(0).setShown(checked);});
cb_01.onChange(function(checked) {Map.layers().get(1).setShown(checked);});
cb_02.onChange(function(checked) {Map.layers().get(2).setShown(checked);});
cb_03.onChange(function(checked) {Map.layers().get(3).setShown(checked);});
cb_04.onChange(function(checked) {Map.layers().get(4).setShown(checked);});
cb_05.onChange(function(checked) {Map.layers().get(5).setShown(checked);});
cb_06.onChange(function(checked) {Map.layers().get(6).setShown(checked);});
cb_07.onChange(function(checked) {Map.layers().get(7).setShown(checked);});
var checkbox = ui.Panel([cb_00,cb_01,cb_02,cb_03,cb_04,cb_05,cb_06,cb_07])
panel.add(ui.Label('Visualizar:')).add(checkbox); 
Map.centerObject(limites_ca)
alert( 'Antes de gerar o mapa confira se a data inicial é anterior a final.\n Aperte "Run" duas vezes caso a tela permaneça branca.\n                               Aperte "OK" para continuar')