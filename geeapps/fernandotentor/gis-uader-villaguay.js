var json = { "type": "FeatureCollection", "name": "canal_final", "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } }, "features": [ { "type": "Feature", "properties": { "id": 0 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.8386211, -34.02752123 ], [ -62.8387447, -34.02761124 ], [ -62.83886938, -34.02770452 ], [ -62.83900738, -34.02780632 ], [ -62.83913728, -34.0279031 ], [ -62.83927249, -34.02800351 ], [ -62.83939036, -34.02809137 ], [ -62.83951953, -34.02818585 ] ] } }, { "type": "Feature", "properties": { "id": 1 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.84010663, -34.02846252 ], [ -62.84146078, -34.02844009 ] ] } }, { "type": "Feature", "properties": { "id": 2 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.84010693, -34.02847601 ], [ -62.84146109, -34.02845358 ] ] } }, { "type": "Feature", "properties": { "id": 3 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.84010596, -34.02843285 ], [ -62.84131075, -34.02841289 ] ] } }, { "type": "Feature", "properties": { "id": 4 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.8401076, -34.02850568 ], [ -62.84131302, -34.02848571 ] ] } }, { "type": "Feature", "properties": { "id": 5 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.82836255, -33.8734708 ], [ -62.82818385, -33.87323407 ], [ -62.82816226, -33.87321015 ], [ -62.82813619, -33.87318955 ], [ -62.82810638, -33.87317284 ], [ -62.82807364, -33.87316048 ], [ -62.82803889, -33.87315281 ], [ -62.82800699, -33.8731481 ] ] } }, { "type": "Feature", "properties": { "id": 6 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.83014654, -33.87350378 ], [ -62.82896862, -33.87354143 ] ] } }, { "type": "Feature", "properties": { "id": 7 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.82896862, -33.87354143 ], [ -62.82879552, -33.87354697 ], [ -62.82855353, -33.8735547 ], [ -62.82852127, -33.87355372 ], [ -62.82848954, -33.87354875 ], [ -62.82845907, -33.87353989 ], [ -62.82843052, -33.87352735 ], [ -62.82840455, -33.87351141 ], [ -62.82838172, -33.87349242 ], [ -62.82836255, -33.8734708 ] ] } }, { "type": "Feature", "properties": { "id": 8 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88860988, -34.02269272 ], [ -62.88870736, -34.0225645 ] ] } }, { "type": "Feature", "properties": { "id": 9 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88861981, -34.02268976 ], [ -62.88871718, -34.02256168 ] ] } }, { "type": "Feature", "properties": { "id": 10 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88853256, -34.0227187 ], [ -62.88871059, -34.02248453 ] ] } }, { "type": "Feature", "properties": { "id": 11 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88862036, -34.02276476 ], [ -62.88879085, -34.0225405 ] ] } }, { "type": "Feature", "properties": { "id": 12 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.90415796, -34.00735654 ], [ -62.90416516, -34.00730995 ] ] } }, { "type": "Feature", "properties": { "id": 13 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.89637742, -34.01649817 ], [ -62.89652362, -34.01627688 ] ] } }, { "type": "Feature", "properties": { "id": 14 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.89641535, -34.01651546 ], [ -62.89656155, -34.01629417 ] ] } }, { "type": "Feature", "properties": { "id": 15 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.89643802, -34.01642511 ], [ -62.89648955, -34.01634713 ] ] } }, { "type": "Feature", "properties": { "id": 16 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.8888185, -34.0224486 ], [ -62.88886986, -34.02238104 ], [ -62.88891906, -34.02232179 ], [ -62.88897388, -34.02226605 ], [ -62.88903396, -34.02221418 ], [ -62.88909889, -34.02216654 ], [ -62.88916826, -34.02212342 ], [ -62.8892416, -34.02208512 ], [ -62.88987608, -34.02178292 ], [ -62.88988709, -34.02177764 ], [ -62.89074786, -34.02136208 ], [ -62.89084457, -34.02131811 ], [ -62.89146557, -34.02105269 ], [ -62.89158092, -34.02099967 ], [ -62.89169222, -34.02094095 ], [ -62.89179906, -34.02087676 ], [ -62.89189272, -34.02081683 ] ] } }, { "type": "Feature", "properties": { "id": 17 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88885691, -34.02246875 ], [ -62.88890828, -34.02240119 ], [ -62.88895538, -34.02234446 ], [ -62.88900786, -34.0222911 ], [ -62.88906537, -34.02224145 ], [ -62.88912754, -34.02219583 ], [ -62.88919395, -34.02215455 ], [ -62.88926416, -34.02211789 ], [ -62.88989864, -34.02181568 ], [ -62.88990988, -34.02181029 ], [ -62.89077066, -34.02139474 ], [ -62.89086531, -34.0213517 ], [ -62.89148631, -34.02108628 ], [ -62.89160407, -34.02103215 ], [ -62.89171769, -34.02097221 ], [ -62.89182676, -34.02090668 ], [ -62.89192041, -34.02084675 ] ] } }, { "type": "Feature", "properties": { "id": 18 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88879106, -34.02243421 ], [ -62.88884243, -34.02236665 ], [ -62.88889313, -34.02230559 ], [ -62.88894961, -34.02224815 ], [ -62.88901152, -34.02219471 ], [ -62.88907843, -34.02214561 ], [ -62.88914991, -34.02210118 ], [ -62.88922548, -34.02206172 ], [ -62.88985996, -34.02175951 ], [ -62.88987081, -34.02175431 ], [ -62.89073159, -34.02133876 ], [ -62.89082975, -34.02129412 ], [ -62.89145075, -34.0210287 ], [ -62.89156439, -34.02097647 ], [ -62.89167403, -34.02091863 ], [ -62.89177928, -34.02085539 ], [ -62.89187293, -34.02079546 ] ] } }, { "type": "Feature", "properties": { "id": 19 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88875265, -34.02241406 ], [ -62.88880402, -34.0223465 ], [ -62.88885681, -34.02228292 ], [ -62.88891564, -34.0222231 ], [ -62.8889801, -34.02216745 ], [ -62.88904978, -34.02211632 ], [ -62.88912422, -34.02207005 ], [ -62.88920292, -34.02202895 ], [ -62.8898374, -34.02172675 ], [ -62.88984802, -34.02172166 ], [ -62.89070879, -34.0213061 ], [ -62.890809, -34.02126054 ], [ -62.89143, -34.02099512 ], [ -62.89154124, -34.02094399 ], [ -62.89164856, -34.02088737 ], [ -62.89175158, -34.02082547 ], [ -62.89184524, -34.02076555 ] ] } }, { "type": "Feature", "properties": { "id": 20 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.8888185, -34.0224486 ], [ -62.88886986, -34.02238104 ], [ -62.88891906, -34.02232179 ], [ -62.88897388, -34.02226605 ], [ -62.88903396, -34.02221418 ], [ -62.88909889, -34.02216654 ], [ -62.88916826, -34.02212342 ], [ -62.8892416, -34.02208512 ], [ -62.88987608, -34.02178292 ], [ -62.88988709, -34.02177764 ], [ -62.89074786, -34.02136208 ], [ -62.89084457, -34.02131811 ], [ -62.89146557, -34.02105269 ], [ -62.89158092, -34.02099967 ], [ -62.89169222, -34.02094095 ], [ -62.89179906, -34.02087676 ], [ -62.89189272, -34.02081683 ] ] } }, { "type": "Feature", "properties": { "id": 21 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88885691, -34.02246875 ], [ -62.88890828, -34.02240119 ], [ -62.88895538, -34.02234446 ], [ -62.88900786, -34.0222911 ], [ -62.88906537, -34.02224145 ], [ -62.88912754, -34.02219583 ], [ -62.88919395, -34.02215455 ], [ -62.88926416, -34.02211789 ], [ -62.88989864, -34.02181568 ], [ -62.88990988, -34.02181029 ], [ -62.89077066, -34.02139474 ], [ -62.89086531, -34.0213517 ], [ -62.89148631, -34.02108628 ], [ -62.89160407, -34.02103215 ], [ -62.89171769, -34.02097221 ], [ -62.89182676, -34.02090668 ], [ -62.89192041, -34.02084675 ] ] } }, { "type": "Feature", "properties": { "id": 22 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88879106, -34.02243421 ], [ -62.88884243, -34.02236665 ], [ -62.88889313, -34.02230559 ], [ -62.88894961, -34.02224815 ], [ -62.88901152, -34.02219471 ], [ -62.88907843, -34.02214561 ], [ -62.88914991, -34.02210118 ], [ -62.88922548, -34.02206172 ], [ -62.88985996, -34.02175951 ], [ -62.88987081, -34.02175431 ], [ -62.89073159, -34.02133876 ], [ -62.89082975, -34.02129412 ], [ -62.89145075, -34.0210287 ], [ -62.89156439, -34.02097647 ], [ -62.89167403, -34.02091863 ], [ -62.89177928, -34.02085539 ], [ -62.89187293, -34.02079546 ] ] } }, { "type": "Feature", "properties": { "id": 23 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.88875265, -34.02241406 ], [ -62.88880402, -34.0223465 ], [ -62.88885681, -34.02228292 ], [ -62.88891564, -34.0222231 ], [ -62.8889801, -34.02216745 ], [ -62.88904978, -34.02211632 ], [ -62.88912422, -34.02207005 ], [ -62.88920292, -34.02202895 ], [ -62.8898374, -34.02172675 ], [ -62.88984802, -34.02172166 ], [ -62.89070879, -34.0213061 ], [ -62.890809, -34.02126054 ], [ -62.89143, -34.02099512 ], [ -62.89154124, -34.02094399 ], [ -62.89164856, -34.02088737 ], [ -62.89175158, -34.02082547 ], [ -62.89184524, -34.02076555 ] ] } }, { "type": "Feature", "properties": { "id": 24 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.67341081, -33.86930951 ], [ -62.67339735, -33.86929488 ] ] } }, { "type": "Feature", "properties": { "id": 25 }, "geometry": { "type": "LineString", "coordinates": [ [ -62.67342368, -33.86930129 ], [ -62.67341022, -33.86928666 ] ] } }, { "type": "Feature", "properties": { "id": 26 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.91984077, -33.90765423 ], [ -61.91714773, -33.90576166 ], [ -61.91428445, -33.89666438 ], [ -61.89837039, -33.88164869 ], [ -61.8973946, -33.88099481 ], [ -61.90331994, -33.87343328 ], [ -61.90239556, -33.87281183 ], [ -61.90074058, -33.86866323 ], [ -61.90054767, -33.86844634 ], [ -61.89979626, -33.86815385 ], [ -61.8984792, -33.86648092 ], [ -61.89824731, -33.86627027 ], [ -61.89803783, -33.86590792 ], [ -61.89797458, -33.86565201 ], [ -61.89794817, -33.86543733 ], [ -61.89794256, -33.8651253 ], [ -61.89794123, -33.86485614 ], [ -61.89676469, -33.8642279 ], [ -61.89661948, -33.86408789 ], [ -61.89662764, -33.86396196 ], [ -61.89943366, -33.86081804 ], [ -61.89820627, -33.85877604 ] ] } }, { "type": "Feature", "properties": { "id": 27 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.91984077, -33.90765423 ], [ -61.92276087, -33.90955701 ], [ -61.92366936, -33.91147213 ], [ -61.92398067, -33.9118627 ], [ -61.92434342, -33.91222891 ], [ -61.92437119, -33.91276717 ], [ -61.9244989, -33.91336597 ], [ -61.92582134, -33.91436605 ], [ -61.92664869, -33.91533759 ], [ -61.92706114, -33.9163438 ], [ -61.92898119, -33.91850841 ], [ -61.93023308, -33.91955644 ], [ -61.93385792, -33.9220871 ], [ -61.93555427, -33.92254824 ], [ -61.93793622, -33.92307683 ], [ -61.93940258, -33.92349629 ], [ -61.94090305, -33.9245078 ], [ -61.94243118, -33.92517153 ], [ -61.94360563, -33.92589839 ], [ -61.95139226, -33.92769784 ], [ -61.95383479, -33.92902914 ], [ -61.95555753, -33.93476571 ], [ -61.96049476, -33.94330761 ] ] } }, { "type": "Feature", "properties": { "id": 28 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.89820627, -33.85877604 ], [ -61.89422976, -33.85689686 ] ] } }, { "type": "Feature", "properties": { "id": 29 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96049476, -33.94330761 ], [ -61.97136132, -33.94170494 ], [ -61.97341671, -33.94036798 ], [ -61.97403738, -33.93889203 ], [ -61.97492039, -33.93821823 ], [ -61.97566028, -33.93772704 ], [ -61.97596154, -33.93711334 ], [ -61.97587551, -33.93655644 ], [ -61.97602785, -33.93597299 ], [ -61.97558582, -33.93489004 ], [ -61.97556039, -33.93428111 ], [ -61.97700312, -33.93374839 ], [ -61.97767357, -33.9324996 ], [ -61.97777409, -33.93222177 ], [ -61.97960793, -33.93315142 ], [ -61.97986851, -33.93298435 ], [ -61.98088135, -33.93349353 ], [ -61.98133483, -33.93307885 ], [ -61.98227858, -33.93339323 ], [ -61.9830385, -33.93330454 ], [ -61.98454914, -33.93408162 ], [ -61.9859057, -33.93312124 ], [ -61.98779892, -33.93353356 ], [ -61.99247442, -33.93368341 ] ] } }, { "type": "Feature", "properties": { "id": 30 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96947855, -33.95945259 ], [ -61.96944753, -33.9591087 ], [ -61.96868663, -33.95856609 ], [ -61.96797084, -33.95801328 ], [ -61.96723491, -33.95708406 ], [ -61.96680496, -33.9561441 ], [ -61.96687325, -33.95597674 ], [ -61.96660425, -33.95563978 ], [ -61.96560537, -33.95462376 ], [ -61.9641747, -33.95349913 ], [ -61.96049496, -33.94331656 ] ] } }, { "type": "Feature", "properties": { "id": 31 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96056637, -33.94337903 ], [ -61.97617392, -33.92324928 ], [ -61.97474548, -33.92242173 ], [ -61.97388807, -33.91789638 ], [ -61.97382114, -33.91693047 ], [ -61.97373009, -33.91627924 ], [ -61.97378536, -33.91593008 ], [ -61.97383375, -33.91526283 ], [ -61.97365162, -33.91340552 ], [ -61.97371662, -33.91231373 ], [ -61.97472137, -33.91147826 ], [ -61.97523715, -33.91104857 ], [ -61.97539822, -33.91083189 ], [ -61.97556858, -33.91064686 ], [ -61.97609875, -33.91050909 ], [ -61.97956234, -33.91000338 ], [ -61.98354785, -33.90743894 ], [ -61.98469227, -33.90704942 ], [ -61.98757116, -33.90873475 ] ] } }, { "type": "Feature", "properties": { "id": 32 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.8966194, -33.86408781 ], [ -61.89560479, -33.86414379 ], [ -61.89504082, -33.86508085 ], [ -61.8949496, -33.86531823 ], [ -61.89479553, -33.86639816 ], [ -61.89365124, -33.86756623 ] ] } }, { "type": "Feature", "properties": { "id": 33 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.89820622, -33.85877595 ], [ -61.89422976, -33.85689686 ], [ -61.89402531, -33.85678545 ], [ -61.8924198, -33.85568831 ], [ -61.8914561, -33.85492491 ], [ -61.88356123, -33.85123013 ], [ -61.87911876, -33.85072807 ], [ -61.87254198, -33.85301038 ], [ -61.86897208, -33.85754457 ], [ -61.86265047, -33.86552219 ], [ -61.86189908, -33.86624012 ], [ -61.8610262, -33.86682511 ], [ -61.85982188, -33.86744161 ], [ -61.85593771, -33.86944062 ], [ -61.85311759, -33.87071286 ], [ -61.84885558, -33.87231878 ], [ -61.84417411, -33.89760715 ], [ -61.84538488, -33.90212929 ], [ -61.84665514, -33.90588961 ], [ -61.8467808, -33.90719512 ], [ -61.84975656, -33.91054632 ], [ -61.85137833, -33.9141651 ], [ -61.85324973, -33.91648031 ], [ -61.85422328, -33.91784294 ], [ -61.85441524, -33.91927651 ], [ -61.85738739, -33.92705865 ], [ -61.85914765, -33.93419266 ], [ -61.85331352, -33.93927069 ] ] } }, { "type": "Feature", "properties": { "id": 34 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.84885558, -33.87231878 ], [ -61.84812587, -33.86187247 ], [ -61.84792656, -33.86099386 ], [ -61.84768138, -33.85900709 ], [ -61.8480573, -33.85714895 ], [ -61.84873662, -33.85524019 ], [ -61.84962055, -33.85381069 ], [ -61.85026444, -33.85347769 ], [ -61.85076544, -33.85297746 ], [ -61.85095805, -33.85224238 ], [ -61.85078871, -33.85085545 ], [ -61.85243122, -33.84963028 ], [ -61.85384448, -33.84811411 ], [ -61.85307725, -33.83819293 ], [ -61.85269958, -33.83630375 ], [ -61.85224649, -33.83541657 ], [ -61.85229951, -33.83462449 ], [ -61.85239825, -33.82789474 ] ] } }, { "type": "Feature", "properties": { "id": 35 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.89820622, -33.85877595 ], [ -61.900454, -33.85625525 ], [ -61.90062865, -33.85526674 ], [ -61.90081683, -33.85415471 ], [ -61.90101571, -33.85366905 ], [ -61.90107621, -33.85314671 ], [ -61.90126111, -33.85200914 ], [ -61.90134526, -33.85119205 ], [ -61.90207068, -33.85034828 ], [ -61.90225549, -33.84879558 ], [ -61.90405907, -33.84535808 ], [ -61.90509561, -33.84316193 ], [ -61.90748651, -33.84010065 ], [ -61.90758099, -33.83969621 ], [ -61.90913588, -33.83927572 ], [ -61.91074612, -33.83792722 ], [ -61.91200968, -33.8369782 ], [ -61.91269956, -33.83665791 ], [ -61.91330484, -33.83662191 ], [ -61.91435978, -33.83673111 ], [ -61.9144699, -33.83599202 ], [ -61.91466744, -33.8354357 ], [ -61.91574065, -33.83519334 ], [ -61.9199053, -33.82969743 ], [ -61.91973521, -33.82943904 ], [ -61.91967925, -33.82932879 ], [ -61.91970815, -33.82913095 ] ] } }, { "type": "Feature", "properties": { "id": 36 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.91699748, -33.86464533 ], [ -61.91650192, -33.86520725 ], [ -61.91183934, -33.86261531 ], [ -61.90792565, -33.86760283 ] ] } }, { "type": "Feature", "properties": { "id": 37 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.90792565, -33.86760283 ], [ -61.90331994, -33.87343328 ] ] } }, { "type": "Feature", "properties": { "id": 38 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.90792336, -33.8676016 ], [ -61.93398208, -33.88149392 ] ] } }, { "type": "Feature", "properties": { "id": 39 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.93198118, -33.88572943 ], [ -61.93482088, -33.88209322 ], [ -61.93387927, -33.88161419 ], [ -61.93398208, -33.88149392 ] ] } }, { "type": "Feature", "properties": { "id": 40 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96421399, -33.96648222 ], [ -61.96444092, -33.96699177 ], [ -61.96456561, -33.9674391 ], [ -61.96467419, -33.9678364 ], [ -61.96495794, -33.96909774 ], [ -61.96490499, -33.97077243 ], [ -61.96411242, -33.97142413 ], [ -61.96406398, -33.97154115 ], [ -61.96400702, -33.9717173 ], [ -61.96387523, -33.97202689 ], [ -61.96377442, -33.97217637 ], [ -61.9636868, -33.97242963 ], [ -61.96363246, -33.97282528 ], [ -61.96335163, -33.97383897 ] ] } }, { "type": "Feature", "properties": { "id": 41 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96335163, -33.97383897 ], [ -61.96348201, -33.97501335 ], [ -61.96431147, -33.97605612 ] ] } }, { "type": "Feature", "properties": { "id": 42 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96335163, -33.97383897 ], [ -61.96247088, -33.97372654 ], [ -61.96222177, -33.97371789 ], [ -61.96192733, -33.97385787 ], [ -61.96155776, -33.9740943 ], [ -61.96116738, -33.97424841 ], [ -61.96081414, -33.97435512 ], [ -61.9604771, -33.97431869 ], [ -61.9600539, -33.9741084 ], [ -61.95929477, -33.97364647 ] ] } }, { "type": "Feature", "properties": { "id": 43 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96947855, -33.95945259 ], [ -61.96974704, -33.95978982 ], [ -61.96992424, -33.95992854 ], [ -61.97023702, -33.96045104 ], [ -61.97029316, -33.96073067 ], [ -61.97062381, -33.96106563 ], [ -61.97073094, -33.96134589 ], [ -61.97078273, -33.96151289 ], [ -61.97106547, -33.96177533 ], [ -61.97134593, -33.96200566 ], [ -61.97181108, -33.96234849 ], [ -61.97234098, -33.96258558 ], [ -61.97260148, -33.96272504 ], [ -61.97290073, -33.96289982 ], [ -61.9730745, -33.96309238 ], [ -61.97321754, -33.96346416 ], [ -61.97351957, -33.96440037 ], [ -61.97364639, -33.96499884 ], [ -61.97343214, -33.9653671 ], [ -61.97403294, -33.96617119 ], [ -61.97517718, -33.96699831 ] ] } }, { "type": "Feature", "properties": { "id": 44 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96947855, -33.95945259 ], [ -61.96942471, -33.95982905 ], [ -61.96901357, -33.96037198 ], [ -61.96421399, -33.96648222 ] ] } }, { "type": "Feature", "properties": { "id": 45 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.96421399, -33.96648222 ], [ -61.9631322, -33.96703567 ], [ -61.96215535, -33.96825919 ], [ -61.96219644, -33.96889837 ] ] } }, { "type": "Feature", "properties": { "id": 46 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.99862965, -33.96362802 ], [ -61.99748489, -33.96001492 ], [ -61.98081182, -33.94375405 ], [ -61.98027323, -33.94360674 ], [ -61.97922361, -33.94319039 ], [ -61.97765749, -33.94248774 ], [ -61.97729282, -33.94267357 ], [ -61.97673862, -33.94278685 ], [ -61.97485551, -33.94274399 ], [ -61.97431619, -33.9425389 ], [ -61.97136132, -33.94170494 ] ] } }, { "type": "Feature", "properties": { "id": 47 }, "geometry": { "type": "LineString", "coordinates": [ [ -61.99291353, -33.90611851 ], [ -61.99074801, -33.9063407 ], [ -61.98956772, -33.90646569 ], [ -61.98771529, -33.9088216 ], [ -61.98757116, -33.90873475 ] ] } } ] }
var feat_coll = ee.FeatureCollection(json['features'])
var scale_fix = 50
/*
/*
https://groups.google.com/forum/#!msg/google-earth-engine-developers/9kkY0FdV54k/BWHSyZYoBQAJ
Copyright (c) 2018 Gennadii Donchyts. All rights reserved.
This work is licensed under the terms of the MIT license.  
For a copy, see <https://opensource.org/licenses/MIT>.
*/
Map.setOptions('HYBRID') 
Map.setCenter(-59.03305, -31.85808,11)
//Map.addLayer(feat_coll,{},'canal final')
var canal_buffer = feat_coll.map (function (feat){ return feat.buffer(20)})
var canal_rast = canal_buffer.reduceToImage(['id'],ee.Reducer.max())
Map.addLayer(canal_rast.randomVisualizer(),{},'Canal Final ')
var srtm = ee.Image("USGS/SRTMGL1_003");
var srtm_conv = srtm.resample('bicubic')
                   .convolve(ee.Kernel.gaussian(10,5))
var uiTools = require('users/gena/packages:ui')
var utils = require('users/gena/packages:utils')
// transect drawing tool 
var tool = new uiTools.DrawTransectTool(Map)
// remember all drawn transects
var transects = []
var transectsLayer = ui.Map.Layer(ee.FeatureCollection(transects), {}, 'transects')
Map.layers().add(transectsLayer)
// subscribe to finished event
tool.onFinished(function(transect) {
  // print chart then drawing is finished
  print (Map.getScale())
  var features = utils.reduceImageProfile(srtm_conv, transect, ee.Reducer.median(), scale_fix)
  var chart = ui.Chart.feature.byFeature(features, 'distance')
                  .setOptions({
                    title:'Perfil de elevación',
                    hAxis: {title: 'Distancia (m)'},
                    vAxis: {title: 'Elevación (m)'},
                    interpolateNulls : true,
                    curveType: 'function',
                    legend : {position:'none'},
                  })
  // print(chart)
  panel.add(chart)
  var features2 = utils.reduceImageProfile(srtm, transect, ee.Reducer.median(), scale_fix)
  var chart2 = ui.Chart.feature.byFeature(features2, 'distance')
                  .setOptions({
                    title:'Perfil de elevación',
                    hAxis: {title: 'Distancia (m)'},
                    vAxis: {title: 'Elevación (m)'},
                    interpolateNulls : true,
                    curveType: 'function',
                    legend : {position:'none'},
                  })
  print(features2.getDownloadURL('json'))
  panel.add(ui.Label('Link transecta',null,features2.getDownloadURL('json')))
  // update all historical transects
  transects.push(transect)
  transectsLayer.setEeObject(ee.FeatureCollection(transects))
})
// ui
var button = ui.Button('Comenzar')
button.onClick(function() { 
  if(!tool.active) {
    tool.startDrawing() 
    button.setLabel('Finalizar')    
  } else {
    tool.stopDrawing()
    button.setLabel('Comenzar')
  }
})
Map.add(button)
// Create a panel to hold the chart.
var panel = ui.Panel();
panel.style().set({
  width: '400px',
  position: 'bottom-left'
});
Map.add(panel);
///////// CONTORNO
var min = 35
var max = 70
var step = 2
var levels = ee.List.sequence(min, max, step)
var contours = levels.map(function(level) {
  var contour = srtm
    .resample('bicubic')
    .convolve(ee.Kernel.gaussian(10, 5))
    .subtract(ee.Image.constant(level)).zeroCrossing() // line contours
    // .gt(ee.Image.constatn(level)) // area
    .multiply(ee.Image.constant(level)).toFloat();
  return contour.mask(contour);
})
contours = ee.ImageCollection(contours).mosaic()
var vis =  {min: min, max: max, palette:['0000ff', '00ff00','ff0000']};
// A function to construct a legend for the given single-band vis
// parameters.  Requires that the vis parameters specify 'min' and 
// 'max' but not 'bands'.
function makeLegend(vis) {
  var lon = ee.Image.pixelLonLat().select('longitude');
  var gradient = lon.multiply((vis.max-vis.min)/100.0).add(vis.min);
  var legendImage = gradient.visualize(vis);
  // In case you really need it, get the color ramp as an image:
  // print(legendImage.getThumbURL({bbox:'0,0,100,8', dimensions:'256x20'}));
  // Otherwise, add it to a panel and add the panel to the map.
  var thumb = ui.Thumbnail({
    image: legendImage, 
    params: {bbox:'0,0,100,8', dimensions:'256x20'},  
    style: {padding: '1px', position: 'bottom-center'}
  });
  var panel = ui.Panel({
    widgets: [
      ui.Label(String(vis['min'])), 
      ui.Label({style: {stretch: 'horizontal'}}), 
      ui.Label('Cota'), 
      ui.Label({style: {stretch: 'horizontal'}}), 
      ui.Label(vis['max'])
    ],
    layout: ui.Panel.Layout.flow('horizontal'),
    style: {stretch: 'horizontal',position :'bottom-right'}
  });
  return ui.Panel({style:{position :'bottom-right'}}).add(panel).add(thumb);
}
Map.add(makeLegend(vis));
Map.addLayer(contours, {min: min, max: max, palette:['0000ff', '00ff00','ff0000']}, 'Linea de contorno')