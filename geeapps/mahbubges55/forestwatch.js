var SRTM = ui.import && ui.import("SRTM", "image", {
      "id": "USGS/SRTMGL1_003"
    }) || ee.Image("USGS/SRTMGL1_003"),
    L5 = ui.import && ui.import("L5", "imageCollection", {
      "id": "LANDSAT/LT05/C01/T1_SR"
    }) || ee.ImageCollection("LANDSAT/LT05/C01/T1_SR"),
    L7 = ui.import && ui.import("L7", "imageCollection", {
      "id": "LANDSAT/LE07/C01/T1_SR"
    }) || ee.ImageCollection("LANDSAT/LE07/C01/T1_SR"),
    L8 = ui.import && ui.import("L8", "imageCollection", {
      "id": "LANDSAT/LC08/C01/T1_SR"
    }) || ee.ImageCollection("LANDSAT/LC08/C01/T1_SR"),
    sundarban = ui.import && ui.import("sundarban", "table", {
      "id": "users/mahbubges55/sundarban"
    }) || ee.FeatureCollection("users/mahbubges55/sundarban"),
    Mangrove2020 = ui.import && ui.import("Mangrove2020", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.1129581140306,
                22.00682873075351
              ],
              [
                89.11408464181686,
                22.006769047994013
              ],
              [
                89.11409537065292,
                22.007898042603365
              ],
              [
                89.11394516694808,
                22.00841031472488
              ],
              [
                89.11351064908767,
                22.00841031472488
              ],
              [
                89.11326925027633,
                22.00838544718892
              ],
              [
                89.11326925027633,
                22.007176879683204
              ],
              [
                89.1129044698503,
                22.007052540877904
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.11276499498153,
                22.005147656747482
              ],
              [
                89.11381642091537,
                22.005157603989577
              ],
              [
                89.11382714975143,
                22.0058936979678
              ],
              [
                89.1140739129808,
                22.005983222650418
              ],
              [
                89.11410609948898,
                22.006301532175204
              ],
              [
                89.11410609948898,
                22.00663973526221
              ],
              [
                89.11333898771072,
                22.00669941807616
              ],
              [
                89.11287228334213,
                22.006709365209375
              ],
              [
                89.11284546125198,
                22.00600809060778
              ],
              [
                89.11266307103897,
                22.005451047317372
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.11224464643264,
                22.00711719707028
              ],
              [
                89.11279718148971,
                22.007231588723
              ],
              [
                89.11302248704696,
                22.00822132134216
              ],
              [
                89.11316196191574,
                22.008748512780848
              ],
              [
                89.11274890172744,
                22.00905686912864
              ],
              [
                89.11251286733413,
                22.008683857332535
              ],
              [
                89.11238948571945,
                22.008017407146625
              ],
              [
                89.11211590039993,
                22.007321112560742
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.14618258270036,
                21.988991297271813
              ],
              [
                89.14871458801042,
                21.988951503763786
              ],
              [
                89.14851074012529,
                21.991408731950784
              ],
              [
                89.14581780227434,
                21.991518162175762
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.14382223876726,
                21.986762843636495
              ],
              [
                89.14682631286394,
                21.98690212301398
              ],
              [
                89.14675121101152,
                21.98839439347971
              ],
              [
                89.14499168189775,
                21.987936765538585
              ],
              [
                89.14406900199663,
                21.98783728100827
              ],
              [
                89.14409045966875,
                21.98723042386291
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.46324938847727,
                21.8584980054651
              ],
              [
                89.46646803929514,
                21.85811961999879
              ],
              [
                89.46646803929514,
                21.860469576675005
              ],
              [
                89.46659678532785,
                21.86501006139014
              ],
              [
                89.46354979588693,
                21.864810920350987
              ],
              [
                89.46264857365793,
                21.86453212242956
              ],
              [
                89.46247691228098,
                21.861863600498346
              ],
              [
                89.46247691228098,
                21.86003145209157
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 1
      },
      "color": "#98ff00",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[89.1129581140306, 22.00682873075351],
                  [89.11408464181686, 22.006769047994013],
                  [89.11409537065292, 22.007898042603365],
                  [89.11394516694808, 22.00841031472488],
                  [89.11351064908767, 22.00841031472488],
                  [89.11326925027633, 22.00838544718892],
                  [89.11326925027633, 22.007176879683204],
                  [89.1129044698503, 22.007052540877904]]]),
            {
              "landcover": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.11276499498153, 22.005147656747482],
                  [89.11381642091537, 22.005157603989577],
                  [89.11382714975143, 22.0058936979678],
                  [89.1140739129808, 22.005983222650418],
                  [89.11410609948898, 22.006301532175204],
                  [89.11410609948898, 22.00663973526221],
                  [89.11333898771072, 22.00669941807616],
                  [89.11287228334213, 22.006709365209375],
                  [89.11284546125198, 22.00600809060778],
                  [89.11266307103897, 22.005451047317372]]]),
            {
              "landcover": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.11224464643264, 22.00711719707028],
                  [89.11279718148971, 22.007231588723],
                  [89.11302248704696, 22.00822132134216],
                  [89.11316196191574, 22.008748512780848],
                  [89.11274890172744, 22.00905686912864],
                  [89.11251286733413, 22.008683857332535],
                  [89.11238948571945, 22.008017407146625],
                  [89.11211590039993, 22.007321112560742]]]),
            {
              "landcover": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.14618258270036, 21.988991297271813],
                  [89.14871458801042, 21.988951503763786],
                  [89.14851074012529, 21.991408731950784],
                  [89.14581780227434, 21.991518162175762]]]),
            {
              "landcover": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.14382223876726, 21.986762843636495],
                  [89.14682631286394, 21.98690212301398],
                  [89.14675121101152, 21.98839439347971],
                  [89.14499168189775, 21.987936765538585],
                  [89.14406900199663, 21.98783728100827],
                  [89.14409045966875, 21.98723042386291]]]),
            {
              "landcover": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.46324938847727, 21.8584980054651],
                  [89.46646803929514, 21.85811961999879],
                  [89.46646803929514, 21.860469576675005],
                  [89.46659678532785, 21.86501006139014],
                  [89.46354979588693, 21.864810920350987],
                  [89.46264857365793, 21.86453212242956],
                  [89.46247691228098, 21.861863600498346],
                  [89.46247691228098, 21.86003145209157]]]),
            {
              "landcover": 1,
              "system:index": "5"
            })]),
    NonMangrove2020 = ui.import && ui.import("NonMangrove2020", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.33631756010945,
                21.85694819911787
              ],
              [
                89.336596509847,
                21.8569730931335
              ],
              [
                89.3367037982076,
                21.857047775154424
              ],
              [
                89.33676817122395,
                21.85725190581234
              ],
              [
                89.3369022816747,
                21.857361439215833
              ],
              [
                89.33699884119923,
                21.857480930105673
              ],
              [
                89.33741190138753,
                21.857530717946933
              ],
              [
                89.33775522414143,
                21.857545654295926
              ],
              [
                89.33792688551839,
                21.857625314797524
              ],
              [
                89.33787324133809,
                21.857859317264015
              ],
              [
                89.3376962155431,
                21.858182937064665
              ],
              [
                89.3372992486089,
                21.857650208695162
              ],
              [
                89.33650531474049,
                21.857645229915978
              ],
              [
                89.33626391592915,
                21.857579239493244
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.33997653953155,
                21.858270874216174
              ],
              [
                89.34042446843704,
                21.858308214892222
              ],
              [
                89.34087239734252,
                21.858387874968514
              ],
              [
                89.34120767346938,
                21.858494918126066
              ],
              [
                89.3413364195021,
                21.85884343017626
              ],
              [
                89.34136055938323,
                21.859119749840183
              ],
              [
                89.34117280475219,
                21.859177005199182
              ],
              [
                89.34063904515823,
                21.859117260476232
              ],
              [
                89.34041373960098,
                21.8590102177851
              ],
              [
                89.34001945487579,
                21.858873302598123
              ],
              [
                89.33993362418731,
                21.85865921676997
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34231695156579,
                21.85827574405558
              ],
              [
                89.34285071115976,
                21.858350425395376
              ],
              [
                89.34281047802453,
                21.858679022826603
              ],
              [
                89.34265222769265,
                21.85888564052123
              ],
              [
                89.34251275282388,
                21.858878172416997
              ],
              [
                89.34242155771737,
                21.85876117206629
              ],
              [
                89.34242155771737,
                21.8585645116864
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 0
      },
      "color": "#0b4a8b",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #0b4a8b */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[89.33631756010945, 21.85694819911787],
                  [89.336596509847, 21.8569730931335],
                  [89.3367037982076, 21.857047775154424],
                  [89.33676817122395, 21.85725190581234],
                  [89.3369022816747, 21.857361439215833],
                  [89.33699884119923, 21.857480930105673],
                  [89.33741190138753, 21.857530717946933],
                  [89.33775522414143, 21.857545654295926],
                  [89.33792688551839, 21.857625314797524],
                  [89.33787324133809, 21.857859317264015],
                  [89.3376962155431, 21.858182937064665],
                  [89.3372992486089, 21.857650208695162],
                  [89.33650531474049, 21.857645229915978],
                  [89.33626391592915, 21.857579239493244]]]),
            {
              "landcover": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.33997653953155, 21.858270874216174],
                  [89.34042446843704, 21.858308214892222],
                  [89.34087239734252, 21.858387874968514],
                  [89.34120767346938, 21.858494918126066],
                  [89.3413364195021, 21.85884343017626],
                  [89.34136055938323, 21.859119749840183],
                  [89.34117280475219, 21.859177005199182],
                  [89.34063904515823, 21.859117260476232],
                  [89.34041373960098, 21.8590102177851],
                  [89.34001945487579, 21.858873302598123],
                  [89.33993362418731, 21.85865921676997]]]),
            {
              "landcover": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34231695156579, 21.85827574405558],
                  [89.34285071115976, 21.858350425395376],
                  [89.34281047802453, 21.858679022826603],
                  [89.34265222769265, 21.85888564052123],
                  [89.34251275282388, 21.858878172416997],
                  [89.34242155771737, 21.85876117206629],
                  [89.34242155771737, 21.8585645116864]]]),
            {
              "landcover": 0,
              "system:index": "2"
            })]),
    NonMangrove2009 = ui.import && ui.import("NonMangrove2009", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.32612603047228,
                21.853694155785544
              ],
              [
                89.32664101460314,
                21.85387339668435
              ],
              [
                89.32660882809496,
                21.854102426394462
              ],
              [
                89.3265444550786,
                21.854361329102865
              ],
              [
                89.32613675930834,
                21.854689935710912
              ],
              [
                89.32565396168566,
                21.85499862607839
              ],
              [
                89.32546084263659,
                21.85500858382107
              ],
              [
                89.3250853333745,
                21.854709851238614
              ],
              [
                89.32532136776781,
                21.854092468588615
              ],
              [
                89.32573979237414,
                21.853823607568348
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.32757442334032,
                21.857497997713224
              ],
              [
                89.32785337307787,
                21.85713952478666
              ],
              [
                89.32815378048754,
                21.857010076008756
              ],
              [
                89.3282717976842,
                21.857089736809044
              ],
              [
                89.32826106884814,
                21.857358591682022
              ],
              [
                89.32825034001208,
                21.857707106504915
              ],
              [
                89.32828252652025,
                21.857856469740128
              ],
              [
                89.32789628842211,
                21.85788634236842
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.3302351746831,
                21.855167907609598
              ],
              [
                89.33064287045336,
                21.85525752716256
              ],
              [
                89.33080380299425,
                21.855436766099817
              ],
              [
                89.33071797230578,
                21.856014312256647
              ],
              [
                89.33025663235522,
                21.856223423220396
              ],
              [
                89.33013861515856,
                21.855934650856604
              ],
              [
                89.3300205979619,
                21.855725539470118
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.33617321243679,
                21.86400084765448
              ],
              [
                89.33649507751858,
                21.864150204307258
              ],
              [
                89.33678475609219,
                21.86432943208434
              ],
              [
                89.33719245186245,
                21.864438960059584
              ],
              [
                89.33645216217434,
                21.86473767229232
              ],
              [
                89.33608738174831,
                21.86488702817436
              ],
              [
                89.33565822830593,
                21.864827285840295
              ],
              [
                89.3355616687814,
                21.864608230401533
              ],
              [
                89.33576551666653,
                21.86432943208434
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.33669892540371,
                21.865345051905017
              ],
              [
                89.33733192673122,
                21.865593977229313
              ],
              [
                89.33766452064907,
                21.865912601011146
              ],
              [
                89.33746067276394,
                21.866051998692104
              ],
              [
                89.33664528122341,
                21.866002213821663
              ],
              [
                89.3364092468301,
                21.865643762242104
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34400540594498,
                21.861744222389817
              ],
              [
                89.34440237287919,
                21.861729286479907
              ],
              [
                89.34451502565781,
                21.861410653363183
              ],
              [
                89.34468132261674,
                21.861420610658843
              ],
              [
                89.34475106005112,
                21.86164464962762
              ],
              [
                89.34490662817399,
                21.861719329205773
              ],
              [
                89.34489589933793,
                21.861843795082574
              ],
              [
                89.34489589933793,
                21.862172384476104
              ],
              [
                89.34470278028886,
                21.862177363097448
              ],
              [
                89.3439356685106,
                21.862197277581153
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34784860498955,
                21.86822404281476
              ],
              [
                89.34803099520256,
                21.86822404281476
              ],
              [
                89.34814901239922,
                21.868064733592053
              ],
              [
                89.34821338541558,
                21.868711926203407
              ],
              [
                89.34806318171074,
                21.868791580475865
              ],
              [
                89.34780568964531,
                21.868602401506198
              ],
              [
                89.34776277430107,
                21.868383351859695
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34467286951592,
                21.869289418671745
              ],
              [
                89.34495181925347,
                21.868930975345712
              ],
              [
                89.34538097269585,
                21.868990715962553
              ],
              [
                89.34572429544976,
                21.869249591679967
              ],
              [
                89.34562773592522,
                21.869667774539447
              ],
              [
                89.34532732851555,
                21.869966475831863
              ],
              [
                89.34506983645012,
                21.869667774539447
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 0
      },
      "color": "#ffc82d",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #ffc82d */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[89.32612603047228, 21.853694155785544],
                  [89.32664101460314, 21.85387339668435],
                  [89.32660882809496, 21.854102426394462],
                  [89.3265444550786, 21.854361329102865],
                  [89.32613675930834, 21.854689935710912],
                  [89.32565396168566, 21.85499862607839],
                  [89.32546084263659, 21.85500858382107],
                  [89.3250853333745, 21.854709851238614],
                  [89.32532136776781, 21.854092468588615],
                  [89.32573979237414, 21.853823607568348]]]),
            {
              "landcover": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.32757442334032, 21.857497997713224],
                  [89.32785337307787, 21.85713952478666],
                  [89.32815378048754, 21.857010076008756],
                  [89.3282717976842, 21.857089736809044],
                  [89.32826106884814, 21.857358591682022],
                  [89.32825034001208, 21.857707106504915],
                  [89.32828252652025, 21.857856469740128],
                  [89.32789628842211, 21.85788634236842]]]),
            {
              "landcover": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.3302351746831, 21.855167907609598],
                  [89.33064287045336, 21.85525752716256],
                  [89.33080380299425, 21.855436766099817],
                  [89.33071797230578, 21.856014312256647],
                  [89.33025663235522, 21.856223423220396],
                  [89.33013861515856, 21.855934650856604],
                  [89.3300205979619, 21.855725539470118]]]),
            {
              "landcover": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.33617321243679, 21.86400084765448],
                  [89.33649507751858, 21.864150204307258],
                  [89.33678475609219, 21.86432943208434],
                  [89.33719245186245, 21.864438960059584],
                  [89.33645216217434, 21.86473767229232],
                  [89.33608738174831, 21.86488702817436],
                  [89.33565822830593, 21.864827285840295],
                  [89.3355616687814, 21.864608230401533],
                  [89.33576551666653, 21.86432943208434]]]),
            {
              "landcover": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.33669892540371, 21.865345051905017],
                  [89.33733192673122, 21.865593977229313],
                  [89.33766452064907, 21.865912601011146],
                  [89.33746067276394, 21.866051998692104],
                  [89.33664528122341, 21.866002213821663],
                  [89.3364092468301, 21.865643762242104]]]),
            {
              "landcover": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34400540594498, 21.861744222389817],
                  [89.34440237287919, 21.861729286479907],
                  [89.34451502565781, 21.861410653363183],
                  [89.34468132261674, 21.861420610658843],
                  [89.34475106005112, 21.86164464962762],
                  [89.34490662817399, 21.861719329205773],
                  [89.34489589933793, 21.861843795082574],
                  [89.34489589933793, 21.862172384476104],
                  [89.34470278028886, 21.862177363097448],
                  [89.3439356685106, 21.862197277581153]]]),
            {
              "landcover": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34784860498955, 21.86822404281476],
                  [89.34803099520256, 21.86822404281476],
                  [89.34814901239922, 21.868064733592053],
                  [89.34821338541558, 21.868711926203407],
                  [89.34806318171074, 21.868791580475865],
                  [89.34780568964531, 21.868602401506198],
                  [89.34776277430107, 21.868383351859695]]]),
            {
              "landcover": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34467286951592, 21.869289418671745],
                  [89.34495181925347, 21.868930975345712],
                  [89.34538097269585, 21.868990715962553],
                  [89.34572429544976, 21.869249591679967],
                  [89.34562773592522, 21.869667774539447],
                  [89.34532732851555, 21.869966475831863],
                  [89.34506983645012, 21.869667774539447]]]),
            {
              "landcover": 0,
              "system:index": "7"
            })]),
    Mangrove2009 = ui.import && ui.import("Mangrove2009", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.45497393761725,
                21.857402667068186
              ],
              [
                89.45527434502692,
                21.858099695648505
              ],
              [
                89.45540309105964,
                21.85897595532337
              ],
              [
                89.45566058312507,
                21.86031024950236
              ],
              [
                89.45452332650275,
                21.862600426867044
              ],
              [
                89.45430874978156,
                21.858403876894556
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.46462989007087,
                21.858244556715405
              ],
              [
                89.46542382393928,
                21.858065321301414
              ],
              [
                89.46581006203742,
                21.858483536917497
              ],
              [
                89.4657886043653,
                21.8592004751246
              ],
              [
                89.46557402764411,
                21.860076728045886
              ],
              [
                89.46548819695563,
                21.860773743575894
              ],
              [
                89.46516633187385,
                21.861251695116028
              ],
              [
                89.46456551705451,
                21.861191951260974
              ],
              [
                89.46426510964484,
                21.860833487605888
              ],
              [
                89.46417927895637,
                21.8601763019013
              ],
              [
                89.46482300911994,
                21.859997068911568
              ],
              [
                89.46510195885749,
                21.85880217656495
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.43202704146965,
                21.85974304832908
              ],
              [
                89.43267077163323,
                21.86022100331865
              ],
              [
                89.43438738540276,
                21.8613362254071
              ],
              [
                89.43709105208977,
                21.862371780976755
              ],
              [
                89.434430300747,
                21.863686129154424
              ],
              [
                89.43086832717522,
                21.861176908499093
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.42666262343987,
                21.8557998586354
              ],
              [
                89.42777842239006,
                21.855959181541394
              ],
              [
                89.43086832717522,
                21.857393079698735
              ],
              [
                89.43245619491204,
                21.85811002337949
              ],
              [
                89.4301816816674,
                21.859265091739978
              ],
              [
                89.42902296737297,
                21.859185432152945
              ],
              [
                89.4263622160302,
                21.85719392803765
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.4618806619772,
                22.121870661706552
              ],
              [
                89.46316812230435,
                22.119405760147085
              ],
              [
                89.4655713815817,
                22.117338390120622
              ],
              [
                89.4655713815817,
                22.12648229723817
              ],
              [
                89.46419809056607,
                22.130378216547548
              ],
              [
                89.4633397836813,
                22.128947075033036
              ],
              [
                89.46119401646939,
                22.124892095135714
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 1
      },
      "color": "#00ffff",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #00ffff */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[89.45497393761725, 21.857402667068186],
                  [89.45527434502692, 21.858099695648505],
                  [89.45540309105964, 21.85897595532337],
                  [89.45566058312507, 21.86031024950236],
                  [89.45452332650275, 21.862600426867044],
                  [89.45430874978156, 21.858403876894556]]]),
            {
              "landcover": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.46462989007087, 21.858244556715405],
                  [89.46542382393928, 21.858065321301414],
                  [89.46581006203742, 21.858483536917497],
                  [89.4657886043653, 21.8592004751246],
                  [89.46557402764411, 21.860076728045886],
                  [89.46548819695563, 21.860773743575894],
                  [89.46516633187385, 21.861251695116028],
                  [89.46456551705451, 21.861191951260974],
                  [89.46426510964484, 21.860833487605888],
                  [89.46417927895637, 21.8601763019013],
                  [89.46482300911994, 21.859997068911568],
                  [89.46510195885749, 21.85880217656495]]]),
            {
              "landcover": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.43202704146965, 21.85974304832908],
                  [89.43267077163323, 21.86022100331865],
                  [89.43438738540276, 21.8613362254071],
                  [89.43709105208977, 21.862371780976755],
                  [89.434430300747, 21.863686129154424],
                  [89.43086832717522, 21.861176908499093]]]),
            {
              "landcover": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.42666262343987, 21.8557998586354],
                  [89.42777842239006, 21.855959181541394],
                  [89.43086832717522, 21.857393079698735],
                  [89.43245619491204, 21.85811002337949],
                  [89.4301816816674, 21.859265091739978],
                  [89.42902296737297, 21.859185432152945],
                  [89.4263622160302, 21.85719392803765]]]),
            {
              "landcover": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.4618806619772, 22.121870661706552],
                  [89.46316812230435, 22.119405760147085],
                  [89.4655713815817, 22.117338390120622],
                  [89.4655713815817, 22.12648229723817],
                  [89.46419809056607, 22.130378216547548],
                  [89.4633397836813, 22.128947075033036],
                  [89.46119401646939, 22.124892095135714]]]),
            {
              "landcover": 1,
              "system:index": "4"
            })]),
    NonMangrove1990 = ui.import && ui.import("NonMangrove1990", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34406787461707,
                21.869045744965792
              ],
              [
                89.3443790108628,
                21.8690258314373
              ],
              [
                89.34539825028845,
                21.869722803281665
              ],
              [
                89.34568792886206,
                21.869772586854634
              ],
              [
                89.34585959023902,
                21.870051374542296
              ],
              [
                89.34610635346839,
                21.87015094144165
              ],
              [
                89.34595614976355,
                21.87048946837997
              ],
              [
                89.34552699632117,
                21.870459598388308
              ],
              [
                89.34509784287879,
                21.870170854813193
              ],
              [
                89.34446484155127,
                21.870170854813193
              ],
              [
                89.34410006112525,
                21.869981677671426
              ],
              [
                89.3439283997483,
                21.86957345245864
              ],
              [
                89.34386402673194,
                21.869314577328545
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34136420793006,
                21.86746261078267
              ],
              [
                89.3418040902085,
                21.867542265752203
              ],
              [
                89.34224397248694,
                21.867701575557952
              ],
              [
                89.34263021058509,
                21.868060021970905
              ],
              [
                89.34300571984717,
                21.86844833790262
              ],
              [
                89.3425980240769,
                21.868995961139348
              ],
              [
                89.34221178597876,
                21.86871717139044
              ],
              [
                89.34163242883155,
                21.86835872662752
              ],
              [
                89.34112817353675,
                21.868000280964583
              ],
              [
                89.34117108888098,
                21.867631877539818
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.3466857106156,
                21.870688601498077
              ],
              [
                89.3473508984513,
                21.871206346304977
              ],
              [
                89.34789806909033,
                21.871405478422936
              ],
              [
                89.34798389977881,
                21.871684262921374
              ],
              [
                89.34770495004126,
                21.871843568104584
              ],
              [
                89.34726506776282,
                21.87195309031489
              ],
              [
                89.34659987992713,
                21.87145526140903
              ],
              [
                89.34631020135352,
                21.871216302917468
              ],
              [
                89.34638530320593,
                21.870867821066838
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.35100943154761,
                21.868298985746208
              ],
              [
                89.35137421197363,
                21.868318899376085
              ],
              [
                89.35150295800635,
                21.868886436660066
              ],
              [
                89.35112744874426,
                21.869015874672
              ],
              [
                89.35103088921973,
                21.86894617729555
              ],
              [
                89.35096651620337,
                21.86875699853076
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34916407174536,
                21.869384274525146
              ],
              [
                89.34944302148291,
                21.869593365910735
              ],
              [
                89.34912115640113,
                21.869892067358876
              ],
              [
                89.34894949502417,
                21.8699219374693
              ],
              [
                89.34884220666358,
                21.869653106250365
              ],
              [
                89.34871346063086,
                21.869523668816235
              ],
              [
                89.34888512200781,
                21.869354404302204
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34799462861487,
                21.86834876981571
              ],
              [
                89.3483057648606,
                21.868468251511676
              ],
              [
                89.3483594090409,
                21.868597689902806
              ],
              [
                89.34804827279517,
                21.868896393434387
              ],
              [
                89.3478551537461,
                21.868747041746722
              ],
              [
                89.34776932305762,
                21.868577776311806
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34388598501704,
                21.86207998663417
              ],
              [
                89.34392890036128,
                21.861900756033656
              ],
              [
                89.34419712126277,
                21.861502465004907
              ],
              [
                89.34421857893489,
                21.861223660623807
              ],
              [
                89.3443473249676,
                21.861183831382068
              ],
              [
                89.34446534216426,
                21.861681696105315
              ],
              [
                89.34547385275386,
                21.86212977287218
              ],
              [
                89.34515198767207,
                21.862159644606646
              ],
              [
                89.3449052244427,
                21.86220943081688
              ],
              [
                89.34483012259028,
                21.862478276052162
              ],
              [
                89.34410056173823,
                21.862398618257433
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.34548458158991,
                21.859839587959605
              ],
              [
                89.34576353132746,
                21.85982963055372
              ],
              [
                89.3459137350323,
                21.86005865071364
              ],
              [
                89.34608539640925,
                21.86030758525353
              ],
              [
                89.34576353132746,
                21.86105438626972
              ],
              [
                89.34532364904902,
                21.861014556980773
              ],
              [
                89.34561332762263,
                21.860397201581666
              ],
              [
                89.34531292021296,
                21.86006860810357
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 0
      },
      "color": "#bf04c2",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #bf04c2 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34406787461707, 21.869045744965792],
                  [89.3443790108628, 21.8690258314373],
                  [89.34539825028845, 21.869722803281665],
                  [89.34568792886206, 21.869772586854634],
                  [89.34585959023902, 21.870051374542296],
                  [89.34610635346839, 21.87015094144165],
                  [89.34595614976355, 21.87048946837997],
                  [89.34552699632117, 21.870459598388308],
                  [89.34509784287879, 21.870170854813193],
                  [89.34446484155127, 21.870170854813193],
                  [89.34410006112525, 21.869981677671426],
                  [89.3439283997483, 21.86957345245864],
                  [89.34386402673194, 21.869314577328545]]]),
            {
              "landcover": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34136420793006, 21.86746261078267],
                  [89.3418040902085, 21.867542265752203],
                  [89.34224397248694, 21.867701575557952],
                  [89.34263021058509, 21.868060021970905],
                  [89.34300571984717, 21.86844833790262],
                  [89.3425980240769, 21.868995961139348],
                  [89.34221178597876, 21.86871717139044],
                  [89.34163242883155, 21.86835872662752],
                  [89.34112817353675, 21.868000280964583],
                  [89.34117108888098, 21.867631877539818]]]),
            {
              "landcover": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.3466857106156, 21.870688601498077],
                  [89.3473508984513, 21.871206346304977],
                  [89.34789806909033, 21.871405478422936],
                  [89.34798389977881, 21.871684262921374],
                  [89.34770495004126, 21.871843568104584],
                  [89.34726506776282, 21.87195309031489],
                  [89.34659987992713, 21.87145526140903],
                  [89.34631020135352, 21.871216302917468],
                  [89.34638530320593, 21.870867821066838]]]),
            {
              "landcover": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.35100943154761, 21.868298985746208],
                  [89.35137421197363, 21.868318899376085],
                  [89.35150295800635, 21.868886436660066],
                  [89.35112744874426, 21.869015874672],
                  [89.35103088921973, 21.86894617729555],
                  [89.35096651620337, 21.86875699853076]]]),
            {
              "landcover": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34916407174536, 21.869384274525146],
                  [89.34944302148291, 21.869593365910735],
                  [89.34912115640113, 21.869892067358876],
                  [89.34894949502417, 21.8699219374693],
                  [89.34884220666358, 21.869653106250365],
                  [89.34871346063086, 21.869523668816235],
                  [89.34888512200781, 21.869354404302204]]]),
            {
              "landcover": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34799462861487, 21.86834876981571],
                  [89.3483057648606, 21.868468251511676],
                  [89.3483594090409, 21.868597689902806],
                  [89.34804827279517, 21.868896393434387],
                  [89.3478551537461, 21.868747041746722],
                  [89.34776932305762, 21.868577776311806]]]),
            {
              "landcover": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34388598501704, 21.86207998663417],
                  [89.34392890036128, 21.861900756033656],
                  [89.34419712126277, 21.861502465004907],
                  [89.34421857893489, 21.861223660623807],
                  [89.3443473249676, 21.861183831382068],
                  [89.34446534216426, 21.861681696105315],
                  [89.34547385275386, 21.86212977287218],
                  [89.34515198767207, 21.862159644606646],
                  [89.3449052244427, 21.86220943081688],
                  [89.34483012259028, 21.862478276052162],
                  [89.34410056173823, 21.862398618257433]]]),
            {
              "landcover": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.34548458158991, 21.859839587959605],
                  [89.34576353132746, 21.85982963055372],
                  [89.3459137350323, 21.86005865071364],
                  [89.34608539640925, 21.86030758525353],
                  [89.34576353132746, 21.86105438626972],
                  [89.34532364904902, 21.861014556980773],
                  [89.34561332762263, 21.860397201581666],
                  [89.34531292021296, 21.86006860810357]]]),
            {
              "landcover": 0,
              "system:index": "7"
            })]),
    Mangrove1990 = ui.import && ui.import("Mangrove1990", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.56979773545419,
                21.914944949700175
              ],
              [
                89.5719435026661,
                21.91781154581721
              ],
              [
                89.57391760850106,
                21.92290757420614
              ],
              [
                89.57408926987802,
                21.925853632409122
              ],
              [
                89.57374594712411,
                21.927366449413828
              ],
              [
                89.57142851853524,
                21.92171320891742
              ],
              [
                89.56893942856942,
                21.91781154581721
              ],
              [
                89.56687949204598,
                21.913591259254503
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.58284400010263,
                21.92672947579265
              ],
              [
                89.58868048691903,
                21.93110861186668
              ],
              [
                89.58756468796884,
                21.932382517059125
              ],
              [
                89.58430312180673,
                21.930232795431596
              ],
              [
                89.58164237046395,
                21.92792379899394
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.55228827500497,
                21.93612454760488
              ],
              [
                89.5551206877247,
                21.93317870201304
              ],
              [
                89.55786726975595,
                21.929516214339223
              ],
              [
                89.55906889939462,
                21.931586327650294
              ],
              [
                89.55683730149423,
                21.937398407888683
              ],
              [
                89.55477736497079,
                21.941140306503286
              ],
              [
                89.55331824326669,
                21.94018493749138
              ],
              [
                89.55211661362802,
                21.93771687117736
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.55306075120126,
                21.924340799325996
              ],
              [
                89.5569231321827,
                21.92609249932093
              ],
              [
                89.5569231321827,
                21.929277353173294
              ],
              [
                89.5540048887745,
                21.933974882511905
              ],
              [
                89.55082915330087,
                21.935567230143985
              ],
              [
                89.54834006333505,
                21.933736028830033
              ],
              [
                89.54919837021981,
                21.928162662431586
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.77138764310835,
                21.84081443141783
              ],
              [
                89.77366215635298,
                21.84141195405666
              ],
              [
                89.77430588651656,
                21.843204506987338
              ],
              [
                89.77735287595748,
                21.845076704936396
              ],
              [
                89.77756745267867,
                21.848183702729123
              ],
              [
                89.77825409818648,
                21.85013550012874
              ],
              [
                89.77755622632797,
                21.853938365243465
              ],
              [
                89.77729873426254,
                21.852265442203272
              ],
              [
                89.77648334272202,
                21.849596691090305
              ],
              [
                89.77562503583725,
                21.847366054903567
              ],
              [
                89.773779676035,
                21.84501588268327
              ],
              [
                89.77219180829819,
                21.84230716167798
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.75502567060288,
                21.852345105649388
              ],
              [
                89.75566940076645,
                21.85286291696642
              ],
              [
                89.75871639020737,
                21.853739208765912
              ],
              [
                89.76223544843491,
                21.854575664105862
              ],
              [
                89.75824432142075,
                21.854655326263767
              ],
              [
                89.75618438489731,
                21.85433667736564
              ],
              [
                89.75373821027573,
                21.853181569151758
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.72640381835107,
                21.870767572898856
              ],
              [
                89.7275625326455,
                21.868816057442423
              ],
              [
                89.73133908293848,
                21.869971039200337
              ],
              [
                89.73138199828271,
                21.87104635864323
              ],
              [
                89.73103867552881,
                21.872679235639698
              ],
              [
                89.72636090300684,
                21.87275888769826
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                89.26673729779377,
                21.77283778225225
              ],
              [
                89.27068550946369,
                21.772917489909798
              ],
              [
                89.27210171582355,
                21.773834124787985
              ],
              [
                89.27278836133137,
                21.775906495093857
              ],
              [
                89.27270253064289,
                21.7777397207887
              ],
              [
                89.26995594861164,
                21.778736029272526
              ],
              [
                89.26600773694172,
                21.778815733652202
              ],
              [
                89.26489193799152,
                21.77630502441217
              ],
              [
                89.26562149884357,
                21.77455148712846
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 1
      },
      "color": "#ff0000",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #ff0000 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[89.56979773545419, 21.914944949700175],
                  [89.5719435026661, 21.91781154581721],
                  [89.57391760850106, 21.92290757420614],
                  [89.57408926987802, 21.925853632409122],
                  [89.57374594712411, 21.927366449413828],
                  [89.57142851853524, 21.92171320891742],
                  [89.56893942856942, 21.91781154581721],
                  [89.56687949204598, 21.913591259254503]]]),
            {
              "landcover": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.58284400010263, 21.92672947579265],
                  [89.58868048691903, 21.93110861186668],
                  [89.58756468796884, 21.932382517059125],
                  [89.58430312180673, 21.930232795431596],
                  [89.58164237046395, 21.92792379899394]]]),
            {
              "landcover": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.55228827500497, 21.93612454760488],
                  [89.5551206877247, 21.93317870201304],
                  [89.55786726975595, 21.929516214339223],
                  [89.55906889939462, 21.931586327650294],
                  [89.55683730149423, 21.937398407888683],
                  [89.55477736497079, 21.941140306503286],
                  [89.55331824326669, 21.94018493749138],
                  [89.55211661362802, 21.93771687117736]]]),
            {
              "landcover": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.55306075120126, 21.924340799325996],
                  [89.5569231321827, 21.92609249932093],
                  [89.5569231321827, 21.929277353173294],
                  [89.5540048887745, 21.933974882511905],
                  [89.55082915330087, 21.935567230143985],
                  [89.54834006333505, 21.933736028830033],
                  [89.54919837021981, 21.928162662431586]]]),
            {
              "landcover": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.77138764310835, 21.84081443141783],
                  [89.77366215635298, 21.84141195405666],
                  [89.77430588651656, 21.843204506987338],
                  [89.77735287595748, 21.845076704936396],
                  [89.77756745267867, 21.848183702729123],
                  [89.77825409818648, 21.85013550012874],
                  [89.77755622632797, 21.853938365243465],
                  [89.77729873426254, 21.852265442203272],
                  [89.77648334272202, 21.849596691090305],
                  [89.77562503583725, 21.847366054903567],
                  [89.773779676035, 21.84501588268327],
                  [89.77219180829819, 21.84230716167798]]]),
            {
              "landcover": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.75502567060288, 21.852345105649388],
                  [89.75566940076645, 21.85286291696642],
                  [89.75871639020737, 21.853739208765912],
                  [89.76223544843491, 21.854575664105862],
                  [89.75824432142075, 21.854655326263767],
                  [89.75618438489731, 21.85433667736564],
                  [89.75373821027573, 21.853181569151758]]]),
            {
              "landcover": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.72640381835107, 21.870767572898856],
                  [89.7275625326455, 21.868816057442423],
                  [89.73133908293848, 21.869971039200337],
                  [89.73138199828271, 21.87104635864323],
                  [89.73103867552881, 21.872679235639698],
                  [89.72636090300684, 21.87275888769826]]]),
            {
              "landcover": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[89.26673729779377, 21.77283778225225],
                  [89.27068550946369, 21.772917489909798],
                  [89.27210171582355, 21.773834124787985],
                  [89.27278836133137, 21.775906495093857],
                  [89.27270253064289, 21.7777397207887],
                  [89.26995594861164, 21.778736029272526],
                  [89.26600773694172, 21.778815733652202],
                  [89.26489193799152, 21.77630502441217],
                  [89.26562149884357, 21.77455148712846]]]),
            {
              "landcover": 1,
              "system:index": "7"
            })]);
///////////////////////////////////////////////////////////////
//                    1) Set up the map                      //
///////////////////////////////////////////////////////////////
//Center the map to the region of interest using the region shapefile
var sundarbanPoint = ee.Geometry.Point(89.3893, 22.1594)
Map.centerObject (sundarbanPoint, 10)
Map.setOptions('satellite')
///////////////////////////////////////////////////////////////
//            2) Set up Filtered Landsat Composite           //
///////////////////////////////////////////////////////////////
//2.1 Cloud Masking
function maskClouds(image){
  var cloudShadowBitMask = ee.Number(2).pow(3).int()
  var cloudsBitMask = ee.Number(2).pow(5).int()
  var qaBand = image.select('pixel_qa')
  var mask = qaBand.bitwiseAnd(cloudShadowBitMask).eq(0).and(qaBand.bitwiseAnd(cloudsBitMask).eq(0));
  return image.updateMask(mask).divide(10000).copyProperties(image, ['system:time_start'])
}
// 2.2 Adding Spectral Indices
// This function maps spectral indices for Mangrove Mapping using Landsat 8 Imagery
var addIndicesL8 = function(img) {
  // NDVI
  var ndvi = img.normalizedDifference(['B5','B4']).rename('NDVI');
  // NDMI (Normalized Difference Mangrove Index - Shi et al 2016 - New spectral metrics for mangrove forest identification)
  var ndmi = img.normalizedDifference(['B7','B3']).rename('NDMI');
  // MNDWI (Modified Normalized Difference Water Index - Hanqiu Xu, 2006)
  var mndwi = img.normalizedDifference(['B3','B6']).rename('MNDWI');
  // SR (Simple Ratio)
  var sr = img.select('B5').divide(img.select('B4')).rename('SR');
  // Band Ratio 54
  var ratio54 = img.select('B6').divide(img.select('B5')).rename('R54');
  // Band Ratio 35
  var ratio35 = img.select('B4').divide(img.select('B6')).rename('R35');
  // GCVI
  var gcvi = img.expression('(NIR/GREEN)-1',{
    'NIR':img.select('B5'),
    'GREEN':img.select('B3')
  }).rename('GCVI');
  return img
    .addBands(ndvi)
    .addBands(ndmi)
    .addBands(mndwi)
    .addBands(sr)
    .addBands(ratio54)
    .addBands(ratio35)
    .addBands(gcvi);
};
var yearL8 = 2020
var startDateL8 = (yearL8-1)+'-01-01'
var endDateL8 = (yearL8+1)+'-12-31'
//2.4) Apply filters and masks to Landsat 8 imagery
var l8 = L8.filterDate(startDateL8,endDateL8)
    .filterMetadata('CLOUD_COVER', 'less_than', 2)
// Mask for clouds and cloud shadows
    .map(maskClouds)
//Add the indices
    .map(addIndicesL8)
//2.5) Composite the Landsat image collection    
var composite = l8
              // Uses the median reducer
              .median() 
              // Clips the composite to our area of interest
              .clip(sundarban); 
//2.6) Mask to areas of low elevation and high NDVI and MNDWI
// Clip SRTM data to region
var srtmClip = SRTM.clip(sundarban);
//Mask to elevations less than 65 meters
var elevationMask = srtmClip.lt(15);
//Used the NDVI and MNDWI bands to create masks
var NDVIMask = composite.select('NDVI').gt(0.25);
var MNDWIMask = composite.select('MNDWI').gt(-0.50);
var NDMIMask = composite.select('NDMI').gt(0.25)
//Apply the masks
var compositeNew = composite
                        .updateMask(NDVIMask)
                        // .updateMask(MNDWIMask)
                        .updateMask(MNDWIMask)
                        // .updateMask(elevationMask)
//2.7) Display results
///////////////////////
//Select bands and parameters for visualization
var visPar = {bands:['B5','B6','B4'], min: 0, max: 0.35}; 
//Add layer to map
// Map.addLayer(compositeNew, visPar, 'Landsat Composite 2020')
///////////////////////////////////////////////////////////////
//          3) Construct Random Forest Model                 //
///////////////////////////////////////////////////////////////
//3.1) Prepare training data and predictors
//After drawing training polygons, merge them together
var classes = Mangrove2020.merge(NonMangrove2020)
//Define the bands you want to include in the model
var bands = ['B5','B6','B4','NDVI','MNDWI','SR','GCVI']
//Create a variable called image to select the bands of interest and clip to geometry
var image = compositeNew.select(bands).clip(sundarban)
//Assemble samples for the model
var samples = image.sampleRegions({
    collection: classes, // Set of geometries selected for training
    properties: ['landcover'], // Label from each geometry
    scale: 30 // Make each sample the same size as Landsat pixel
    }).randomColumn('random'); // creates a column with random numbers
//Here we randomly split our samples to set some aside for testing our model's accuracy
// using the "random" column we created
var split = 0.8; // Roughly 80% for training, 20% for testing.
var training = samples.filter(ee.Filter.lt('random', split)); //Subset training data
var testing = samples.filter(ee.Filter.gte('random', split)); //Subset testing data 
//Print these variables to see how much training and testing data you are using
print('Samples n =', samples.aggregate_count('.all'));
print('Training n =', training.aggregate_count('.all'));
print('Testing n =', testing.aggregate_count('.all'));
//3.2) Begin Random Forest Classification
//.smileRandomForest is used to run the model. Here we run the model using 100 trees
// and 5 randomly selected predictors per split ("(100,5)")
var classifier = ee.Classifier.smileRandomForest(100,5).train({ 
    features: training.select(['B5','B6','B4','NDVI','MNDWI','SR','GCVI', 'landcover']), //Train using bands and landcover property
    classProperty: 'landcover', //Pull the landcover property from classes
    inputProperties: bands
});
//3.3) Test the accuracy of the model
//////////////////////////////////////
var validation = testing.classify(classifier);
var testAccuracy = validation.errorMatrix('landcover', 'classification');
print('Validation error matrix RF: ', testAccuracy);
print('Validation overall accuracy RF: ', testAccuracy.accuracy());
//3.4) Classify the Landsat composite using the Random Forest model
///////////////////////////////////////////////////////////////////
var classifiedrf = image.select(bands) // select the predictors
                      .classify(classifier); // .classify applies the Random Forest
//The model results may be "noisy". To reduce noise, create a mask to mask
// unconnected pixels
var pixelcount = classifiedrf.connectedPixelCount(100, false); //Create an image that shows the number of pixels each pixel is connected to
var countmask = pixelcount.select(0).gt(25); //filter out all pixels connected to 4 or less 
//Mask the results to only display mangrove extent
var classMask = classifiedrf.select('classification').gt(0)
var classed2020= classifiedrf.updateMask(countmask).updateMask(classMask)
var extent2020 = classed2020
//3.5) Map results
////////////////////
//Add classification to map
// Map.addLayer (classed2020, {min: 1, max: 1, palette:'forestgreen'}, 'Mangrove Extent 2020');
///////////////////////////////////////////////////////////////
//          4) Timeseries Comparison Map                     //
///////////////////////////////////////////////////////////////
//4.1) Adding Landsat 7 Spectral Indices
// This function maps spectral indices for Mangrove Mapping using Landsat 7 Imagery
var addIndicesL7 = function(img) {
  // NDVI
  var ndvi = img.normalizedDifference(['B4','B3']).rename('NDVI');
  // NDMI (Normalized Difference Mangrove Index - Shi et al 2016 - New spectral metrics for mangrove forest identification)
  var ndmi = img.normalizedDifference(['B7','B2']).rename('NDMI');
  // MNDWI (Modified Normalized Difference Water Index - Hanqiu Xu, 2006)
  var mndwi = img.normalizedDifference(['B2','B5']).rename('MNDWI');
  // SR (Simple Ratio)
  var sr = img.select('B4').divide(img.select('B3')).rename('SR');
  // Band Ratio 54
  var ratio54 = img.select('B5').divide(img.select('B4')).rename('R54');
  // Band Ratio 35
  var ratio35 = img.select('B3').divide(img.select('B5')).rename('R35');
  // GCVI
  var gcvi = img.expression('(NIR/GREEN)-1',{
    'NIR':img.select('B4'),
    'GREEN':img.select('B2')
  }).rename('GCVI');
  return img
    .addBands(ndvi)
    .addBands(ndmi)
    .addBands(mndwi)
    .addBands(sr)
    .addBands(ratio54)
    .addBands(ratio35)
    .addBands(gcvi);
};
var yearL7 = 2010
var startDateL7 = (yearL7-1)+'-01-01'
var endDateL7 = (yearL7+1)+'-12-31'
var l7 = L7.filterDate(startDateL7,endDateL7)
// Mask for clouds and cloud shadows
    .map(maskClouds)  //We use the same function we used for Landsat 8
//Add the indices
    .map(addIndicesL7)
//4.4) Composite the Landsat image collection
var L7composite = l7
              // Uses the median reducer
              .median() 
              // Clips the composite to our area of interest
              .clip(sundarban);
//4.5) Mask to areas of low elevation and high NDVI and MNDWI
var L7NDVIMask = L7composite.select('NDVI').gt(0.25);
var L7MNDWIMask = L7composite.select('MNDWI').gt(-0.50);
var L7compositeNew = L7composite
                        .updateMask(L7NDVIMask)
                        .updateMask(L7MNDWIMask)
                        // .updateMask(elevationMask) //We can use the same mask as before
//4.6) Display results                        
//Select bands and parameters for visualization
//We use bands 4, 5, and 3 instead
var L7visPar = {bands:['B4','B5','B3'], min: 0, max: 0.35}; 
//Add layer to map
// Map.addLayer(L7compositeNew, L7visPar, 'Landsat Composite 2010')
///////////////////////////////////////////////////////////////
//          5) Construct  New Random Forest Model           //
///////////////////////////////////////////////////////////////
//5.1) Prepare training data and predictors
//After drawing training polygons, merge them together
var classes2009 = Mangrove2009.merge(NonMangrove2009)
//Define the bands you want to include in the model
var L7bands = ['B4','B5','B3','NDVI','MNDWI','SR','GCVI']
//Create a variable called image to select the bands of interest and clip to geometry
var L7image = L7compositeNew.select(L7bands).clip(sundarban)
//Assemble samples for the model
var L7samples = L7image.sampleRegions({
    collection: classes2009, // Set of geometries selected for training
    properties: ['landcover'], // Label from each geometry
    scale: 30 // Make each sample the same size as Landsat pixel
}).randomColumn('random'); // creates a column with random numbers
//Here we randomly split our samples to set some aside for testing our model's accuracy
// using the "random" column we created
var L7training = L7samples.filter(ee.Filter.lt('random', split)); //Subset training data
var L7testing = L7samples.filter(ee.Filter.gte('random', split)); //Subset testing data
//Print these variables to see how much training and testing data you are using
    print('Samples n =', L7samples.aggregate_count('.all'));
    print('Training n =', L7training.aggregate_count('.all'));
    print('Testing n =', L7testing.aggregate_count('.all'));
//5.2) Begin Random Forest Classification
/////////////////////////////////////////
//.smileRandomForest is used to run the model. Here we run the model using 100 trees
// and 5 randomly selected predictors per split ("(100,5)")
var L7classifier = ee.Classifier.smileRandomForest(100,5).train({ 
    features: L7training.select(['B4','B5','B3','NDVI','MNDWI','SR','GCVI', 'landcover']), //Train using bands and landcover property
    classProperty: 'landcover', //Pull the landcover property from classes
    inputProperties: L7bands
});  
//5.3) Classify the Landsat composite using the Random Forest model
////////////////////////////////////////////////////////////////////
var L7classifiedrf = L7image.select(L7bands) // select the predictors
                      .classify(L7classifier); // .classify applies the Random Forest
//The model results may be "noisy". To reduce noise, create a mask to mask
// unconnected pixels
var pixelcount = L7classifiedrf.connectedPixelCount(100, false); //Create an image that shows the number of pixels each pixel is connected to
var countmask = pixelcount.select(0).gt(25); //filter out all pixels connected to 4 or less 
//Mask the results to only display mangrove extent
var L7classMask = L7classifiedrf.select('classification').gt(0)
var L7classed2010= L7classifiedrf.updateMask(countmask).updateMask(L7classMask)
var extent2010 = L7classed2010
//5.5) Map results
//////////////////
//Add classification to map
// Map.addLayer (L7classed2010, {min: 1, max: 1, palette:'blue'}, 'Mangrove Extent 2010');
///////////////////////////////////////////////////////////////
//          6) Timeseries Comparison Map                     //
///////////////////////////////////////////////////////////////
//6.1) Adding Landsat 7 Spectral Indices
// This function maps spectral indices for Mangrove Mapping using Landsat 7 Imagery
var addIndicesL5 = function(img) {
  // NDVI
  var ndvi = img.normalizedDifference(['B4','B3']).rename('NDVI');
  // NDMI (Normalized Difference Mangrove Index - Shi et al 2016 - New spectral metrics for mangrove forest identification)
  var ndmi = img.normalizedDifference(['B7','B2']).rename('NDMI');
  // MNDWI (Modified Normalized Difference Water Index - Hanqiu Xu, 2006)
  var mndwi = img.normalizedDifference(['B2','B5']).rename('MNDWI');
  // SR (Simple Ratio)
  var sr = img.select('B4').divide(img.select('B3')).rename('SR');
  // Band Ratio 54
  var ratio54 = img.select('B5').divide(img.select('B4')).rename('R54');
  // Band Ratio 35
  var ratio35 = img.select('B3').divide(img.select('B5')).rename('R35');
  // GCVI
  var gcvi = img.expression('(NIR/GREEN)-1',{
    'NIR':img.select('B4'),
    'GREEN':img.select('B2')
  }).rename('GCVI');
  return img
    .addBands(ndvi)
    .addBands(ndmi)
    .addBands(mndwi)
    .addBands(sr)
    .addBands(ratio54)
    .addBands(ratio35)
    .addBands(gcvi);
};
var yearL5 = 1990
var startDateL5 = (yearL5-1)+'-01-01'
var endDateL5 = (yearL5+1)+'-12-31'
var l5 = L5.filterDate(startDateL5,endDateL5)
// Mask for clouds and cloud shadows
    .map(maskClouds)  //We use the same function we used for Landsat 8
//Add the indices
    .map(addIndicesL5)
//6.4) Composite the Landsat image collection
var L5composite = l5
              // Uses the median reducer
              .median() 
              // Clips the composite to our area of interest
              .clip(sundarban);
//6.5) Mask to areas of low elevation and high NDVI and MNDWI
var L5NDVIMask = L5composite.select('NDVI').gt(0.25);
var L5MNDWIMask = L5composite.select('MNDWI').gt(-0.50);
var L5compositeNew = L5composite
                        .updateMask(L5NDVIMask)
                        .updateMask(L5MNDWIMask)
                        // .updateMask(elevationMask) //We can use the same mask as before
//6.6) Display results  
//Select bands and parameters for visualization
//We use bands 4, 5, and 3 instead
var L5visPar = {bands:['B4','B5','B3'], min: 0, max: 0.35}; 
//Add layer to map
// Map.addLayer(L5compositeNew, L5visPar, 'Landsat Composite 1990')
///////////////////////////////////////////////////////////////
//          5) Construct  New Random Forest Model           //
///////////////////////////////////////////////////////////////
//5.1) Prepare training data and predictors
// After drawing training polygons, merge them together
var classes1990 = Mangrove1990.merge(NonMangrove1990)
//Define the bands you want to include in the model
var L5bands = ['B4','B5','B3','NDVI','MNDWI','SR','GCVI']
//Create a variable called image to select the bands of interest and clip to geometry
var L5image = L5compositeNew.select(L5bands).clip(sundarban)
//Assemble samples for the model
var L5samples = L5image.sampleRegions({
    collection: classes1990, // Set of geometries selected for training
    properties: ['landcover'], // Label from each geometry
    scale: 30 // Make each sample the same size as Landsat pixel
}).randomColumn('random'); // creates a column with random numbers
//Here we randomly split our samples to set some aside for testing our model's accuracy
// using the "random" column we created
var L5training = L5samples.filter(ee.Filter.lt('random', split)); //Subset training data
var L5testing = L5samples.filter(ee.Filter.gte('random', split)); //Subset testing data
//Print these variables to see how much training and testing data you are using
print('Samples n =', L5samples.aggregate_count('.all'));
print('Training n =', L5training.aggregate_count('.all'));
print('Testing n =', L5testing.aggregate_count('.all'));
//5.2) Begin Random Forest Classification
/////////////////////////////////////////
//.smileRandomForest is used to run the model. Here we run the model using 100 trees
// and 5 randomly selected predictors per split ("(100,5)")
var L5classifier = ee.Classifier.smileRandomForest(100,5).train({ 
    features: L5training.select(['B4','B5','B3','NDVI','MNDWI','SR','GCVI', 'landcover']), //Train using bands and landcover property
    classProperty: 'landcover', //Pull the landcover property from classes
    inputProperties: L5bands
});  
//5.3) Classify the Landsat composite using the Random Forest model
////////////////////////////////////////////////////////////////////
var L5classifiedrf = L5image.select(L5bands) // select the predictors
                      .classify(L5classifier); // .classify applies the Random Forest
//The model results may be "noisy". To reduce noise, create a mask to mask
// unconnected pixels
var pixelcount = L5classifiedrf.connectedPixelCount(100, false); //Create an image that shows the number of pixels each pixel is connected to
var countmask = pixelcount.select(0).gt(25); //filter out all pixels connected to 4 or less 
//Mask the results to only display mangrove extent
var L5classMask = L5classifiedrf.select('classification').gt(0)
var L5classed1990= L5classifiedrf.updateMask(countmask).updateMask(L5classMask)
var extent1990 = L5classed1990
//5.5) Map results
//////////////////
//Add classification to map
// Map.addLayer (L5classed1990, {min: 1, max: 1, palette:'purple'}, 'Mangrove Extent 1990');
///////////////////////////////////////////////////////////////
//          6) Calculate Mangrove Area                       //
///////////////////////////////////////////////////////////////
// //6.1) Calculate Mangrove Area in 2010
// ///////////////////////////////////////
// //Use reduceRegion with a Sum reducer to calculate total area
// var get1990= L5classed.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
//       reducer:ee.Reducer.sum(),
//       geometry:sundarban,
//       scale: 100,
//       maxPixels:1e13,
//       tileScale: 16
//       }).get('classification');
// print(get1990, 'Mangrove Extent 1990 in ha')
// //Use reduceRegion with a Sum reducer to calculate total area
// var get2010 = L7classed.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
//       reducer:ee.Reducer.sum(),
//       geometry:sundarban,
//       scale: 100,
//       maxPixels:1e13,
//       tileScale: 16
//       }).get('classification');
// print(get2010, 'Mangrove Extent 2010 in ha')
// //6.2) Calculate Mangrove Area in 2020
// ///////////////////////////////////////
// //Use reduceRegion with a Sum reducer to calculate total area
// var get2020 = classed.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
//       reducer:ee.Reducer.sum(),
//       geometry:sundarban,
//       scale: 100,
//       maxPixels:1e13,
//       tileScale: 16
//       }).get('classification');
// print(get2020, 'Mangrove Extent 2020 in ha')
///////////////////////////////////////////////////////////////
//                    1) App Layer                           //
///////////////////////////////////////////////////////////////
var extent1990 = L5classed1990
var extent2010 = L7classed2010
var extent2020 = classed2020
var simard = ee.ImageCollection('projects/mangrovescience/DAAC_Hba_Simard')
//Mosaic the Simard data to an Image so we can clip it later
var hba = simard.mosaic()
////////////////////////////////////////////////////////////////
//      2) Begin setting up map appearance and app layers   //
///////////////////////////////////////////////////////////////
//2.1) Set up general display
//Change style of cursor to 'crosshair'
Map.style().set('cursor', 'crosshair');
//2.2) We want to set up a Viridis color pallete to display the Simard data
var viridis = {min: 0 , max : 25,palette : ['#481567FF','#482677FF','#453781FF','#404788FF','#39568CFF',
                                              '#33638DFF','#2D708EFF','#287D8EFF','#238A8DFF','#1F968BFF',
                                              '#20A387FF','#29AF7FFF','#3CBB75FF','#55C667FF',
                                              '#73D055FF','#95D840FF','#B8DE29FF','#DCE319FF','#FDE725FF' 
]};
//2.3) Create variables for GUI layers for each layer
//We set each layer to "false" so the user can turn them on later
var simHBA = ui.Map.Layer(hba,viridis,'Simard Canopy Hba',false)
var ext1990 = ui.Map.Layer(extent1990, {palette:['6D63EB'], min:1, max:1}, 'Extent 2000',false)
var ext2010 = ui.Map.Layer(extent2010, {palette:['34BFDE'], min:1, max:1}, 'Extent 2010',false)
var ext2020 = ui.Map.Layer(extent2020, {palette:['71F4B7'], min:1, max:1}, 'Extent 2020',false)
//Add these layers to our map. They will be added but not displayed
Map.add(ext1990)
Map.add(ext2010)
Map.add(ext2020)
Map.add(simHBA)
///////////////////////////////////////////////////////////////
//      3) Set up panels and widgets for display             //
///////////////////////////////////////////////////////////////
//3.1) Set up title and summary widgets
//App title
var header = ui.Label('Sundarbans Mangrove Height, Extent, and Loss Explorer', {fontSize: '25px', fontWeight: 'bold', color: '4A997E'});
//App summary
var text = ui.Label(
  'This tool maps mangrove extent in the Sundarbans in 1990, 2010, and 2020 using a Random Forest Classification derived from Landsat imagery. ' +
  'Use the tools below to explore changes in mangrove extent, mangrove canopy height in 2000, and drivers of mangrove loss.',
    {fontSize: '15px'});
//3.2) Create a panel to hold text
var panel = ui.Panel({
  widgets:[header, text],//Adds header and text
  style:{width: '300px',position:'middle-right'}}); 
//3.3) Create variable for additional text and separators
//This creates another panel to house a line separator and instructions for the user
var intro = ui.Panel([
  ui.Label({
    value: '____________________________________________',
    style: {fontWeight: 'bold',  color: '4A997E'},
  }),
  ui.Label({
    value:'Select layers to display.',
    style: {fontSize: '15px', fontWeight: 'bold'}
  })
]);
//Add this new panel to the larger panel we created 
panel.add(intro)
//3.4) Add our main panel to the root of our GUI
ui.root.insert(1,panel)
///////////////////////////////////////////////////////////////
//         4) Add checkbox widgets and legends               //
///////////////////////////////////////////////////////////////
//4.1) Create a new label for this series of checkboxes
var extLabel = ui.Label({value:'Mangrove Extent',
style: {fontWeight: 'bold', fontSize: '16px', margin: '10px 5px'}
});
//4.2) Add checkboxes to our display
//Create checkboxes that will allow the user to view the extent map for different years
//Creating the checkbox will not do anything yet, we add functionality further 
// in the code
var extCheck = ui.Checkbox('1990').setValue(false); //false = unchecked
var extCheck2 = ui.Checkbox('2010').setValue(false);
var extCheck3 = ui.Checkbox('2020').setValue(false);
//Now do the same for the Simard Height map
var heightLab = ui.Label({value:'Mangrove Height (Simard et al. 2019)',
style: {fontWeight: 'bold', fontSize: '16px', margin: '10px 5px'}
});
var heightCheck = ui.Checkbox('2000').setValue(false);
//4.3) Create legends
//The following code creates legends we can add to the panel
//Extent Legend
///////////////
// Set position of panel
var extentLegend = ui.Panel({
  style: {
    position: 'bottom-left',
    padding: '8px 15px'
  }
});
// The following creates and styles 1 row of the legend.
var makeRowa = function(color, name) {
      // Create the label that is actually the colored box.
      var colorBox = ui.Label({
        style: {
          backgroundColor: '#' + color,
          // Use padding to give the box height and width.
          padding: '8px',
          margin: '0 0 4px 0'
        }
      });
      // Create a label with the description text.
      var description = ui.Label({
        value: name,
        style: {margin: '0 0 4px 6px'}
      });
      // Return the panel
      return ui.Panel({
        widgets: [colorBox, description],
        layout: ui.Panel.Layout.Flow('horizontal')
      });
};
//Create a palette using the same colors we used for each extent layer
var paletteMAPa = [
'6D63EB',//2000
'34BFDE',//2010
'71F4B7',//2020
];
// Name of each legend value
var namesa = ['1990','2010','2020']; 
// Add color and names to legend
for (var i = 0; i < 3; i++) {
  extentLegend.add(makeRowa(paletteMAPa[i], namesa[i]));
}  
//Height Legend
///////////////
// This uses function to construct a legend for the given single-band vis
// parameters.  Requires that the vis parameters specify 'min' and 
// 'max' but not 'bands'.
function makeLegend2 (viridis) {
  var lon = ee.Image.pixelLonLat().select('longitude');
  var gradient = lon.multiply((viridis.max-viridis.min)/100.0).add(viridis.min);
  var legendImage = gradient.visualize(viridis);
  var thumb = ui.Thumbnail({
    image: legendImage, 
    params: {bbox:'0,0,100,8', dimensions:'256x20'},  
    style: {position: 'bottom-center'}
  });
  var panel2 = ui.Panel({
    widgets: [
      ui.Label('5 m'), 
      ui.Label({style: {stretch: 'horizontal'}}), 
      ui.Label('45 m')
    ],
    layout: ui.Panel.Layout.flow('horizontal'),
    style: {stretch: 'horizontal', maxWidth: '270px', padding: '0px 0px 0px 8px'}
  });
  return ui.Panel().add(panel2).add(thumb);
}
//4.4) Add these new widgets to the panel in the order you want them to appear
panel.add(extLabel)
      .add(extCheck)
      .add(extCheck2)
      .add(extCheck3)
      .add(extentLegend)
      .add(heightLab)
      .add(makeLegend2(viridis))
      .add(heightCheck)
///////////////////////////////////////////////////////////////
//          5) Add functionality to widgets                  //
///////////////////////////////////////////////////////////////
//For each checkbox we create function so that clicking the checkbox
//Turns on layers of interest
//Extent 1990
var doCheckbox = function() {
  extCheck.onChange(function(checked){
  ext1990.setShown(checked)
  })
}
doCheckbox();
//Extent 2010
var doCheckbox2 = function() {
  extCheck2.onChange(function(checked){
  ext2010.setShown(checked)
  })
}
doCheckbox2();
//Extent 2020
var doCheckbox3 = function() {
  extCheck3.onChange(function(checked){
  ext2020.setShown(checked)
  })
}
doCheckbox3();
//Simard Height Data
var doCheckbox4 = function() {
  heightCheck.onChange(function(checked){
  simHBA.setShown(checked)
  })
}
doCheckbox4();
////////////////////////////////////////////////////////
//       6) Add a clicking feature to get tree Height //
////////////////////////////////////////////////////////
// Create an inspector panel with a horizontal layout.
var inspector = ui.Panel({
  layout: ui.Panel.Layout.flow('horizontal')
});
// Add a label to the panel.
inspector.add(ui.Label('Click to get HBA'));
// Add the panel to the default map.
Map.add(inspector);
//Create a function to be invoked when the map is clicked
Map.onClick(function(coords){
// Clear the panel and show a loading message.
inspector.clear();
inspector.style().set('shown', true);
inspector.add(ui.Label('Loading...', {color: 'gray'}));
//Computer the HBA value
var point = ee.Geometry.Point(coords.lon, coords.lat);
var reduce = hba.reduce(ee.Reducer.first());
var sampledPoint = reduce.reduceRegion(ee.Reducer.first(), point, 30);
var computedValue = sampledPoint.get('first');  
// Request the value from the server and use the results in a function.
computedValue.evaluate(function(result) {
inspector.clear();
// Add a label with the results from the server.
inspector.add(ui.Label({
      value: 'HBA: ' + result.toFixed(2),
      style: {stretch: 'vertical'}
    }));
// Add a button to hide the Panel.
    inspector.add(ui.Button({
      label: 'Close',
      onClick: function() {
        inspector.style().set('shown', false);
      }
    }));
  });
});
////////////////////////////////////////////////////////
//  7) Constuct graphs to measure extent for each year //
////////////////////////////////////////////////////////
//2000
//Calculate area in Hectares
var get1990 = extent1990.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
      reducer:ee.Reducer.sum(),
      geometry:sundarban,
      scale: 1000,
      maxPixels:1e13,
      tileScale: 16
      }).get('classification');
//Get area for the sundarban region
var feature = ee.Feature(sundarban)
var feature1990 = feature.set('1990', ee.Number(get1990))
//Construct Bar Chart
var chart1990 = ui.Chart.feature.byProperty(feature1990, ['1990'], ['Total'])
//Set up title and labels for chart
chart1990.setOptions({
  title: 'Total Mangrove Area',
  vAxis: {title: 'Area in Hectares'},
  legend: {position: 'none'},
  hAxis: {
    title: 'Year',
    logScale: false
  }
});
//2010
//Calculate area in Hectares
var get2010 = extent2010.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
      reducer:ee.Reducer.sum(),
      geometry:sundarban,
      scale: 1000,
      maxPixels:1e13,
      tileScale: 16
      }).get('classification');
//Get area for the Guyana region
var feature2010 = feature.set('2010', ee.Number(get2010))
//Construct Bar Chart
var chart2010 = ui.Chart.feature.byProperty(feature2010, ['2010'], ['Total'])
//Set up title and labels for chart
chart2010.setOptions({
  title: 'Total Mangrove Area',
  vAxis: {title: 'Area in Hectares'},
  legend: {position: 'none'},
  hAxis: {
    title: 'Year',
    logScale: false
  }
});
//2020
//Calculate area in Hectares
var get2020 = extent2020.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
      reducer:ee.Reducer.sum(),
      geometry:sundarban,
      scale: 1000,
      maxPixels:1e13,
      tileScale: 16
      }).get('classification');
//Get area for the Guyana region
var feature2020 = feature.set('2020', ee.Number(get2020))  
//Construct Bar Chart
var chart2020 = ui.Chart.feature.byProperty(feature2020, ['2020'], ['Total'])
//Set up title and labels for chart
chart2020.setOptions({
  title: 'Total Mangrove Area',
  vAxis: {title: 'Area in Hectares'},
  legend: {position: 'none'},
  hAxis: {
    title: 'Year',
    logScale: false
  }
});
////////////////////////////////////////////////////////
//  8) Create a dropdown menu to display graph results //
////////////////////////////////////////////////////////
//Add a panel to hold graphs within main panel
var panelGraph = ui.Panel({
  style:{width: '300px',position:'middle-right'}
})
//Create key of items for dropdown
var y1990 = '1990'
var y2010 = '2010'
var y2020 = '2020'
//Construct Dropdown
var graphSelect = ui.Select({
  items:[y1990,y2010,y2020],
  placeholder:'Choose year',
  onChange: selectLayer,
  style: {position:'top-right'}
})
var constraints = []
//Write a function that runs on change of Dropdown
function selectLayer(){
  var graph = graphSelect.getValue() // get value from dropdown selection
  panelGraph.clear() //clear graph panel between selections so only one graph displays
  //We use "if else" statements to write instructions for drawing graphs
  if (graph == y1990){
    panelGraph.add(chart1990)
  }
  else if (graph == y2010){
    panelGraph.add(chart2010)
  }
  else if (graph == y2020){
    panelGraph.add(chart2020)
  }
  for (var i = 0; i < constraints.length; ++i) {
    var constraint = select[i];
    var mode = constraint.mode.getValue();
    var value = parseFloat(constraint.value.getValue());
    if (mode == GREATER_THAN) {
      image = image.updateMask(constraint.image.gt(value));
    } else {
      image = image.updateMask(constraint.image.lt(value));
    }
}
}
//Create a new label
var graphLabel = ui.Label({value:'Select year to display mangrove extent',
style: {fontWeight: 'bold', fontSize: '16px', margin: '10px 5px'}
});
//Add selecter and graph panel to main panel
panel.add(graphLabel)
      .add(graphSelect)
      .add(panelGraph)