var imageVisParam8 = ui.import && ui.import("imageVisParam8", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4",
          "b2",
          "b1"
        ],
        "min": 0.023268421944230795,
        "max": 0.4212311181984842,
        "gamma": 1
      }
    }) || {"opacity":1,"bands":["b4","b2","b1"],"min":0.023268421944230795,"max":0.4212311181984842,"gamma":1},
    imageVisParam10 = ui.import && ui.import("imageVisParam10", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": -0.22045719444751738,
        "max": 0.7936138790845871,
        "palette": [
          "ffd3be",
          "ffe087",
          "ffee78",
          "ff9dbd",
          "ff35ae",
          "d83dff",
          "8c7eff",
          "183fff",
          "60fff0",
          "41ff47",
          "1dff02"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":-0.22045719444751738,"max":0.7936138790845871,"palette":["ffd3be","ffe087","ffee78","ff9dbd","ff35ae","d83dff","8c7eff","183fff","60fff0","41ff47","1dff02"]},
    imageVisParam11 = ui.import && ui.import("imageVisParam11", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": -0.013430853150784969,
        "max": 0.6847485664859414,
        "palette": [
          "ffd3be",
          "ffe087",
          "ffee78",
          "ff9dbd",
          "ff35ae",
          "d83dff",
          "8c7eff",
          "183fff",
          "60fff0",
          "41ff47",
          "1dff02"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":-0.013430853150784969,"max":0.6847485664859414,"palette":["ffd3be","ffe087","ffee78","ff9dbd","ff35ae","d83dff","8c7eff","183fff","60fff0","41ff47","1dff02"]},
    imageVisParam12 = ui.import && ui.import("imageVisParam12", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": -0.18865275621414185,
        "max": 9.435410621166229,
        "palette": [
          "ffd3be",
          "ffe087",
          "ffee78",
          "ff9dbd",
          "ff35ae",
          "d83dff",
          "8c7eff",
          "183fff",
          "60fff0",
          "41ff47",
          "1dff02"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":-0.18865275621414185,"max":9.435410621166229,"palette":["ffd3be","ffe087","ffee78","ff9dbd","ff35ae","d83dff","8c7eff","183fff","60fff0","41ff47","1dff02"]},
    imageVisParam13 = ui.import && ui.import("imageVisParam13", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": -0.14039265871047973,
        "max": 7.883117434978485,
        "palette": [
          "ffd3be",
          "ffe087",
          "ffee78",
          "ff9dbd",
          "ff35ae",
          "d83dff",
          "8c7eff",
          "183fff",
          "60fff0",
          "41ff47",
          "1dff02"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":-0.14039265871047973,"max":7.883117434978485,"palette":["ffd3be","ffe087","ffee78","ff9dbd","ff35ae","d83dff","8c7eff","183fff","60fff0","41ff47","1dff02"]},
    ZONAS = ui.import && ui.import("ZONAS", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -74.31215090827598,
                4.328587105307216
              ],
              [
                -74.31215023772377,
                4.328578412993407
              ],
              [
                -74.31214084999294,
                4.32856905203997
              ],
              [
                -74.31212810950106,
                4.328574401156246
              ],
              [
                -74.31212945060548,
                4.3285884425862555
              ],
              [
                -74.31214621441055,
                4.328593123062879
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -74.31219985859059,
                4.328508874472037
              ],
              [
                -74.31220589356039,
                4.328501519436563
              ],
              [
                -74.31221259908234,
                4.328484803446592
              ],
              [
                -74.31219449417299,
                4.328474105212822
              ],
              [
                -74.31217370705481,
                4.328489483923828
              ],
              [
                -74.3121891297554,
                4.328506199913697
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -74.31211872177062,
                4.328727853923989
              ],
              [
                -74.31211201624718,
                4.32871314385463
              ],
              [
                -74.31209592299133,
                4.328715818411508
              ],
              [
                -74.31209391133419,
                4.328731531441368
              ],
              [
                -74.312106651829,
                4.328737214877057
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -74.31209403876117,
                4.328377119138355
              ],
              [
                -74.31208330992511,
                4.328371101380544
              ],
              [
                -74.31206788722328,
                4.3283664209021895
              ],
              [
                -74.3120631933575,
                4.328377119138355
              ],
              [
                -74.312061852253,
                4.328391160573086
              ],
              [
                -74.3120719105368,
                4.328404533367848
              ],
              [
                -74.31209202710441,
                4.328403864728106
              ],
              [
                -74.31210208538822,
                4.328382468256386
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "NOMBRE": "ARBOL1"
      },
      "color": "#140f13",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #140f13 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-74.31215090827598, 4.328587105307216],
                  [-74.31215023772377, 4.328578412993407],
                  [-74.31214084999294, 4.32856905203997],
                  [-74.31212810950106, 4.328574401156246],
                  [-74.31212945060548, 4.3285884425862555],
                  [-74.31214621441055, 4.328593123062879]]]),
            {
              "NOMBRE": "ARBOL1",
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-74.31219985859059, 4.328508874472037],
                  [-74.31220589356039, 4.328501519436563],
                  [-74.31221259908234, 4.328484803446592],
                  [-74.31219449417299, 4.328474105212822],
                  [-74.31217370705481, 4.328489483923828],
                  [-74.3121891297554, 4.328506199913697]]]),
            {
              "NOMBRE": "ARBOL1",
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-74.31211872177062, 4.328727853923989],
                  [-74.31211201624718, 4.32871314385463],
                  [-74.31209592299133, 4.328715818411508],
                  [-74.31209391133419, 4.328731531441368],
                  [-74.312106651829, 4.328737214877057]]]),
            {
              "NOMBRE": "ARBOL1",
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-74.31209403876117, 4.328377119138355],
                  [-74.31208330992511, 4.328371101380544],
                  [-74.31206788722328, 4.3283664209021895],
                  [-74.3120631933575, 4.328377119138355],
                  [-74.312061852253, 4.328391160573086],
                  [-74.3120719105368, 4.328404533367848],
                  [-74.31209202710441, 4.328403864728106],
                  [-74.31210208538822, 4.328382468256386]]]),
            {
              "NOMBRE": "ARBOL1",
              "system:index": "3"
            })]),
    imageVisParam = ui.import && ui.import("imageVisParam", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": -0.14760756731033325,
        "max": 7.529586913585663,
        "palette": [
          "ff4388",
          "ff39f9",
          "3a2dff",
          "47ffff",
          "44ff2d"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":-0.14760756731033325,"max":7.529586913585663,"palette":["ff4388","ff39f9","3a2dff","47ffff","44ff2d"]},
    imageVisParam3 = ui.import && ui.import("imageVisParam3", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": 6.006019115447998,
        "max": 9.63591194152832,
        "palette": [
          "f4ff4e"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":6.006019115447998,"max":9.63591194152832,"palette":["f4ff4e"]},
    imageVisParam2 = ui.import && ui.import("imageVisParam2", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": -0.00951550979167223,
        "max": 0.9049958650395274,
        "palette": [
          "ff2b79",
          "df2fff",
          "3d55ff",
          "64ff3d"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":-0.00951550979167223,"max":0.9049958650395274,"palette":["ff2b79","df2fff","3d55ff","64ff3d"]},
    imageVisParam4 = ui.import && ui.import("imageVisParam4", "imageVisParam", {
      "params": {
        "opacity": 1,
        "bands": [
          "b4"
        ],
        "min": 6,
        "max": 8,
        "palette": [
          "23ff2a"
        ]
      }
    }) || {"opacity":1,"bands":["b4"],"min":6,"max":8,"palette":["23ff2a"]};
//Realizamos una llamada a la imagen tomada con dron banda verde
var IMAGEN = ee.Image ('users/cartografia2016ud/GUCHIPAS/GUCHIPAS_AGUACATE');
//Imprimimos la informacion de la imagen multiespectral 
print (IMAGEN);
//adicionamos la imagen al espacio de trabajo  
Map.addLayer (IMAGEN, imageVisParam8, 'RGB');
// Centramos la imagen
Map.centerObject(IMAGEN, 18);
// declaramos la variable indice NDVI
var NDVI = IMAGEN.expression ('float ((NIR-ROJO)/(NIR+ROJO))',{
    'NIR': IMAGEN.select ('b4'),
    'ROJO': IMAGEN.select ('b2')});
// Representamos la variable NDVI al espacio de trabajo
Map.addLayer (NDVI, imageVisParam2,'NDVI');
// declaramos la variable indice GNDVI
var GNDVI = IMAGEN.expression ('float ((NIR-VERDE)/(NIR+VERDE))',{
    'NIR': IMAGEN.select ('b4'),
    'VERDE': IMAGEN.select ('b1')});
// Representamos la variable GNDVI al espacio de trabajo
Map.addLayer(GNDVI, imageVisParam10,'GNDVI');
// declaramos la variable indice SAVI
var SAVI = IMAGEN.expression ('float (((NIR-ROJO)/(NIR+ROJO+0.5))*1.5)',{
    'NIR': IMAGEN.select ('b4'),
    'ROJO': IMAGEN.select ('b2')});
// Representamos la variable SAVI al espacio de trabajo
Map.addLayer (SAVI, imageVisParam11,'SAVI');
// declaramos la variable indice GCI
var GCI = IMAGEN.expression ('float (((NIR/VERDE)-1))',{
    'NIR': IMAGEN.select ('b4'),
    'VERDE': IMAGEN.select ('b1')});
// Representamos la variable GCI al espacio de trabajo
Map.addLayer (GCI, imageVisParam,'GCI');
// CREAMOS LA VARIABLE COMPOSICION
var COMPOSICION = NDVI.rename('NDVI').addBands(GNDVI.rename('GNDVI')).addBands(SAVI.rename('SAVI')).addBands(GCI.rename('GCI'));
// AGREGAR LA COMPOSICION AL ESPACIO DE TRABAJO
print(COMPOSICION);
Map.addLayer(COMPOSICION, {}, 'INDICES');
// Definimos areas para analisis desde llas geomtry de los diferentes indices.
// Creamos el grafico de analisis de indices.
var GRAFICA= ui.Chart.image.regions(COMPOSICION, ZONAS, ee.Reducer.mean(), 10,'bands');
print(GRAFICA); 
var GRAFICA2 = ui.Chart.image.byRegion(COMPOSICION, ZONAS.select('NOMBRE'), ee.Reducer.mean(), 10);
print(GRAFICA2);
// agregamos la capa de informacion de campo tipo punto
var PUNTOS_CAMPO = ee.FeatureCollection('users/cartografia2016ud/GUCHIPAS/INFORMACION_CAMPO');
print (PUNTOS_CAMPO);
Map.addLayer (PUNTOS_CAMPO, {color: 'FFFFFF'}, 'PUNTOS_CAMPO');
// realizamos una mascara para EL INDICE GCI
var GCI_MAS = GCI.updateMask(GCI.gte(6));
// IMPRIMIMOS Y AGREGAMOS EN EL VISOR LAS CARACTERISTICAS DEL RASTER 
print (GCI_MAS)
Map.addLayer(GCI_MAS, imageVisParam3, 'GCI_MAS');
// CONVERTIMOS GCI_MAS EN ENTERO Y AGREGAMOS A LA VISTA
var GCI_MAS_INT = GCI_MAS.expression ('int (B4*1)',{
    'B4': GCI_MAS.select ('b4'),
    });
Map.addLayer (GCI_MAS_INT, imageVisParam4, 'GCI_MAS_INT');
// CONVERTIMOS EL GCI_MAS_INT EN POLIGONO 
var poligono = GCI_MAS_INT.reduceToVectors({
  crs: IMAGEN.projection(),
  scale: 1,  // este valor es el lado del poligono 
  geometryType: 'bb', // bb encierra en poligono, polygon encierra en un solo poligono, o el centroide centroid 
  eightConnected: true,
  reducer: ee.Reducer.countEvery()
  });          
Map.addLayer (poligono);
// EXPORTAMOS LA CAPA POLIGONO A KMZ O VECTORES
Export.table.toDrive({
  collection: poligono,
  description:'VECTORES',
  fileFormat: 'KML'
});