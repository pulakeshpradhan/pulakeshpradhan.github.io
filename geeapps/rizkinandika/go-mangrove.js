var Tahura = ui.import && ui.import("Tahura", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.17586990220097,
                -8.74460864752192
              ],
              [
                115.17380996567753,
                -8.756707371580752
              ],
              [
                115.17312332016972,
                -8.76519029680083
              ],
              [
                115.16608520371464,
                -8.780119774753949
              ],
              [
                115.16866012436894,
                -8.784021698403217
              ],
              [
                115.17638488633183,
                -8.784360994171626
              ],
              [
                115.18393798691777,
                -8.783512754168452
              ],
              [
                115.19063278061894,
                -8.784530641939405
              ],
              [
                115.20779891831425,
                -8.795727222918359
              ],
              [
                115.21638198716191,
                -8.801834306241565
              ],
              [
                115.22805496079472,
                -8.797254003194658
              ],
              [
                115.23492141587285,
                -8.793691506090894
              ],
              [
                115.24041457993535,
                -8.786396762261493
              ],
              [
                115.23869796616582,
                -8.756670149928144
              ],
              [
                115.23921295029668,
                -8.751919626813612
              ],
              [
                115.23663802964238,
                -8.741400395601886
              ],
              [
                115.23114486557988,
                -8.730711195185123
              ],
              [
                115.22427841050175,
                -8.722906188715573
              ],
              [
                115.21518035752324,
                -8.715101019111758
              ],
              [
                115.2047090135291,
                -8.71289518076403
              ],
              [
                115.19217773301152,
                -8.717815879207198
              ],
              [
                115.18033309800175,
                -8.722227484789235
              ],
              [
                115.17518325669316,
                -8.728335775711395
              ],
              [
                115.17518325669316,
                -8.738176700767623
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#d63000",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[115.17586990220097, -8.74460864752192],
          [115.17380996567753, -8.756707371580752],
          [115.17312332016972, -8.76519029680083],
          [115.16608520371464, -8.780119774753949],
          [115.16866012436894, -8.784021698403217],
          [115.17638488633183, -8.784360994171626],
          [115.18393798691777, -8.783512754168452],
          [115.19063278061894, -8.784530641939405],
          [115.20779891831425, -8.795727222918359],
          [115.21638198716191, -8.801834306241565],
          [115.22805496079472, -8.797254003194658],
          [115.23492141587285, -8.793691506090894],
          [115.24041457993535, -8.786396762261493],
          [115.23869796616582, -8.756670149928144],
          [115.23921295029668, -8.751919626813612],
          [115.23663802964238, -8.741400395601886],
          [115.23114486557988, -8.730711195185123],
          [115.22427841050175, -8.722906188715573],
          [115.21518035752324, -8.715101019111758],
          [115.2047090135291, -8.71289518076403],
          [115.19217773301152, -8.717815879207198],
          [115.18033309800175, -8.722227484789235],
          [115.17518325669316, -8.728335775711395],
          [115.17518325669316, -8.738176700767623]]]),
    Lembongan = ui.import && ui.import("Lembongan", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.44992042460531,
                -8.669553920438425
              ],
              [
                115.45000625529379,
                -8.672014562315752
              ],
              [
                115.45129371562093,
                -8.67515397855139
              ],
              [
                115.45472694316,
                -8.677190342617113
              ],
              [
                115.45446945109457,
                -8.683723602749636
              ],
              [
                115.44966293253988,
                -8.689577985951061
              ],
              [
                115.44871879496664,
                -8.694414146598575
              ],
              [
                115.44992042460531,
                -8.696704937751512
              ],
              [
                115.45240951457113,
                -8.69695946923711
              ],
              [
                115.45446945109457,
                -8.69585649821708
              ],
              [
                115.456529387618,
                -8.694244457807814
              ],
              [
                115.4587609855184,
                -8.692293031190735
              ],
              [
                115.46150756754965,
                -8.690002213066085
              ],
              [
                115.46313194838996,
                -8.68496499131689
              ],
              [
                115.46536354629035,
                -8.683989255128006
              ],
              [
                115.4680889079825,
                -8.6813056156022
              ],
              [
                115.46971969106356,
                -8.67994805566891
              ],
              [
                115.47117881276766,
                -8.67846321886922
              ],
              [
                115.47246627309481,
                -8.676893527865897
              ],
              [
                115.47345332601229,
                -8.674984435368684
              ],
              [
                115.47375373342196,
                -8.672693511561008
              ],
              [
                115.473582072045,
                -8.670360148875602
              ],
              [
                115.472680849816,
                -8.668451023172736
              ],
              [
                115.47117881276766,
                -8.666923715627517
              ],
              [
                115.4695480296866,
                -8.666032783360139
              ],
              [
                115.46761683919588,
                -8.665481252803135
              ],
              [
                115.46525649526278,
                -8.665141848981255
              ],
              [
                115.46293906667391,
                -8.664844870385775
              ],
              [
                115.46010665395418,
                -8.664378189261786
              ],
              [
                115.45800380208651,
                -8.66386908192043
              ],
              [
                115.45602969625155,
                -8.66361452799126
              ],
              [
                115.45495681264559,
                -8.664123635677274
              ],
              [
                115.45366935231844,
                -8.665311550930495
              ],
              [
                115.45208148458163,
                -8.66628733565201
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {},
      "color": "#98ff00",
      "mode": "Geometry",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[115.44992042460531, -8.669553920438425],
          [115.45000625529379, -8.672014562315752],
          [115.45129371562093, -8.67515397855139],
          [115.45472694316, -8.677190342617113],
          [115.45446945109457, -8.683723602749636],
          [115.44966293253988, -8.689577985951061],
          [115.44871879496664, -8.694414146598575],
          [115.44992042460531, -8.696704937751512],
          [115.45240951457113, -8.69695946923711],
          [115.45446945109457, -8.69585649821708],
          [115.456529387618, -8.694244457807814],
          [115.4587609855184, -8.692293031190735],
          [115.46150756754965, -8.690002213066085],
          [115.46313194838996, -8.68496499131689],
          [115.46536354629035, -8.683989255128006],
          [115.4680889079825, -8.6813056156022],
          [115.46971969106356, -8.67994805566891],
          [115.47117881276766, -8.67846321886922],
          [115.47246627309481, -8.676893527865897],
          [115.47345332601229, -8.674984435368684],
          [115.47375373342196, -8.672693511561008],
          [115.473582072045, -8.670360148875602],
          [115.472680849816, -8.668451023172736],
          [115.47117881276766, -8.666923715627517],
          [115.4695480296866, -8.666032783360139],
          [115.46761683919588, -8.665481252803135],
          [115.46525649526278, -8.665141848981255],
          [115.46293906667391, -8.664844870385775],
          [115.46010665395418, -8.664378189261786],
          [115.45800380208651, -8.66386908192043],
          [115.45602969625155, -8.66361452799126],
          [115.45495681264559, -8.664123635677274],
          [115.45366935231844, -8.665311550930495],
          [115.45208148458163, -8.66628733565201]]]),
    Mangrove = ui.import && ui.import("Mangrove", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.18572907525956,
                -8.729408216471164
              ],
              [
                115.18645863611161,
                -8.72928096179548
              ],
              [
                115.1855574138826,
                -8.728178086121776
              ],
              [
                115.18448453027665,
                -8.728008412651922
              ],
              [
                115.18418412286698,
                -8.729577889304574
              ],
              [
                115.18499951440751,
                -8.729832398410007
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.20988937307706,
                -8.723809998641107
              ],
              [
                115.20946021963468,
                -8.722664687821862
              ],
              [
                115.2090310661923,
                -8.722664687821862
              ],
              [
                115.2075719444882,
                -8.722876782683048
              ],
              [
                115.20834442068448,
                -8.723767579784523
              ],
              [
                115.20928855825773,
                -8.724446280911629
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.18255636601704,
                -8.776020366886868
              ],
              [
                115.1838652840163,
                -8.775129694807859
              ],
              [
                115.18377945332783,
                -8.774302640249322
              ],
              [
                115.183629249623,
                -8.773708856352968
              ],
              [
                115.18289968877095,
                -8.773899715566088
              ],
              [
                115.1825134506728,
                -8.773899715566088
              ],
              [
                115.18186972050923,
                -8.774896423195877
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.19256055905974,
                -8.77570226996116
              ],
              [
                115.19258201673186,
                -8.773920922139268
              ],
              [
                115.19198120191253,
                -8.773666443181167
              ],
              [
                115.19123018338836,
                -8.773708856352968
              ],
              [
                115.19080102994597,
                -8.77419660748035
              ],
              [
                115.1907151992575,
                -8.774832803639898
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.21705581708912,
                -8.780188286605831
              ],
              [
                115.21885826154713,
                -8.780739647770936
              ],
              [
                115.21958782239918,
                -8.779827780785544
              ],
              [
                115.21945907636646,
                -8.778512991884114
              ],
              [
                115.21830036207203,
                -8.778279722398816
              ],
              [
                115.2171416477776,
                -8.778428166633706
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.45742480476216,
                -8.670215059250673
              ],
              [
                115.45950619895771,
                -8.669727172305313
              ],
              [
                115.459377452925,
                -8.668411995645108
              ],
              [
                115.45806853492573,
                -8.667775618189442
              ],
              [
                115.4564592095168,
                -8.668645333775544
              ],
              [
                115.45682398994282,
                -8.669515047348865
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.46426980216816,
                -8.669790809768894
              ],
              [
                115.46553580482319,
                -8.670384758909252
              ],
              [
                115.46650140006855,
                -8.670660520690983
              ],
              [
                115.46716658790425,
                -8.67055445849119
              ],
              [
                115.46746699531391,
                -8.669366559808113
              ],
              [
                115.46527831275776,
                -8.669175647169485
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 1
      },
      "color": "#d63000",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #d63000 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[115.18572907525956, -8.729408216471164],
                  [115.18645863611161, -8.72928096179548],
                  [115.1855574138826, -8.728178086121776],
                  [115.18448453027665, -8.728008412651922],
                  [115.18418412286698, -8.729577889304574],
                  [115.18499951440751, -8.729832398410007]]]),
            {
              "landcover": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.20988937307706, -8.723809998641107],
                  [115.20946021963468, -8.722664687821862],
                  [115.2090310661923, -8.722664687821862],
                  [115.2075719444882, -8.722876782683048],
                  [115.20834442068448, -8.723767579784523],
                  [115.20928855825773, -8.724446280911629]]]),
            {
              "landcover": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.18255636601704, -8.776020366886868],
                  [115.1838652840163, -8.775129694807859],
                  [115.18377945332783, -8.774302640249322],
                  [115.183629249623, -8.773708856352968],
                  [115.18289968877095, -8.773899715566088],
                  [115.1825134506728, -8.773899715566088],
                  [115.18186972050923, -8.774896423195877]]]),
            {
              "landcover": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.19256055905974, -8.77570226996116],
                  [115.19258201673186, -8.773920922139268],
                  [115.19198120191253, -8.773666443181167],
                  [115.19123018338836, -8.773708856352968],
                  [115.19080102994597, -8.77419660748035],
                  [115.1907151992575, -8.774832803639898]]]),
            {
              "landcover": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.21705581708912, -8.780188286605831],
                  [115.21885826154713, -8.780739647770936],
                  [115.21958782239918, -8.779827780785544],
                  [115.21945907636646, -8.778512991884114],
                  [115.21830036207203, -8.778279722398816],
                  [115.2171416477776, -8.778428166633706]]]),
            {
              "landcover": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.45742480476216, -8.670215059250673],
                  [115.45950619895771, -8.669727172305313],
                  [115.459377452925, -8.668411995645108],
                  [115.45806853492573, -8.667775618189442],
                  [115.4564592095168, -8.668645333775544],
                  [115.45682398994282, -8.669515047348865]]]),
            {
              "landcover": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.46426980216816, -8.669790809768894],
                  [115.46553580482319, -8.670384758909252],
                  [115.46650140006855, -8.670660520690983],
                  [115.46716658790425, -8.67055445849119],
                  [115.46746699531391, -8.669366559808113],
                  [115.46527831275776, -8.669175647169485]]]),
            {
              "landcover": 1,
              "system:index": "6"
            })]),
    NonMangrove = ui.import && ui.import("NonMangrove", "geometry", {
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.17498732758786,
                -8.771672497346131
              ],
              [
                115.17608166886593,
                -8.771778530835984
              ],
              [
                115.17599583817746,
                -8.76953061436822
              ],
              [
                115.17410756303097,
                -8.768851995402335
              ],
              [
                115.17406464768673,
                -8.769827509775899
              ],
              [
                115.17410756303097,
                -8.770887848580141
              ],
              [
                115.17389298630978,
                -8.771481636988089
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.18485320218825,
                -8.78261869680042
              ],
              [
                115.18736374982619,
                -8.782639902875282
              ],
              [
                115.18781436094069,
                -8.78115547470715
              ],
              [
                115.18796456464553,
                -8.780540495582718
              ],
              [
                115.18515360959792,
                -8.78020119631902
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.22213419529336,
                -8.769700536869538
              ],
              [
                115.222069822277,
                -8.767198124434383
              ],
              [
                115.22112568470376,
                -8.767282952250596
              ],
              [
                115.22028883549112,
                -8.768003987906296
              ],
              [
                115.22033175083536,
                -8.769658123239902
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.21108055005439,
                -8.743655795974295
              ],
              [
                115.21119856725105,
                -8.742086378577106
              ],
              [
                115.21026515851386,
                -8.741407709547088
              ],
              [
                115.2085056294001,
                -8.742680212964345
              ],
              [
                115.20936393628486,
                -8.743825462323928
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.19318643655569,
                -8.721646382574647
              ],
              [
                115.1948815926531,
                -8.720098082217628
              ],
              [
                115.19131961908133,
                -8.71984356647626
              ],
              [
                115.19127670373709,
                -8.721200981759655
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.45901537164791,
                -8.676782860176338
              ],
              [
                115.46045303567989,
                -8.676613163408515
              ],
              [
                115.46081781610592,
                -8.675743466269655
              ],
              [
                115.46073198541744,
                -8.675064676859204
              ],
              [
                115.45965910181148,
                -8.675001040289077
              ],
              [
                115.45903682932003,
                -8.675446496053572
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                115.46043157800777,
                -8.67345254709209
              ],
              [
                115.4611396811877,
                -8.67254041797449
              ],
              [
                115.46043157800777,
                -8.671840410405334
              ],
              [
                115.45942306741817,
                -8.672137383472771
              ],
              [
                115.45875787958248,
                -8.672625267288172
              ],
              [
                115.45865059122188,
                -8.67374951888495
              ]
            ]
          ],
          "evenOdd": true
        }
      ],
      "displayProperties": [],
      "properties": {
        "landcover": 0
      },
      "color": "#98ff00",
      "mode": "FeatureCollection",
      "shown": false,
      "locked": false
    }) || 
    /* color: #98ff00 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[115.17498732758786, -8.771672497346131],
                  [115.17608166886593, -8.771778530835984],
                  [115.17599583817746, -8.76953061436822],
                  [115.17410756303097, -8.768851995402335],
                  [115.17406464768673, -8.769827509775899],
                  [115.17410756303097, -8.770887848580141],
                  [115.17389298630978, -8.771481636988089]]]),
            {
              "landcover": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.18485320218825, -8.78261869680042],
                  [115.18736374982619, -8.782639902875282],
                  [115.18781436094069, -8.78115547470715],
                  [115.18796456464553, -8.780540495582718],
                  [115.18515360959792, -8.78020119631902]]]),
            {
              "landcover": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.22213419529336, -8.769700536869538],
                  [115.222069822277, -8.767198124434383],
                  [115.22112568470376, -8.767282952250596],
                  [115.22028883549112, -8.768003987906296],
                  [115.22033175083536, -8.769658123239902]]]),
            {
              "landcover": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.21108055005439, -8.743655795974295],
                  [115.21119856725105, -8.742086378577106],
                  [115.21026515851386, -8.741407709547088],
                  [115.2085056294001, -8.742680212964345],
                  [115.20936393628486, -8.743825462323928]]]),
            {
              "landcover": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.19318643655569, -8.721646382574647],
                  [115.1948815926531, -8.720098082217628],
                  [115.19131961908133, -8.71984356647626],
                  [115.19127670373709, -8.721200981759655]]]),
            {
              "landcover": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.45901537164791, -8.676782860176338],
                  [115.46045303567989, -8.676613163408515],
                  [115.46081781610592, -8.675743466269655],
                  [115.46073198541744, -8.675064676859204],
                  [115.45965910181148, -8.675001040289077],
                  [115.45903682932003, -8.675446496053572]]]),
            {
              "landcover": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[115.46043157800777, -8.67345254709209],
                  [115.4611396811877, -8.67254041797449],
                  [115.46043157800777, -8.671840410405334],
                  [115.45942306741817, -8.672137383472771],
                  [115.45875787958248, -8.672625267288172],
                  [115.45865059122188, -8.67374951888495]]]),
            {
              "landcover": 0,
              "system:index": "6"
            })]),
    SRTM = ui.import && ui.import("SRTM", "image", {
      "id": "USGS/SRTMGL1_003"
    }) || ee.Image("USGS/SRTMGL1_003");
/*  
Global Variables
*/
var aoi,
    data,
    satelit,
    areaOfInterest,
    geometry,
    lembongan = 'Nusa Lembongan',
    tahura = 'Tahura Ngurah Rai',
    L8 = 'Landsat 8',
    S2 = 'Sentinel 2'
/*
Visualization parameters
*/
//var visMPT = {"opacity":1, "palette":["ff7c0b", "ffffff"], "min":-2, "max":0}
var visBat = {min: 10,max: 0.2, palette : ['#0107c2', '#2db2ff', '#76ffff']};
var visMPT = {min: 1,max: 1, palette : ['#00a326']};
// Generate main panel and add it to the map.
var panel = ui.Panel({style: {width:'20%'}});
ui.root.insert(0,panel);
var logo = ee.Image('users/rizkinandika/logo_brin').visualize({
    });
var thumb = ui.Thumbnail({
    image: logo,
    params: {
        dimensions: '642x291',
        format: 'png'
        },
    style: {height: '55px', width: '140px',padding :'0'}
    });
var toolPanel = ui.Panel(thumb, 'flow', {width: '300px'});
// Define title and description.
var intro = ui.Label('SPATIO v1.2',
  {fontWeight: 'bold', fontSize: '24px', margin: '0 10px 0 10px', color: 'green'}
);
var intro2 = ui.Label('Sistem Cepat Deteksi Mangrove',
  {fontSize: '14px', margin: '0 10px 0 10px', color: 'green'}
);
var subtitle = ui.Label('Deteksi lokasi mangrove pada aplikasi ini menggunakan metode klasifikasi terbimbing Random Forest pada indeks vegetasi Simple Ratio (SR), Normalized Difference Vegetation Index (NDVI), Normalized Difference Moisture Index (NDMI), Green Chlorophyll Vegetation Index (GCVI), dan The Modified Normalized Difference Water Index (MNDWI).', 
{margin: '10px 10px 0 10px',fontSize: '12px',color: 'gray'});
//panel year
var labelyear = ui.Label({
value:'Masukkan Tahun',
style:{margin: '10px 10px 0 10px', fontSize: '18px', fontWeight: 'bold', color: '27292e'}});
var labelyearr = ui.Label('Informasi Satelit Landsat 8 mulai dari tahun 2013 dan Sentinel 2 mulai dari tahun 2018',
{margin: '0 10px 0 10px',fontSize: '12px',color: 'gray'});
var yearinput = ui.Textbox({placeholder: 'Tahun', style: {width: '55px'}})
// Define the select button for the AOI
var selectData = ui.Select({
  items:[L8,S2],
  placeholder:'Pilih Satelit',
  });
// Add a label.
var labelData = ui.Label({value:'Pilih Satelit',
style: {fontSize: '18px', fontWeight: 'bold'}});
// Define the select button for the AOI
var selectAoi = ui.Select({
  items:[lembongan,tahura],
  placeholder:'Pilih lokasi',
  });
// Add a label.
var labelAoi = ui.Label({value:'Pilih lokasi',
style: {fontSize: '18px', fontWeight: 'bold'}});
// Add title and description to the panel  
panel.add(toolPanel)
    .add(intro)
    .add(intro2)
    .add(subtitle)
    .add(labelyear)
    .add(labelyearr)
    .add(ui.Panel([yearinput],ui.Panel.Layout.flow('horizontal')))
    .add(labelData)
    .add(selectData)
    .add(labelAoi)
    .add(selectAoi);
function execute(){
//////////////////////////////////////////////////////////////
//                   Fungsi AOI                            //
/////////////////////////////////////////////////////////////
function setAreaOfInterest(){
  aoi = selectAoi.getValue();
  if (aoi == lembongan){
      areaOfInterest = Lembongan;
  }
  else if(aoi == tahura){
      areaOfInterest = Tahura;
}
}
setAreaOfInterest();
geometry = areaOfInterest;
//////////////////////////////////////////////////////////////
//                   Fungsi Masking                         //
/////////////////////////////////////////////////////////////
//Landsat 8 cloud Mask
function maskL8sr(image) {
  // Bits 3 and 5 are cloud shadow and cloud, respectively.
  var cloudShadowBitMask = (1 << 3);
  var cloudsBitMask = (1 << 5);
  // Get the pixel QA band.
  var qa = image.select('pixel_qa');
  // Both flags should be set to zero, indicating clear conditions.
  var mask = qa.bitwiseAnd(cloudShadowBitMask).eq(0)
                 .and(qa.bitwiseAnd(cloudsBitMask).eq(0));
  return image.updateMask(mask);
}
//Sentinel 2 Cloud Mask
function maskS2clouds(image) {
  var qa = image.select('QA60');
  // Bits 10 and 11 are clouds and cirrus, respectively.
  var cloudBitMask = 1 << 10;
  var cirrusBitMask = 1 << 11;
  // Both flags should be set to zero, indicating clear conditions.
  var mask = qa.bitwiseAnd(cloudBitMask).eq(0)
      .and(qa.bitwiseAnd(cirrusBitMask).eq(0));
  return image.updateMask(mask).divide(10000);
}
//Masking SRTM
var SRTMClip = SRTM.clip(geometry).lt(65)
//////////////////////////////////////////////////////////////
//                   Fungsi Satelit                        //
/////////////////////////////////////////////////////////////
var satelit = selectData.getValue()
//////////////////////////////////////////////////////////////
//                    Variable Data                         //
/////////////////////////////////////////////////////////////
//Data Landsat 8
var yr1 = yearinput.getValue()
var startMonth = "-01-01"
var endMonth = "-12-30"
var ls8 = ee.ImageCollection('LANDSAT/LC08/C01/T1_SR')
                                          .filterDate(ee.String(yr1).cat(startMonth),
                                                      ee.String(yr1).cat(endMonth))
                                          .filterBounds(geometry)
                                          .map(maskL8sr)
                                          .sort('CLOUD_COVER') 
                                          .median()
                                          .clip(geometry)
                                          .updateMask(SRTMClip)
//Data Sentinel 2
var s2a = ee.ImageCollection("COPERNICUS/S2_SR_HARMONIZED")
                                          .filterDate(ee.String(yr1).cat(startMonth),
                                                      ee.String(yr1).cat(endMonth))
                                          .filterBounds(geometry)
                                          .map(maskS2clouds)
                                          .sort('CLOUDY_PIXEL_PERCENTAGE')
                                          .median()
                                          .clip(geometry)
                                          .updateMask(SRTMClip)
// Map.addLayer(s2a)
//////////////////////////////////////////////////////////////
//                    Fungsi Pengolahan                     //
/////////////////////////////////////////////////////////////
//Pengolahan Landsat 8
function mangL8 (image){
Map.clear()
  var sr = image.select('B5').divide(image.select('B4')).rename('SR');
  var ndvi = image.normalizedDifference(['B5', 'B4']).rename('NDVI');
  var ndmi = image.normalizedDifference(['B7', 'B3']).rename('NDMI');
  var mndwi = image.normalizedDifference(['B3', 'B6']).rename('MNDWI');
  var gcvi = image.expression('(NIR-GREEN)-1',{
    'NIR':image.select('B5'),
    'GREEN':image.select('B3')
  }).rename('GCVI');
var L8 = image
    .addBands(ndvi)
    .addBands(ndmi)
    .addBands(mndwi)
    .addBands(sr)
    .addBands(gcvi);
var NDVIMask = L8.select('NDVI').gt(0.25)
var MNDWIMask = L8.select('MNDWI').gt(-0.5)
var compositeL8 = L8
            .updateMask(NDVIMask)
            .updateMask(MNDWIMask)
var classes = Mangrove.merge(NonMangrove);
//Define the bands you want to include in the model
var bands = ['B5','B6','B4','NDVI','NDMI','MNDWI','SR','GCVI'];
//Create a variable called image to select the bands of interest and clip to geometry
var img = compositeL8.select(bands);
//Assemble samples for the model
var samples = img.sampleRegions({
    collection: classes, // Set of geometries selected for training
    properties: ['landcover'], // Label from each geometry
    scale: 30 // Make each sample the same size as Landsat pixel
    }).randomColumn('random'); // creates a column with random numbers
//Here we randomly split our samples to set some aside for testing our model's accuracy
// using the "random" column we created
var split = 0.7; // Roughly 80% for training, 20% for testing.
var training = samples.filter(ee.Filter.lt('random', split)); //Subset training data
var testing = samples.filter(ee.Filter.gte('random', split)); //Subset testing data
//Print these variables to see how much training and testing data you are using
    print('Samples n =', samples.aggregate_count('.all'));
    print('Training n =', training.aggregate_count('.all'));
    print('Testing n =', testing.aggregate_count('.all'));
//3.2) Begin Random Forest Classification
/////////////////////////////////////////
//.smileRandomForest is used to run the model. Here we run the model using 100 trees
// and 5 randomly selected predictors per split ("(100,5)")
    var classifier = ee.Classifier.smileRandomForest(100,5).train({ 
    features: training.select(['B5','B6','B4','NDVI','NDMI','MNDWI','SR','GCVI', 'landcover']), //Train using bands and landcover property
    classProperty: 'landcover', //Pull the landcover property from classes
    inputProperties: bands
    });
//3.3) Test the accuracy of the model
//////////////////////////////////////
    var validation = testing.classify(classifier);
    var testAccuracy = validation.errorMatrix('landcover', 'classification');
    print('Validation error matrix RF: ', testAccuracy);
    print('Validation overall accuracy RF: ', testAccuracy.accuracy());
//3.4) Classify the Landsat composite using the Random Forest model
///////////////////////////////////////////////////////////////////
    var classifiedrf = img.select(bands) // select the predictors
                      .classify(classifier); // .classify applies the Random Forest
//The model results may be "noisy". To reduce noise, create a mask to mask
// unconnected pixels
    var pixelcount = classifiedrf.connectedPixelCount(100, false); //Create an image that shows the number of pixels each pixel is connected to
    var countmask = pixelcount.select(0).gt(25); //filter out all pixels connected to 4 or less 
//Mask the results to only display mangrove extent
    var classMask = classifiedrf.select('classification').gt(0);
    var classed= classifiedrf.updateMask(countmask).updateMask(classMask);
// //6.2) Calculate Mangrove Area
// ///////////////////////////////////////
//Use reduceRegion with a Sum reducer to calculate total area
var getmang = classed.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
      reducer:ee.Reducer.sum(),
      geometry:geometry,
      scale: 30,
      maxPixels:1e13,
      tileScale: 16
      }).get('classification');
var getmang2 = ee.Number(getmang).multiply(1000).round().divide(1000)
function downloadImg() {
  var viewBounds = ee.Geometry.Rectangle(Map.getBounds());
  var downloadArgs = {
    name: 'ee_image',
    scale: 30,
    region: viewBounds.toGeoJSONString()
 };
 var url = classed.getDownloadURL(downloadArgs);
 urlLabel.setUrl(url);
 urlLabel.style().set({shown: true});
}
// Add UI elements to the Map.
var downloadButton = ui.Button('Download result', downloadImg);
var urlLabel = ui.Label('Download', {shown: false});
var panel = ui.Panel([downloadButton, urlLabel]);
// Set Legend
// set position of panel where the results will be displayed 
var legend = ui.Panel({
  style: {
    position: 'bottom-left',
    padding: '8px 15px',
    width: '300px'
  }
});
var results = ui.Panel({
  style: {
    position: 'bottom-right',
    padding: '8px 15px',
    width: '350px'
  }
});
//Prepare the visualtization parameters of the labels 
var titleTextVis = {
  'margin':'0px 0px 15px 0px',
  'fontSize': '18px', 
  'font-weight':'', 
  'color': '3333ff'
  };
var textVis = {
  'margin':'0px 8px 2px 0px',
  'fontWeight':'bold'
  };
var numberVIS = {
  'margin':'0px 0px 15px 0px', 
  'color':'bf0f19',
  'fontWeight':'bold'
  };
var subTextVis = {
  'margin':'0px 0px 2px 0px',
  'fontSize':'12px',
  'color':'grey'
  };
// The following creates and styles 1 row of the legend.
var makeRowa = function(color, name) {
      // Create the label that is actually the colored box.
      var colorBox = ui.Label({
        style: {
          backgroundColor: '#' + color,
          // Use padding to give the box height and width.
          padding: '8px',
          margin: '0 0 4px 0'
        }
      });
      // Create a label with the description text.
      var description = ui.Label({
        value: name,
        style: {margin: '0 0 4px 6px'}
      });
      // Return the panel
      return ui.Panel({
        widgets: [colorBox, description],
        layout: ui.Panel.Layout.Flow('horizontal')
      });
};
var title = ui.Label('Legenda', titleTextVis);
legend.add(title)
//Create a palette using the same colors we used for each extent layer
var paletteMAPa = [
'008000',//2019
];
// Name of each legend value
var namesa = ['Mangrove']; 
// Add color and names to legend
for (var i = 0; i < 1; i++) {
  legend.add(makeRowa(paletteMAPa[i], namesa[i]));
  }  
var subtext = ui.Label('Disclaimer: Semua informasi geografis memiliki keterbatasan skala, resolusi, tanggal serta interpretasi dari keadaan aslinya. Informasi ini dapat digunakan sebagai acuan awal dalam melaksanakan studi pendahuluan.',subTextVis)
legend.add(subtext)
Map.add(legend)
var text1 = ui.Label('Luas Mangrove '+aoi+' dalam hektar:',textVis);
var subtext1 = ui.Label('Citra Satelit '+satelit+' tahun '+yr1+':',subTextVis);
var number1 = ui.Label('Please wait...',numberVIS); 
getmang2.evaluate(function(val){number1.setValue(val+' ha')}),numberVIS;
results.add(ui.Panel([
        text1,
        subtext1,
        number1,
        panel]
      ));
Map.add(results);
  return classed.rename('klasifikasi');
}
//Pengolahan Sentinel 2
function mangS2 (image){
Map.clear()  
  var sr = image.select('B8').divide(image.select('B4')).rename('SR');
  var ndvi = image.normalizedDifference(['B8', 'B4']).rename('NDVI');
  var ndmi = image.normalizedDifference(['B12', 'B3']).rename('NDMI');
  var mndwi = image.normalizedDifference(['B3', 'B11']).rename('MNDWI');
  var gcvi = image.expression('(NIR-GREEN)-1',{
    'NIR':image.select('B8'),
    'GREEN':image.select('B3')
  }).rename('GCVI');
var S2 = image
    .addBands(ndvi)
    .addBands(ndmi)
    .addBands(mndwi)
    .addBands(sr)
    .addBands(gcvi);
var NDVIMask = S2.select('NDVI').gt(0.25)
var MNDWIMask = S2.select('MNDWI').gt(-0.5)
var compositeS2 = S2
            .updateMask(NDVIMask)
            .updateMask(MNDWIMask)
var classes = Mangrove.merge(NonMangrove);
//Define the bands you want to include in the model
var bands = ['B8','B11','B4','NDVI','NDMI','MNDWI','SR','GCVI'];
//Create a variable called image to select the bands of interest and clip to geometry
var img = compositeS2.select(bands);
//Assemble samples for the model
var samples = img.sampleRegions({
    collection: classes, // Set of geometries selected for training
    properties: ['landcover'], // Label from each geometry
    scale: 10 // Make each sample the same size as Landsat pixel
    }).randomColumn('random'); // creates a column with random numbers
//Here we randomly split our samples to set some aside for testing our model's accuracy
// using the "random" column we created
var split = 0.7; // Roughly 80% for training, 20% for testing.
var training = samples.filter(ee.Filter.lt('random', split)); //Subset training data
var testing = samples.filter(ee.Filter.gte('random', split)); //Subset testing data
//Print these variables to see how much training and testing data you are using
    print('Samples n =', samples.aggregate_count('.all'));
    print('Training n =', training.aggregate_count('.all'));
    print('Testing n =', testing.aggregate_count('.all'));
//3.2) Begin Random Forest Classification
/////////////////////////////////////////
//.smileRandomForest is used to run the model. Here we run the model using 100 trees
// and 5 randomly selected predictors per split ("(100,5)")
    var classifier = ee.Classifier.smileRandomForest(100,5).train({ 
    features: training.select(['B8','B11','B4','NDVI','NDMI','MNDWI','SR','GCVI', 'landcover']), //Train using bands and landcover property
    classProperty: 'landcover', //Pull the landcover property from classes
    inputProperties: bands
    });
//3.3) Test the accuracy of the model
//////////////////////////////////////
    var validation = testing.classify(classifier);
    var testAccuracy = validation.errorMatrix('landcover', 'classification');
    print('Validation error matrix RF: ', testAccuracy);
    print('Validation overall accuracy RF: ', testAccuracy.accuracy());
//3.4) Classify the Landsat composite using the Random Forest model
///////////////////////////////////////////////////////////////////
    var classifiedrf = img.select(bands) // select the predictors
                      .classify(classifier); // .classify applies the Random Forest
//The model results may be "noisy". To reduce noise, create a mask to mask
// unconnected pixels
    var pixelcount = classifiedrf.connectedPixelCount(100, false); //Create an image that shows the number of pixels each pixel is connected to
    var countmask = pixelcount.select(0).gt(25); //filter out all pixels connected to 4 or less 
//Mask the results to only display mangrove extent
    var classMask = classifiedrf.select('classification').gt(0);
    var classed= classifiedrf.updateMask(countmask).updateMask(classMask);
// //6.2) Calculate Mangrove Area
// ///////////////////////////////////////
//Use reduceRegion with a Sum reducer to calculate total area
var getmang = classed.multiply(ee.Image.pixelArea()).divide(10000).reduceRegion({
      reducer:ee.Reducer.sum(),
      geometry:geometry,
      scale: 30,
      maxPixels:1e13,
      tileScale: 16
      }).get('classification');
var getmang2 = ee.Number(getmang).multiply(1000).round().divide(1000)
function downloadImg() {
  var viewBounds = ee.Geometry.Rectangle(Map.getBounds());
  var downloadArgs = {
    name: 'ee_image',
    scale: 30,
    region: viewBounds.toGeoJSONString()
 };
 var url = classed.getDownloadURL(downloadArgs);
 urlLabel.setUrl(url);
 urlLabel.style().set({shown: true});
}
// Add UI elements to the Map.
var downloadButton = ui.Button('Download result', downloadImg);
var urlLabel = ui.Label('Download', {shown: false});
var panel = ui.Panel([downloadButton, urlLabel]);
// Set Legend
// set position of panel where the results will be displayed 
var legend = ui.Panel({
  style: {
    position: 'bottom-left',
    padding: '8px 15px',
    width: '300px'
  }
});
var results = ui.Panel({
  style: {
    position: 'bottom-right',
    padding: '8px 15px',
    width: '350px'
  }
});
//Prepare the visualtization parameters of the labels 
var titleTextVis = {
  'margin':'0px 0px 15px 0px',
  'fontSize': '18px', 
  'font-weight':'', 
  'color': '3333ff'
  };
var textVis = {
  'margin':'0px 8px 2px 0px',
  'fontWeight':'bold'
  };
var numberVIS = {
  'margin':'0px 0px 15px 0px', 
  'color':'bf0f19',
  'fontWeight':'bold'
  };
var subTextVis = {
  'margin':'0px 0px 2px 0px',
  'fontSize':'12px',
  'color':'grey'
  };
// The following creates and styles 1 row of the legend.
var makeRowa = function(color, name) {
      // Create the label that is actually the colored box.
      var colorBox = ui.Label({
        style: {
          backgroundColor: '#' + color,
          // Use padding to give the box height and width.
          padding: '8px',
          margin: '0 0 4px 0'
        }
      });
      // Create a label with the description text.
      var description = ui.Label({
        value: name,
        style: {margin: '0 0 4px 6px'}
      });
      // Return the panel
      return ui.Panel({
        widgets: [colorBox, description],
        layout: ui.Panel.Layout.Flow('horizontal')
      });
};
var title = ui.Label('Legenda', titleTextVis);
legend.add(title)
//Create a palette using the same colors we used for each extent layer
var paletteMAPa = [
'008000',//2019
];
// Name of each legend value
var namesa = ['Mangrove']; 
// Add color and names to legend
for (var i = 0; i < 1; i++) {
  legend.add(makeRowa(paletteMAPa[i], namesa[i]));
  }  
var subtext = ui.Label('Disclaimer: Semua informasi geografis memiliki keterbatasan skala, resolusi, tanggal serta interpretasi dari keadaan aslinya. Informasi ini dapat digunakan sebagai acuan dalam melaksanakan studi pendahuluan awal.',subTextVis)
legend.add(subtext)
Map.add(legend)
var text1 = ui.Label('Luas Mangrove '+aoi+' dalam hektar:',textVis);
var subtext1 = ui.Label('Citra Satelit '+satelit+' tahun '+yr1+':',subTextVis);
var number1 = ui.Label('Please wait...',numberVIS); 
getmang2.evaluate(function(val){number1.setValue(val+' ha')}),numberVIS;
results.add(ui.Panel([
        text1,
        subtext1,
        number1,
        panel]
      ));
Map.add(results);
  return classed.rename('klasifikasi');
}
function Out() { 
        if (satelit == 'Sentinel 2') {
        var output = mangS2(s2a)
        var addlyr = Map.addLayer(output,  {min: 1, max: 1, palette:'green'}, 'Mangrove '+aoi+' ' + yr1+' '+satelit+' ')
      } else if (satelit == 'Landsat 8') {
        var output = mangL8(ls8)
        var addlyr = Map.addLayer(output,  {min: 1, max: 1, palette:'green'}, 'Mangrove '+aoi+' ' + yr1+' '+satelit+' ')
      }
}
var tampilan = Out()
Map.centerObject(geometry, 12)
}
'+Sentinel+'
// Membuat fungsi select untuk menampilkan data
var showdata = ui.Button({label:'Tampilkan' , onClick:execute, disabled:false, style:{color:'27292e'}}); 
panel.add(showdata)
var resetButton = ui.Button({label: 'Reset Map', onClick: reset, style: {color:'27292e'}});
panel.add(resetButton);
/*
Reset Map
*/
function reset(){
  Map.clear();}