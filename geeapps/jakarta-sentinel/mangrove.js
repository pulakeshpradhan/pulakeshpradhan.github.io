var lsib = ee.FeatureCollection("USDOS/LSIB_SIMPLE/2017"),
    table = ee.FeatureCollection("users/jakarta-sentinel/mangrove_2017_sumatera"),
    geometry = /* color: #00ffff */ee.Geometry.Polygon(
        [[[105.24091088966884, -5.852609175808063],
          [105.30682885841884, -5.631252404409966],
          [105.43042504982509, -5.702314545097154],
          [105.55951440529384, -5.852609175808063],
          [105.69135034279384, -5.95915731142803],
          [105.84241235451259, -5.901787784686522],
          [105.89459741310634, -5.579316875952483],
          [105.96875512795009, -5.023537081677875],
          [106.02094018654384, -4.736191618735223],
          [105.96051538185634, -4.402174027260015],
          [105.94569825983376, -4.13999161262871],
          [106.06654786920876, -3.9536897870010335],
          [105.97591066217751, -3.7454206333255113],
          [105.91548585749001, -3.5782212423268756],
          [106.01234164968207, -3.4133840832978244],
          [106.12495151296332, -3.336613174126603],
          [106.10023227468207, -2.960900189512629],
          [105.88874545827582, -2.8868390188591175],
          [105.87226596608832, -2.711267554690664],
          [105.71571079030707, -2.6262158646049714],
          [105.69373813405707, -2.4725595489117835],
          [105.67725864186957, -2.327118411922452],
          [105.43830600515082, -2.32437409235892],
          [105.08949008718207, -2.26948658900845],
          [104.97138705983832, -2.170683865397259],
          [104.89448276296332, -1.9675694200573177],
          [104.9700137688227, -1.7795292126661975],
          [104.61452132135742, -1.7399123918804824],
          [104.54585677057617, -1.4296677185707158],
          [104.47444563776367, -1.1413494933744954],
          [104.37330107907792, -0.9825540422822683],
          [104.24146514157792, -0.9715693115632932],
          [104.04096465329667, -0.9386149067310731],
          [103.79377227048417, -0.9193913598059381],
          [103.63447051267167, -0.8287647090879976],
          [103.53559355954667, -0.6282805307815037],
          [103.65918975095292, -0.4580001587277844],
          [103.90638213376542, -0.31896139509732563],
          [103.69489531735917, -0.15691450658522726],
          [103.85969023923417, -0.11296931704194257],
          [103.91736846189042, 0.08478448507007695],
          [103.71686797360917, 0.36218688900926405],
          [103.67566924314042, 0.444582300753733],
          [103.44495635251542, 0.5544413900795939],
          [103.34607939939042, 0.6642984410133276],
          [103.22522979001542, 0.7714067175204167],
          [103.17304473142167, 0.9801224528751498],
          [102.95331816892167, 1.1668571682645033],
          [102.76655059079667, 1.2355066259874117],
          [102.57703643064042, 1.1668571682645033],
          [102.59076934079667, 1.3316128645774243],
          [102.54407744626542, 1.523813830198925],
          [102.36280303220292, 1.595198507634373],
          [102.03321318845292, 1.6775623585032444],
          [101.86841826657792, 1.6555989969593017],
          [101.80524687985917, 1.7956111217060764],
          [101.81897979001542, 1.9877669943635898],
          [101.68165068845292, 2.19636797897575],
          [101.57728057126542, 2.146965011774429],
          [101.34656768064042, 2.116773521080893],
          [101.19550566892167, 2.2183243310794865],
          [101.04993682126542, 2.3610325316091205],
          [100.79450469235917, 2.3445669318842355],
          [100.56928496579667, 2.2540027066917294],
          [100.46766143064042, 2.366521021562687],
          [100.25892119626542, 2.753401866487692],
          [100.14631133298417, 2.70950648291792],
          [100.11060576657792, 2.8741057549954365],
          [99.92383818845292, 3.151126891633704],
          [99.43494658689042, 3.466456882194734],
          [99.22895293454667, 3.6281946885569467],
          [98.81147246579667, 3.762497360749131],
          [98.75654082517167, 3.921441061114253],
          [98.51758818845292, 4.058437282948688],
          [98.33082061032792, 4.146102719089003],
          [98.37751250485917, 4.496665202133379],
          [98.08912139157792, 4.611657415474986],
          [97.99848418454667, 4.830638327224609],
          [97.74305205564042, 5.161711577896157],
          [97.47388701657792, 5.331286181861428],
          [97.19648223142167, 5.249239709794869],
          [96.91358428220292, 5.353163396540615],
          [96.48237090329667, 5.314877759101559],
          [96.11707549314042, 5.418790331683718],
          [95.77100615720292, 5.62656151707693],
          [95.39747100095292, 5.722220824791529],
          [95.20246367673417, 5.621094793091927],
          [95.14753203610917, 5.375039828511351],
          [95.27936797360917, 5.0413407129009356],
          [95.41120391110917, 4.721156511275401],
          [95.68860869626542, 4.425470419972404],
          [96.14179473142167, 3.9378818088764804],
          [96.41095977048417, 3.672050853260943],
          [96.75702910642167, 3.644641001149295],
          [96.94654326657792, 3.4362992780800807],
          [97.14429717282792, 3.142899571408908],
          [97.28458311257918, 2.97264403824387],
          [97.51529600320418, 2.832748110125793],
          [97.56473447976668, 2.569369406364273],
          [97.66086485086043, 2.2400702617934507],
          [97.83939268289168, 2.1604781132945257],
          [98.28433897195418, 1.9079520117241626],
          [98.39420225320418, 1.7240235180910086],
          [98.48483946023543, 1.5757696184157588],
          [98.66062071023543, 1.4961473645175094],
          [98.8419272652527, 1.062874666861303],
          [98.9957358590027, 0.5163588187087502],
          [99.1385581246277, 0.17711428289410747],
          [99.6274497261902, -0.09754359103601214],
          [99.84442970665896, -0.45459453260711974],
          [100.16927415279952, -0.800934665524558],
          [100.32030102781391, -1.232048621090417],
          [100.57164842037764, -1.7043348408583128],
          [100.77214890865889, -2.0584523607095155],
          [100.88475877194014, -2.4618849890137255],
          [101.27202683834639, -2.8569660469096707],
          [101.64006883053389, -3.367075239834095],
          [102.13994676022139, -3.668629628824959],
          [102.17290574459639, -3.970082290764949],
          [102.98589402584639, -4.624666279411774],
          [103.72197801022139, -5.155561750457387],
          [104.40313035397139, -5.798058576503196],
          [104.53771287350264, -5.972913183392872],
          [104.75743943600264, -5.967449813372498],
          [104.74645310787764, -5.8144535233789565],
          [104.63384324459639, -5.5548116424454195],
          [104.64482957272139, -5.486465588825026],
          [104.53221970944014, -5.42358030029547],
          [104.47728806881514, -5.511071075369069],
          [104.54595261959639, -5.612216204689485],
          [104.63658982662764, -5.795326039006373],
          [104.60088426022139, -5.8800285204872775],
          [104.46630174069014, -5.727008318902972],
          [104.38939744381514, -5.614949614767783],
          [104.24932176022139, -5.486465588825026],
          [104.01860886959639, -5.1774451363832865],
          [103.83184129147139, -5.026981732092533],
          [103.67528611569014, -4.827222239720263],
          [103.54345017819014, -4.832695897385819],
          [103.29351121334639, -4.646567059275862],
          [103.03258592037764, -4.512414222478174],
          [102.88427049069014, -4.405621759921145],
          [102.77440720944014, -4.285119561537018],
          [102.60623622263256, -4.148162220293773],
          [102.44968104685131, -4.01666082138456],
          [102.37003016794506, -3.9728222773810167],
          [102.34805751169506, -3.7727797437052497],
          [102.23819423044506, -3.6329965220945573],
          [101.98550868357006, -3.4246521832493513],
          [101.64426342030197, -3.182686839248743],
          [101.48496166248947, -2.9303609633743206],
          [101.35037914295822, -2.713644243364725],
          [101.18558422108322, -2.540791516617337],
          [101.09494701405197, -2.3291271399318654],
          [100.94663158436447, -2.334615755195101],
          [100.88620677967697, -2.1864157839599123],
          [100.97959056873947, -1.9750685307308073],
          [100.83127513905197, -1.763694389597968],
          [100.69669261952072, -1.5962249588803632],
          [100.64664206917803, -1.330803711139675],
          [100.50107322152178, -1.2319514964072136],
          [100.46536765511553, -1.1330956138878714],
          [100.41318259652178, -0.9848055564868387],
          [100.36099753792803, -0.8282700248497662],
          [100.24594156537955, -0.7110790108836021],
          [100.1058658817858, -0.5105900190946365],
          [99.92184488569205, -0.3210809365615266],
          [99.83944742475455, -0.18649976824024841],
          [99.81198160444205, -0.01621201142266457],
          [99.6499332645983, 0.12935672612400786],
          [99.44393961225455, 0.19527442672457926],
          [99.40548746381705, 0.25295220570891636],
          [99.2818912724108, 0.2831642770533855],
          [99.19125406537955, 0.2859108252159092],
          [99.19125406537955, 0.3902791108803549],
          [99.16928140912955, 0.5330967027598493],
          [99.1445621708483, 0.6649254063360563],
          [99.07040445600455, 0.8571690980652529],
          [99.00997965131705, 0.8956167476240977],
          [98.92208902631705, 1.2388794290659806],
          [98.8699039677233, 1.3514605044598924],
          [98.80673258100455, 1.4722734024530164],
          [98.8534244755358, 1.5491509626490232],
          [98.9028629520983, 1.6699528679490339],
          [98.7984928349108, 1.7660400164617698],
          [98.72982828412955, 1.8085913252389956],
          [98.65490156306737, 1.8206427553087066],
          [98.55327802791112, 1.9743669632688885],
          [98.35552412166112, 2.0731822305674648],
          [98.14678388728612, 2.2268824990675657],
          [97.92980390681737, 2.328425735341712],
          [97.79522138728612, 2.3064710500606065],
          [97.72381025447362, 2.413496880802264],
          [97.64105532984263, 2.8845666295930257],
          [97.49273990015513, 2.928455409826818],
          [97.32519839624888, 3.1231907694771817],
          [97.17138980249888, 3.3617606951511987],
          [96.95440982203013, 3.6550938542847744],
          [96.84179995874888, 3.7455420968456914],
          [96.584994538827, 3.7565048895447224],
          [96.442172273202, 3.827759667295916],
          [96.31720279078013, 4.008610302259198],
          [96.1400482497645, 4.189420942595308],
          [96.0301849685145, 4.26885493391197],
          [95.8434173903895, 4.452343160383572],
          [95.607211335702, 4.671373504135421],
          [95.5138275466395, 4.794548218950848],
          [95.38473819117075, 5.07639695709478],
          [95.28586123804575, 5.338980220979442],
          [95.30783389429575, 5.4921022285373375],
          [95.38473819117075, 5.579582926985063],
          [95.50009463648325, 5.568648549014724],
          [95.5907318435145, 5.609651414111554],
          [95.7005951247645, 5.554980290487497],
          [95.815951570077, 5.4921022285373375],
          [95.859896882577, 5.382733316700337],
          [95.9752533278895, 5.2870193660989635],
          [96.2169525466395, 5.210437537967776],
          [96.60971377710825, 5.174878507634398],
          [96.848666413827, 5.25419973442709],
          [97.1398041091395, 5.139317478533543],
          [97.25172732691294, 5.135898043978127],
          [97.28193972925669, 5.1249557302018705],
          [97.30871890406138, 5.1468401699319815],
          [97.35884402613169, 5.183084615611398],
          [97.43986819605357, 5.207018487665044],
          [97.46596072535044, 5.1906067876069635],
          [97.48450015406138, 5.194709752709844],
          [97.5023529372645, 5.203599418769082],
          [97.52226565699107, 5.185136125954328],
          [97.51951907495982, 5.146156292569965],
          [97.52913211206919, 5.114013228999126],
          [97.57445071558482, 5.064769664799927],
          [97.71177981714732, 4.970375712229322],
          [97.79692386011607, 4.849969629505594],
          [97.85185550074107, 4.683007605900141],
          [97.86558841089732, 4.554337471117788],
          [97.93699954370982, 4.43112107998867],
          [98.12651370386607, 4.3489653746135675],
          [98.06883548120982, 4.253105739272688],
          [98.0513973382607, 4.073265844549018],
          [98.21893884216695, 3.9664126855566595],
          [98.4908504632607, 3.845843832479441],
          [98.6226864007607, 3.6704406482611103],
          [98.79022790466695, 3.6293254827558163],
          [98.9357967523232, 3.574502354531453],
          [99.0841121820107, 3.5114517088669617],
          [99.21869470154195, 3.399046568664334],
          [99.3697567132607, 3.333242332009126],
          [99.4631405023232, 3.215332122985198],
          [99.6114559320107, 3.146773376766595],
          [99.76801110779195, 3.0315845793415144],
          [99.7597713616982, 2.8944391041953974],
          [99.83392907654195, 2.869751133009138],
          [99.93829919372945, 2.899925247136026],
          [99.8806209710732, 2.5707113772458885],
          [99.85590173279195, 2.471930157116905],
          [99.97675134216695, 2.488394212318344],
          [100.04816247497945, 2.5789428045146097],
          [100.06464196716695, 2.5021141013244037],
          [100.19098474060445, 2.4582099550419136],
          [100.17999841247945, 2.6200991385008794],
          [100.25140954529195, 2.463698052841612],
          [100.38324548279195, 2.246901507697515],
          [100.59198571716695, 2.0575211197559047],
          [100.7595272210732, 2.0081137576656003],
          [100.8638973382607, 1.9422349573991562],
          [100.92706872497945, 2.027327911344718],
          [100.83917809997945, 2.2057338758123333],
          [100.98200036560445, 2.224945580432108],
          [101.1220760491982, 2.109671674069806],
          [101.21820642029195, 1.999879051087324],
          [101.27313806091695, 1.7967436308787323],
          [101.3857479241982, 1.6402589178719011],
          [101.6768856195107, 1.6100586685701528],
          [101.7812557366982, 1.51121840504116],
          [101.97076989685445, 1.398644864603495],
          [102.0723934320107, 1.291557697970468],
          [102.1218319085732, 1.014209339652124],
          [102.2591610101357, 0.8576750997967502],
          [102.3855037835732, 0.7340908563378296],
          [102.5887508538857, 0.6764170055207571],
          [102.85516931091695, 0.6846561703929213],
          [103.03644372497945, 0.4786732440058478],
          [102.6821346429482, 0.3331080881641786],
          [102.34979821716695, 0.29190997140259217],
          [102.2701473382607, 0.3550803480373247],
          [102.1987362054482, 0.3138823204787708],
          [102.2262020257607, 0.16831480076325447],
          [102.31134606872945, 0.19028734928841676],
          [102.5667781976357, 0.13260935805078078],
          [102.67938806091695, 0.2150064327673483],
          [102.8798885491982, 0.2095133064018473],
          [103.06390954529195, 0.30014960751058506],
          [103.21771813904195, 0.4127572734250325],
          [103.3358211663857, 0.4759267572759159],
          [103.42645837341695, 0.45944781415146496],
          [103.45941735779195, 0.37430603270017926],
          [103.25617028747945, 0.32486847790833207],
          [103.21771813904195, 0.20127361325854487],
          [103.32758142029195, 0.19028734928841676],
          [103.4786434320107, 0.24247203394090905],
          [103.4182186273232, 0.12711620810005464],
          [103.48688317810445, 0.11887648099893677],
          [103.5885067132607, 0.2150064327673483],
          [103.6983699945107, 0.1793010783220098],
          [103.70111657654195, 0.044718846903738924],
          [103.43744470154195, 0.10514359711780573],
          [103.2534237054482, 0.10514359711780573],
          [103.25067712341695, -0.004719625113222484],
          [103.3303280023232, -0.15852801660278457],
          [103.2534237054482, -0.17226086950867167],
          [103.07489587341695, -0.27663017146924024],
          [103.07489587341695, -0.3425471743122577],
          [103.2204647210732, -0.3095887241118646],
          [103.13532067810445, -0.48536567537033015],
          [103.1929989007607, -0.6117026332011612],
          [103.2259578851357, -0.7407829702106415],
          [103.3632869866982, -0.7847243876014817],
          [103.4951229241982, -0.9330231125520821],
          [103.7807674554482, -1.114268520950787],
          [103.84943200622945, -1.1307448505668292],
          [103.8741512445107, -1.0318855177742876],
          [103.97028161560445, -1.0566006505059629],
          [104.15704919372945, -1.0977920991789363],
          [104.2092342523232, -1.1060303214992164],
          [104.2806453851357, -1.141729018440599],
          [104.34381677185445, -1.122506697363399],
          [104.38226892029195, -1.292756897086405],
          [104.40973474060445, -1.3943524799841198],
          [104.4179744866982, -1.5233999645833312],
          [104.4399471429482, -1.674403116562269],
          [104.3465633538857, -1.7128384667225032],
          [104.28751184021382, -1.830885004054],
          [104.1872615960732, -1.922846130564354],
          [104.1735193200476, -1.9976462144982694],
          [104.42621423279195, -2.1739975902321937],
          [104.48663903747945, -2.2508445546283733],
          [104.56903649841695, -2.195954271085695],
          [104.69537927185445, -2.1492959426257667],
          [104.78326989685445, -2.1218491989449078],
          [104.7915096429482, -2.0340163765583394],
          [104.8409481195107, -2.1383173040132233],
          [104.7640438226357, -2.1657637523887403],
          [104.7091121820107, -2.1712529826002642],
          [104.6651668695107, -2.2810333328194745],
          [104.5882625726357, -2.2974996725959755],
          [104.54157067810445, -2.442943940962545],
          [104.59650231872945, -2.478616580744842],
          [104.67340661560445, -2.4127586589377312],
          [104.6871395257607, -2.5389834660779678],
          [104.5498104241982, -2.6075787724705837],
          [104.5113582757607, -2.7145799460940787],
          [104.7640438226357, -2.624041093209426],
          [104.7860164788857, -2.4100145090373264],
          [104.81622888122945, -2.4209910753867816],
          [104.8794002679482, -2.453920239384618],
          [104.9508114007607, -2.456664299925634],
          [104.99201013122945, -2.3743400592479613],
          [105.0057430413857, -2.506056419415763],
          [105.0606746820107, -2.4648964476933455],
          [105.12933923279195, -2.4511761732115134],
          [105.1815242913857, -2.3990378541830086],
          [105.28314782654195, -2.423735203098136],
          [105.43695642029195, -2.4511761732115134],
          [105.5550594476357, -2.4731285445461397],
          [105.5715389398232, -2.6651959437073995],
          [105.6374569085732, -2.7090929337063483],
          [105.72809411560445, -2.725553896075807],
          [105.74457360779195, -2.8407742529965567],
          [105.79401208435445, -2.9258105015334044],
          [105.85993005310445, -2.9724405565670424],
          [106.00824548279195, -3.021811407605004],
          [106.0054989007607, -3.090378300726284],
          [106.04669763122945, -3.232983135859153],
          [105.94232751404195, -3.287825859776561],
          [105.86542321716695, -3.3755679250411967],
          [105.80499841247945, -3.520873190060217],
          [105.7857723382607, -3.704528417634439],
          [105.84345056091695, -3.775787450330668],
          [105.93134118591695, -3.8278576665704755],
          [105.8901424554482, -3.9237681668032733],
          [105.8187313226357, -3.9292484367832725],
          [105.8461971429482, -3.992268941237175],
          [105.8187313226357, -4.079941579599117],
          [105.7253475335732, -4.090899990827238],
          [105.66766931091695, -4.036106443663168],
          [105.6319637445107, -4.0936395702279595],
          [105.71161462341695, -4.156647296338508],
          [105.77753259216695, -4.156647296338508],
          [105.78851892029195, -4.255257947972034],
          [105.75006677185445, -4.24430182710495],
          [105.71161462341695, -4.27716972167085],
          [105.76654626404195, -4.40315016059349],
          [105.87640954529195, -4.4688706577023725],
          [105.8077449945107, -4.583867300477884],
          [105.7912655023232, -4.805593889225137],
          [105.76654626404195, -4.879486889671631],
          [105.83246423279195, -4.912325619329104],
          [105.8242244866982, -5.161299244699873],
          [105.7692928460732, -5.527740584455785],
          [105.7473201898232, -5.792859783620778],
          [105.66766931091695, -5.8065223984603564],
          [105.61273767029195, -5.716343054139471],
          [105.57428552185445, -5.626149499630391],
          [105.44794274841695, -5.601548820352603],
          [105.38751794372945, -5.511337500230651],
          [105.3078670648232, -5.401972089869136],
          [105.2364559320107, -5.440252249592129],
          [105.20624352966695, -5.516805245385265],
          [105.17328454529195, -5.530474387679404],
          [105.14032556091695, -5.5851477916647845],
          [105.14581872497945, -5.648015896735516],
          [105.15131188904195, -5.705411254507233],
          [105.0991268304482, -5.746404425412805],
          [105.1101131585732, -5.888491103343833]]]),
    collection = ee.ImageCollection("LANDSAT/LC8_L1T_TOA"),
    imageCollection = ee.ImageCollection("LANDSAT/LC08/C01/T1"),
    geometry2 = /* color: #d63000 */ee.Geometry.Polygon(
        [[[100.33303892284539, 2.5832720872742025],
          [100.30008037793209, 2.5036990155462635],
          [100.32205382135976, 2.4158891077708646],
          [100.352267021427, 2.3308179249547623],
          [100.39895965536584, 2.2622085559529133],
          [100.46487845725085, 2.1908515043179784],
          [100.55276999172554, 2.1194912126574628],
          [100.62692837770919, 2.070086090863926],
          [100.71481954627097, 2.045383298773121],
          [100.78897768345416, 2.028914655515798],
          [100.90708146969905, 1.9877418396220863],
          [100.96750638207959, 2.009701604422016],
          [100.89060121428815, 2.09479089298794],
          [100.8494018544369, 2.1634080685625356],
          [100.84940145672465, 2.223788863472424],
          [100.9290525059979, 2.2539788587041856],
          [101.00046391819546, 2.2622126974133288],
          [101.12955474845785, 2.116750298589146],
          [101.26139166933012, 2.045386737535758],
          [101.26963192101982, 1.9630393973743094],
          [101.21744684365785, 1.93009900009702],
          [101.28336554261978, 1.8477463796768956],
          [101.33005839760267, 1.7077379025622124],
          [101.43168276246968, 1.6198845976763885],
          [101.55527942181868, 1.6089032429148578],
          [101.70084865826175, 1.6281224345910177],
          [101.84092515974817, 1.5512481461730276],
          [102.02220075807088, 1.4057281459368185],
          [102.12657141544628, 1.3453210086348184],
          [102.11558543859223, 1.2492149882338557],
          [102.11283914433966, 1.1750736778194133],
          [102.09361337659664, 1.0871999074910126],
          [102.1430520173252, 1.0734696039751088],
          [102.19523740005786, 1.0185472026998739],
          [102.25566264458621, 0.9334155754866235],
          [102.34630031326037, 0.8510282860851346],
          [102.4122186185391, 0.7851171551262083],
          [102.39848582577508, 0.7439219821906851],
          [102.445177809646, 0.7384294252422967],
          [102.57701409611127, 0.6889951292351139],
          [102.68138435309675, 0.6917418195656019],
          [102.78026143938223, 0.6944884716220194],
          [102.86815220287963, 0.6889959206013367],
          [102.93132377314828, 0.6478000865162952],
          [102.99724200088804, 0.5681537452962321],
          [103.04668071520359, 0.48026681696302986],
          [102.89287221081531, 0.37864572082698916],
          [102.76378287844523, 0.3319543687155001],
          [102.69511825067434, 0.34294032817656556],
          [102.59624131015767, 0.3154746586152669],
          [102.58525517280395, 0.24955742406320278],
          [102.49187121355396, 0.28800888045245604],
          [102.37651480424643, 0.2577964222566053],
          [102.32707611737248, 0.3099806964800998],
          [102.2501716705051, 0.33744581847053656],
          [102.19524007567247, 0.3154732984874488],
          [102.23918558987339, 0.26878214958052843],
          [102.2336926991054, 0.19462499096761313],
          [102.26665182707654, 0.15891970399767869],
          [102.31059711447051, 0.16990614927574502],
          [102.38475479849444, 0.18638582656215072],
          [102.45341932123597, 0.202865459707821],
          [102.51933745494875, 0.15892056249562894],
          [102.59898840838162, 0.1424413656854743],
          [102.68413231440184, 0.2001195938009335],
          [102.78026268878239, 0.21385267947029193],
          [102.8763930949865, 0.21659948366970921],
          [103.18401012164486, 0.3841393692762308],
          [103.26366095741798, 0.45005577818101156],
          [103.35155160088038, 0.4939997736526772],
          [103.44768210617326, 0.46378852449991254],
          [103.52733311596239, 0.4116050345932783],
          [103.44218906237847, 0.36216754989863714],
          [103.34880522776155, 0.3456882359747542],
          [103.23894193257217, 0.30723651758302495],
          [103.21971595793616, 0.2413192387616627],
          [103.23894210517665, 0.20286739476353663],
          [103.29662035576894, 0.2001209205513876],
          [103.40923022536731, 0.2303332823484914],
          [103.4641618884275, 0.23307991166146305],
          [103.37901798509188, 0.10124441107579218],
          [103.26640813418499, 0.07927161150711627],
          [103.26091508854267, 0.005113907209507965],
          [103.30760708292144, -0.06080397302205996],
          [103.36253881617768, -0.13221490524393723],
          [103.34880598434279, -0.18439976485177398],
          [103.24168934469958, -0.19538619295472043],
          [103.19225094126818, -0.22559846174231166],
          [103.1043604001917, -0.24757108144162962],
          [103.07140156464936, -0.3134882826395741],
          [103.07414824891862, -0.365672380504066],
          [103.18675801200959, -0.3574325932526505],
          [103.2526758960098, -0.3354602430370732],
          [103.25267594958427, -0.3684185810397183],
          [103.173025190717, -0.40137693090269494],
          [103.131826633645, -0.47553247716089164],
          [103.16203911567106, -0.5359548059790907],
          [103.21971728814856, -0.5441940756815882],
          [103.22795709861384, -0.5881371761613219],
          [103.22795731503356, -0.7172179542889758],
          [103.24993001032522, -0.7611595049586081],
          [103.31310133044963, -0.7831300317648936],
          [103.40099182017582, -0.788622546225238],
          [103.4724028879059, -0.8325632971192463],
          [103.48888241423515, -0.8874886306494052],
          [103.55480031973707, -0.9451592948641574],
          [103.62071821432141, -1.0083213101815325],
          [103.72508815315564, -1.0687359772599156],
          [103.84319093958209, -1.1181652751858395],
          [103.90086901137784, -1.057751482250688],
          [103.96953340705431, -1.0247979970630265],
          [104.05467726858365, -1.0577514621779076],
          [104.15355399835084, -1.0879585136051062],
          [104.25517730239142, -1.0934507042020443],
          [104.33208138742339, -1.1566098032652312],
          [104.36229364472376, -1.2664482515560138],
          [104.38151955867818, -1.4229598419160387],
          [104.3979988952326, -1.5684786138724731],
          [104.40623853807483, -1.6700612203520009],
          [104.35405363653103, -1.7057511325551438],
          [104.32693160402698, -1.7603137094277683],
          [104.32109471121817, -1.8045813050305737],
          [104.18719892172157, -1.9246801444729833],
          [104.17724057492433, -2.0073725670459215],
          [104.31834816580624, -2.024184228605262],
          [104.41173157937908, -2.1037830344382122],
          [104.48039549166947, -2.227290548150659],
          [104.77427899505301, -2.151815009581683],
          [104.66166944963891, -2.251990828750384],
          [104.6039936817449, -2.2835513940225014],
          [104.54631300535095, -2.372741457092491],
          [104.55729923010517, -2.4962254314384835],
          [104.66441549902015, -2.422135259232963],
          [104.69188363166688, -2.4495753519038463],
          [104.69051205302151, -2.503084082685914],
          [104.68021204249703, -2.56002123244673],
          [104.59987098228112, -2.590888778844222],
          [104.4968744714165, -2.6910318246050338],
          [104.56279206484464, -2.699262476989528],
          [104.65068225850632, -2.652621858495301],
          [104.72758616510555, -2.6306727745434104],
          [104.77977107410697, -2.5428722631659637],
          [104.81273000344822, -2.468785899499105],
          [104.89512706354583, -2.4578099171585976],
          [104.98851039461601, -2.449577940842047],
          [105.10386622613373, -2.463298401175151],
          [105.21647361540795, -2.3947002011137886],
          [105.34144432338292, -2.4344859410936635],
          [105.44649773893502, -2.4557547289901347],
          [105.56254317405853, -2.471531258029658],
          [105.56803573460002, -2.6196999533945275],
          [105.59000797346334, -2.7129821885675502],
          [105.73694947116678, -2.7294433498596984],
          [105.74244218181343, -2.814487434030499],
          [105.78226681926333, -2.940670270059173],
          [105.85642386765687, -2.9982709631963567],
          [105.9717796097334, -2.9955285998612164],
          [105.99649842904341, -3.0613541934580866],
          [106.01572397866016, -3.160084886298742],
          [106.01572370992449, -3.2259000853619186],
          [105.91684712823826, -3.299936683927384],
          [105.8481826969155, -3.393160312260535],
          [105.78226459749669, -3.5576506830590615],
          [105.78226416285247, -3.6782585157792025],
          [105.84818129242899, -3.7687039315843154],
          [105.89487261310796, -3.823514794630101],
          [105.83170128835889, -3.941345582770765],
          [105.78775580822526, -4.086555951634697],
          [105.66965391671602, -4.0454608525984],
          [105.65592082800765, -4.133126923818889],
          [105.76578301439554, -4.176956732933017],
          [105.7493034413742, -4.2399571785262715],
          [105.69986514364689, -4.313907551578501],
          [105.82071317046439, -4.450834300784651],
          [105.86465773699956, -4.5411919123621995],
          [105.82620519902912, -4.7437699642896405],
          [105.82346043333382, -4.828615563298866],
          [105.77402032720113, -4.834089664760459],
          [105.77676654643597, -4.927133918244195],
          [105.8152182124577, -4.95176124291911],
          [105.83444351904268, -5.104976323896793],
          [105.82895007330376, -5.2526846878988716],
          [105.79461741983368, -5.471446806017371],
          [105.7795103820066, -5.6791972119410286],
          [105.7657802159174, -5.795325965424266],
          [105.69984702734052, -5.933312073081882],
          [105.79994040717122, -5.905304748477563],
          [105.79565414470767, -5.822651863783023],
          [105.81454042505413, -5.7720972751630235],
          [105.83033147992762, -5.7147111479115456],
          [105.8371868196225, -5.6627985861038255],
          [105.84867637990726, -5.475064667299483],
          [105.87666150961354, -5.287344711647192],
          [105.88044303051288, -5.1880925414831465],
          [105.89349923612076, -4.951356266446099],
          [105.92507958004353, -4.907414864519495],
          [105.9195807930098, -4.863338019078727],
          [105.8948698031511, -4.761560455411941],
          [105.94293492866257, -4.63593686279794],
          [105.92164509478584, -4.553964588018823],
          [105.92507767156098, -4.4008069669565755],
          [105.88593550276471, -4.342972648642909],
          [105.8577947885608, -4.255014986950979],
          [105.87839534133877, -4.12353898120201],
          [105.89212855725077, -4.027638808128728],
          [105.95392506204473, -3.896132540753695],
          [105.99065057814914, -3.8132255793073044],
          [105.92850409620212, -3.7193553262616783],
          [105.8577922939935, -3.6617812241366905],
          [105.87015648492297, -3.565168387679428],
          [105.90448816595426, -3.485002421822878],
          [105.96834849102174, -3.3540854630615495],
          [106.07889566262702, -3.279369298496491],
          [106.10343881339963, -3.2502321727105876],
          [106.11424822180504, -3.1991575313977902],
          [106.07956598159456, -3.11071769199179],
          [106.0675545740105, -2.9735813959134783],
          [106.00885694486396, -2.924212307150598],
          [105.9429404724043, -2.908438161531659],
          [105.88388612590757, -2.9036367512940426],
          [105.8340129289569, -2.8729442839844443],
          [105.80611625414849, -2.7956178758067662],
          [105.80431199254917, -2.7237753009268166],
          [105.79426886950318, -2.6491891588660987],
          [105.72200221885316, -2.641303573435323],
          [105.66896434726857, -2.5977477427474525],
          [105.64407541791127, -2.517484886819269],
          [105.66587802545405, -2.4262469756868126],
          [105.64631377605224, -2.3343230845109084],
          [105.40427936140509, -2.339877897709099],
          [105.23587621555066, -2.29048758220407],
          [105.07571422970841, -2.320663259091214],
          [104.97872376147382, -2.29114822114366],
          [104.96138584936443, -2.2533984536175433],
          [104.84706315855715, -2.2437568549814966],
          [104.94525312194139, -2.1531819995763146],
          [104.8759018215062, -1.9885005031254026],
          [104.71110717412, -1.9404634899774513],
          [104.89151960890445, -1.8188221966086973],
          [104.59265731769574, -1.8275734254060083],
          [104.54974386421691, -1.8052666309179155],
          [104.56450827379808, -1.7548215627394275],
          [104.54768662008473, -1.671433228824573],
          [104.48211025158935, -1.569161837201452],
          [104.47833309535008, -1.460021564475368],
          [104.47078306671665, -1.2623288258757048],
          [104.43335946800846, -1.2101537094593224],
          [104.43438885333217, -1.1044317113211242],
          [104.3787728969678, -0.9616358517258525],
          [104.23870004182584, -0.9568336474930417],
          [104.04918380421475, -0.938293360746731],
          [103.88233005231905, -0.9094601599540773],
          [103.75118039484892, -0.8957269752298278],
          [103.61247833968366, -0.8243241594658904],
          [103.49300043557128, -0.7144705011017364],
          [103.4621020974555, -0.6526767255198804],
          [103.46141647913214, -0.5606724902676495],
          [103.5766670550754, -0.4944566225165063],
          [103.66444949348829, -0.4007745190771165],
          [103.82627907336564, -0.32052334649768593],
          [103.67796272786086, -0.18937568904321286],
          [103.61616547436779, -0.11590483273542333],
          [103.74525487632172, -0.05754003989597843],
          [103.84550491174002, 0.010438013402124795],
          [103.81391939517016, 0.15394625129363856],
          [103.79194636594286, 0.312560503332718],
          [103.61067174403468, 0.46636547222260444],
          [103.47746362313433, 0.5350284124980952],
          [103.33875956458701, 0.5927024769921517],
          [103.32365433071539, 0.6493477718628649],
          [103.28932235568732, 0.7114857338592567],
          [103.23439028170446, 0.7468445845225089],
          [103.16572438733988, 0.7739634491323552],
          [103.18255003520335, 0.9033805537317983],
          [103.14306978748868, 0.9888560711416071],
          [102.9817025223806, 1.1488191796146228],
          [102.78085467930282, 1.214732014641782],
          [102.64593176306983, 1.1213665675027067],
          [102.52439502121638, 1.2174674054522185],
          [102.54430772350702, 1.3499534615345703],
          [102.53126155852226, 1.4824392910004511],
          [102.47358157055464, 1.5675555915845454],
          [102.33900067758282, 1.601872332635808],
          [102.18930330750345, 1.607363623876782],
          [102.07806560484937, 1.637565264411292],
          [101.99979136684874, 1.645800546791707],
          [101.92975851957601, 1.6073598480733342],
          [101.84083396307221, 1.7003640769351203],
          [101.74831155269635, 1.7386260292996267],
          [101.7931180667731, 1.801597230881293],
          [101.80169877230605, 1.941249517344514],
          [101.78555937430394, 2.0781564848786784],
          [101.69406266258784, 2.1567393286011156],
          [101.58883266107375, 2.154345792095768],
          [101.49511491431451, 2.113870198959604],
          [101.36911724596348, 2.057591361817539],
          [101.19092110054976, 2.2126425049115515],
          [101.04741537466953, 2.3375218719947455],
          [100.8695683225908, 2.3676997224956082],
          [100.75351300435591, 2.3172742519113494],
          [100.63746644188404, 2.261350582246914],
          [100.5756822455927, 2.1934283680464626],
          [100.44041434943586, 2.324479428866762],
          [100.39303254612219, 2.448651638576635],
          [100.37470622540536, 2.5386053920390586]]]),
    geometry3 = /* color: #ff644b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[100.82480665542971, 2.8866369059159442],
                  [99.80307813980471, 2.217139311622058],
                  [105.67373367411892, -6.002556725449411],
                  [107.83804031474392, -4.90891768528579],
                  [105.90781120833253, -2.5039774611700834],
                  [104.87200864016302, -1.9620381834520764],
                  [103.87690559130397, 0.28215346111432127],
                  [103.3756204746403, 0.6345578781830321],
                  [103.02806497474637, 1.1407212323207225],
                  [102.02491172630027, 1.9111287305341271]]]),
            {
              "system:index": "0"
            })]),
    L8 = ee.ImageCollection("LANDSAT/LC08/C01/T1_SR"),
    geometry4 = 
    /* color: #98ff00 */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[104.15580472111219, -1.5868481419201996],
          [104.15580472111219, -2.487148481491635],
          [105.28739651798719, -2.487148481491635],
          [105.28739651798719, -1.5868481419201996]]], null, false),
    mang = /* color: #0b4a8b */ee.Geometry.MultiPolygon(
        [[[[104.59269881776731, -1.9159794124989085],
           [104.59171176484983, -1.9168372393154627],
           [104.59074616960447, -1.917073141614667],
           [104.58993077806394, -1.9176736200477533],
           [104.58939433626097, -1.9180810874359189],
           [104.58960891298216, -1.9189818044759],
           [104.59029555848997, -1.9190890326633485],
           [104.59068179658811, -1.9189818044759],
           [104.59147573045652, -1.9189818044759],
           [104.5919668447051, -1.9188495773753136],
           [104.59258911719655, -1.918699457889983],
           [104.59344742408132, -1.9183563275883242],
           [104.59370491614675, -1.9173698275877058],
           [104.59361908545827, -1.9165977837123112],
           [104.59310410132741, -1.9160616419273488]]],
         [[[104.36331735108831, -1.9001393717325306],
           [104.36340318177679, -1.9038280579987559],
           [104.36580644105413, -1.9101760112227062],
           [104.36786637757757, -1.910004445227414],
           [104.368123869643, -1.907516736371201],
           [104.36735139344671, -1.9047716741483414],
           [104.3670080706928, -1.9027128746105233],
           [104.3652056262348, -1.9015976905012335]]],
         [[[104.345249991164, -1.9099615537259131],
           [104.34542165254095, -1.91073360058907],
           [104.34640870545843, -1.9115485385681048],
           [104.34713826631048, -1.9127494990951983],
           [104.3476103350971, -1.9139504587816074],
           [104.34949861024359, -1.9139504587816074],
           [104.35009942506292, -1.9127066076622827],
           [104.34949861024359, -1.9100473367278339],
           [104.34859738801458, -1.9080743266002074],
           [104.34542165254095, -1.9086319166484311]]],
         [[[104.48298934500394, -1.7883608109883227],
           [104.48127273123441, -1.7930791934332722],
           [104.48195937674222, -1.7938512912215496],
           [104.48393348257719, -1.7964249481616164],
           [104.48041442434965, -1.7987412363077437],
           [104.48161605398832, -1.8005427917218468],
           [104.4849634508389, -1.7992559666076613],
           [104.48659423391996, -1.798312294280206],
           [104.48959830801664, -1.79951333170315],
           [104.49251655142484, -1.7985696595088325],
           [104.49294570486722, -1.796253371145028],
           [104.49088576834379, -1.7947949658535842],
           [104.48779586355863, -1.793336559398897],
           [104.48513511221586, -1.7909344756461325]]]]),
    veg = /* color: #ffc82d */ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.60934455053712,
                -1.898424941711084
              ],
              [
                104.60007483618165,
                -1.9042582151849317
              ],
              [
                104.61483771459962,
                -1.9214147872054774
              ],
              [
                104.62067420141602,
                -1.9145521789924498
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.18216853149454,
                -1.9727983071217132
              ],
              [
                104.19040827758829,
                -2.0043649779831045
              ],
              [
                104.22336726196329,
                -1.9858367878162335
              ],
              [
                104.18869166381876,
                -1.9703964705630452
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.51533895780312,
                -1.74959915284397
              ],
              [
                104.51628309537637,
                -1.7538028911846928
              ],
              [
                104.52151876737344,
                -1.7538028911846928
              ],
              [
                104.52186209012734,
                -1.7508002219036372
              ],
              [
                104.52100378324258,
                -1.748998618025692
              ],
              [
                104.51902967740762,
                -1.748998618025692
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.46512800504433,
                -1.7181137126043085
              ],
              [
                104.464527190225,
                -1.725663402611362
              ],
              [
                104.46873289396035,
                -1.7291808615924127
              ],
              [
                104.47225195218789,
                -1.7277224037808891
              ],
              [
                104.4743977193998,
                -1.7246339011904688
              ],
              [
                104.47388273526894,
                -1.720601681932251
              ],
              [
                104.47130781461465,
                -1.7178563362818944
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.41568952848183,
                -1.755690280838613
              ],
              [
                104.41603285123574,
                -1.762896660151737
              ],
              [
                104.4246159200834,
                -1.7612666482205657
              ],
              [
                104.42375761319863,
                -1.7580066200817508
              ],
              [
                104.422384322183,
                -1.7559476520074344
              ],
              [
                104.42015272428262,
                -1.7542318435460056
              ],
              [
                104.41843611051308,
                -1.7542318435460056
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.24800679799353,
                -1.697945656785127
              ],
              [
                104.2411403429154,
                -1.7350078758148482
              ],
              [
                104.26585958119665,
                -1.7329488825544954
              ],
              [
                104.2799358141068,
                -1.7144178427915144
              ],
              [
                104.2799358141068,
                -1.7000046877409813
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.18552205678259,
                -1.6341146223707448
              ],
              [
                104.18002889272009,
                -1.6564214013114555
              ],
              [
                104.20749471303259,
                -1.6691189942977491
              ],
              [
                104.21779439564978,
                -1.660196369916725
              ],
              [
                104.20337483998571,
                -1.6492146231065214
              ],
              [
                104.20165822621618,
                -1.6385759980879067
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.20612142201696,
                -1.9205244433107174
              ],
              [
                104.2030315172318,
                -1.9260145128973132
              ],
              [
                104.2078380357865,
                -1.927043898976905
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.16742695490348,
                -1.7818288135982336
              ],
              [
                104.16716946283805,
                -1.785431955922417
              ],
              [
                104.17995823542105,
                -1.7852603778765501
              ],
              [
                104.17961491266715,
                -1.7820861811410444
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.16811360041129,
                -1.777367770479817
              ],
              [
                104.16819943109977,
                -1.7804561860960104
              ],
              [
                104.17901409784781,
                -1.7804561860960104
              ],
              [
                104.17875660578238,
                -1.7779682961433898
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                104.30611175856552,
                -1.8266281399919877
              ],
              [
                104.27864593825302,
                -1.8506483594277334
              ],
              [
                104.2992453034874,
                -1.8698643009122222
              ],
              [
                104.3322042878624,
                -1.849962071939136
              ],
              [
                104.31847137770615,
                -1.8382951440901203
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    wat = /* color: #00ffff */ee.Geometry.MultiPolygon(
        [[[[104.81090735898408, -1.7843766001300887],
           [104.8081607238637, -1.8523210657909097],
           [104.92283157912334, -1.8742823911445725],
           [104.92557841202279, -1.783690597089018]]],
         [[[105.07732614612473, -1.8132020256772454],
           [105.01003488635911, -1.901046477230574],
           [105.06633981799973, -1.9367320204854672],
           [105.12676462268723, -1.868105320655303]]],
         [[[104.43890402329464, -1.9978326132831083],
           [104.43894693863888, -1.999162179742722],
           [104.444912171488, -1.999205068965432],
           [104.44946119797726, -1.999205068965432],
           [104.44907495987911, -1.998004170306132],
           [104.44371054184933, -1.9978326132831083],
           [104.44057772171993, -1.998004170306132]]],
         [[[104.4061984291053, -1.9443447460597805],
           [104.40684215926888, -1.9448594336130052],
           [104.40772192382576, -1.9444305273295586],
           [104.4083227386451, -1.9439801756146127],
           [104.40825836562874, -1.9431652531583767],
           [104.40780775451424, -1.943336815813425],
           [104.40722839736702, -1.943830058349602],
           [104.4066490402198, -1.944151738186852]]]]),
    mud = /* color: #c2b2bc */ee.Geometry.MultiPolygon(
        [[[[104.56730672063395, -1.8467944957811813],
           [104.56353017034098, -1.8536573709699178],
           [104.57348653020426, -1.857088798593947],
           [104.57829304875895, -1.8615496445417385],
           [104.58172627629801, -1.8632653515174562],
           [104.5865327948527, -1.8608633612838132],
           [104.58721944036051, -1.8560593710058266],
           [104.58447285832926, -1.8522847980573358],
           [104.58172627629801, -1.8495396490428513],
           [104.5752031439738, -1.8471376401709416],
           [104.57108327092692, -1.8454219175596174]]],
         [[[104.50279765742675, -1.8172345996400177],
           [104.48563151973144, -1.835764608864988],
           [104.49112468379394, -1.8419412360192846],
           [104.49936442988769, -1.8440001069824372],
           [104.50829082148925, -1.835764608864988],
           [104.52535409536927, -1.828927367631303],
           [104.53702706900208, -1.8234369935358445],
           [104.54664010611145, -1.8165740023686776],
           [104.54732675161927, -1.8055931623114339],
           [104.5384003600177, -1.7980437962638611],
           [104.52123422232239, -1.8055931623114339]]],
         [[[104.73412714300378, -1.9744394750804322],
           [104.73138056097253, -1.9826743087809375],
           [104.73962030706628, -1.990222870351146],
           [104.75060663519128, -1.9909091015094735],
           [104.76571283636315, -1.993654023284738],
           [104.77532587347253, -1.993654023284738],
           [104.78631220159753, -1.993654023284738],
           [104.79180536566003, -1.993654023284738],
           [104.80416498480065, -1.993654023284738],
           [104.8124047308944, -1.9861054774068139],
           [104.79386530218346, -1.972380760273329],
           [104.78356561956628, -1.9689495632684317],
           [104.77120600042565, -1.9668908416739739]]]]),
    bare = /* color: #ff0000 */ee.Geometry.MultiPolygon(
        [[[[104.34887998436182, -1.7445955177473647],
           [104.34922330711572, -1.7459681716962945],
           [104.349094561083, -1.7466973936989931],
           [104.34780710075586, -1.749013744064925],
           [104.3487512383291, -1.749700069550286],
           [104.35063812656449, -1.7469160295041477],
           [104.35085270328568, -1.7454575853854974],
           [104.35068104190873, -1.744685467452859],
           [104.34982273502396, -1.7439991401355492],
           [104.34909317417191, -1.7433986035275477]]],
         [[[104.33003876133012, -1.7593985489300916],
           [104.32785007877396, -1.7615004082613752],
           [104.32892296237992, -1.7627014696719228],
           [104.33124039096879, -1.7623583093479522],
           [104.3319270364766, -1.7613288279966517],
           [104.33154079837846, -1.7600848706049446]]],
         [[[104.47975053898836, -1.6757149623023615],
           [104.47894587628389, -1.676776662548073],
           [104.4808019649222, -1.6778490864540316],
           [104.48203578106904, -1.6765621776963595],
           [104.48173537365938, -1.676208277639654],
           [104.4810916434958, -1.676208277639654],
           [104.48006167523408, -1.675790032035607]]],
         [[[104.23131859128011, -1.9218124774674867],
           [104.23123276059164, -1.9278172356365728],
           [104.2302886230184, -1.929532876939981],
           [104.23260605160726, -1.9328783725023029],
           [104.23535263363851, -1.9301333509873881],
           [104.23646843258871, -1.9281603640356366],
           [104.23852836911215, -1.9258442460000516],
           [104.23844253842367, -1.9249864237062715],
           [104.23672592465414, -1.9249006414531424],
           [104.23423683468832, -1.9243859478437728],
           [104.23329269711508, -1.9217266950547829]]],
         [[[104.26817339351715, -1.9411434369169027],
           [104.26855963161529, -1.9429019554098377],
           [104.27074831417144, -1.9427732833870448],
           [104.27130621364654, -1.9415723440351305],
           [104.26993292263091, -1.9413578904896294],
           [104.26907461574615, -1.9412292183492579],
           [104.26907461574615, -1.9404142945661964],
           [104.26821630886138, -1.9403285130925068]]]]);
  Map.centerObject(geometry,5);
// ----------------------------------------------------------------------------------------
//                           add landsat 8 OLI 2018
// ----------------------------------------------------------------------------------------
function maskL8sr(image) {
  // Bits 3 and 5 are cloud shadow and cloud, respectively.
  var cloudShadowBitMask = (1 << 3);
  var cloudsBitMask = (1 << 5);
  // Get the pixel QA band.g
  var qa = image.select('pixel_qa');
  // Both flags should be set to zero, indicating clear conditions.
  var mask = qa.bitwiseAnd(cloudShadowBitMask).eq(0)
                 .and(qa.bitwiseAnd(cloudsBitMask).eq(0));
  return image.updateMask(mask);
}
//add bands
var bands = ['B2', 'B3', 'B4', 'B5', 'B6', 'B7'];
// Map the function over one year of Landsat 8 TOA data and take the median.
var composite_median = ee.ImageCollection('LANDSAT/LC08/C01/T1_SR')
    .filterDate('2018-01-01', '2018-12-31')
    .map(maskL8sr)
    .median()
    .clip(geometry)
    .select(bands);
var composite_minimum = ee.ImageCollection('LANDSAT/LC08/C01/T1_SR')
    .filterDate('2018-01-01', '2018-12-31')
    .map(maskL8sr)
    .min()
    .clip(geometry)
    .select(bands); 
var composite_maximum = ee.ImageCollection('LANDSAT/LC08/C01/T1_SR')
    .filterDate('2018-01-01', '2018-12-31')
    .map(maskL8sr)
    .max()
    .clip(geometry)
    .select(bands);    
var three = composite_median.addBands(composite_minimum).addBands(composite_maximum);
print(three);
var visParams = {
  bands: ['B4', 'B3', 'B2'],
  min: 0,
  max: 3000,
  gamma: 1.4,
};    
var vegAnalys = {
  bands: ['B6', 'B5', 'B4'],
  min: 0,
  max: 3000,
  gamma: 1.4,
};    
// Display the results.
Map.addLayer(three,vegAnalys, '2018 veg-analysis', false);
Map.addLayer(three, visParams, '2018 trueColor',false);
//---------------------------------------------------------------------------
//                        fraction
//---------------------------------------------------------------------------
// Select the bands for training
var bands = ['B2', 'B3', 'B4', 'B5', 'B6', 'B7'];
var three_band = three.select(bands);
// Now, delineate polygons of 'pure' regions.  Click +New Layer for 
// each polygon.  Name the imports 'bare', 'vegetation' and 'water'.
// Get the mean spectrum in each of the endmember polygons.
var mangroveMean = three_band.reduceRegion(ee.Reducer.mean(), mang, 30).values();
var waterMean = three_band.reduceRegion(ee.Reducer.mean(), wat, 30).values();
var vegMean = three_band.reduceRegion(ee.Reducer.mean(), veg, 30).values();
var bareMean = three_band.reduceRegion(ee.Reducer.mean(), bare, 30).values();
var mudMean = three_band.reduceRegion(ee.Reducer.mean(), mud, 30).values();
// Optional: plot the endmembers
var chart = ui.Chart.image.regions(three_band.divide(10000), ee.FeatureCollection([
  ee.Feature(mang, {label: 'mangrove'}), 
    ee.Feature(wat, {label: 'water'}),
    ee.Feature(veg, {label: 'vegetation'}),
    ee.Feature(bare, {label: 'bare'}),
    ee.Feature(mud, {label: 'mud'})]), 
  ee.Reducer.mean(), 30, 'label', [0.48, 0.56, 0.65, 0.86, 1.61, 2.2]);
print(chart);
// Turn the endmember lists into an array that can be used in unmixing.
// Concatenate the lists along the 1-axis to make an array.
var endmembers = ee.Array.cat([mangroveMean, vegMean, waterMean, bareMean, mudMean], 1);
// Turn the image into an array image, in which each pixel has a 2-D matrix.
var arrayImage = three_band.toArray().toArray(1);
// Perform the unmixing in array space using the matrixSolve image method.  
// Note the need to cast the endmembers into an array image.
var unmixed = ee.Image(endmembers).matrixSolve(arrayImage);
// Convert the result from an array image back to a multi-band image.
var unmixedImage = unmixed.arrayProject([0])
    .arrayFlatten([['mangrove', 'veg', 'water','bare','mud']]);
// Display the result.
//Map.addLayer(unmixedImage, {}, 'fractions');
// Constrained:i
var constrained = three_band.unmix([mangroveMean, vegMean, waterMean, bareMean, mudMean], true, true);
Map.addLayer(constrained, {}, 'Fractional cover',false);
Map.addLayer (table,{},"Mangrove shp");
//Map.centerObject(geometry,10);
//export image 
Export.image.toDrive({
  image: constrained,
  description: 'mangrove2018',
  scale: 30,
  folder: 'GEE',
  maxPixels: 9999999999999,
});