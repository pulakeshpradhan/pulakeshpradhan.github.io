<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Earth Engine AI Assistant</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- Base Styles --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Use a very light gray as a base */
            background-image: linear-gradient(to top right, #f8fafc, #eef2ff); /* Subtle gradient */
        }

        /* --- Tab Styles --- */
        .tab-button {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #475569; /* Slate 600 */
            position: relative;
            top: 1px;
        }
        .tab-button:hover {
            color: #0f172a; /* Slate 900 */
        }
        .tab-button.active {
            color: #2563eb; /* Blue 600 */
            border-bottom-color: #2563eb;
        }

        /* --- Collapsible Accordion Styles --- */
        .collapsible-container {
             background-color: #ffffff;
             border: 1px solid #e2e8f0; /* Slate 200 */
             border-radius: 0.75rem; /* Slightly larger radius */
             margin-bottom: 1rem;
             transition: box-shadow 0.3s ease;
        }
        .collapsible-container:hover {
            box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.05);
        }
        .collapsible-button {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem;
            text-align: left;
            background-color: transparent;
            border: none;
            cursor: pointer;
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), padding 0.4s ease;
            padding: 0 1.25rem;
        }
        .collapsible-content.open {
            padding-top: 0.5rem;
            padding-bottom: 1.25rem;
            border-top: 1px solid #f1f5f9; /* Slate 100 */
        }
        
        /* --- Copy Button Style --- */
        .copy-btn {
            background-color: #f1f5f9; /* Slate 100 */
            color: #475569; /* Slate 600 */
            padding: 0.5rem;
            border: 1px solid transparent;
            border-radius: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease-in-out;
        }
        .copy-btn:hover {
            background-color: #e2e8f0; /* Slate 200 */
            color: #1e293b; /* Slate 800 */
            transform: scale(1.05);
        }
        .copy-btn.copied {
            background-color: #dcfce7; /* Green 100 */
            color: #166534; /* Green 800 */
            border-color: #16a34a; /* Green 600 */
        }
        
        /* --- Prompt Item Styling --- */
        .prompt-item {
             background-color: #f8fafc; /* Slate 50 */
             border: 1px solid #e2e8f0; /* Slate 200 */
        }
        .prompt-item:hover {
            border-color: #cbd5e1; /* Slate 300 */
            background-color: #ffffff;
        }
    </style>
</head>
<body class="antialiased text-slate-800">

    <div class="container mx-auto px-4 py-10 md:py-16">
        <!-- Page Title -->
        <header class="text-center mb-14">
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight">Prompts for GEE AI Assistant</h1>
            <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">A curated collection of effective prompts to streamline your Google Earth Engine workflows.</p>
        </header>

        <main class="max-w-6xl mx-auto">
            <!-- Tab Navigation -->
            <div class="mb-8">
                 <div class="border-b border-slate-200">
                    <nav class="flex flex-wrap -mb-px text-sm font-medium" id="promptTabs" aria-label="Tabs">
                        <button class="tab-button" data-tab-id="curated">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" /></svg>
                            Curated Prompts
                        </button>
                        <button class="tab-button" data-tab-id="how-it-works">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /></svg>
                            How it Works
                        </button>
                        <button class="tab-button" data-tab-id="youtube">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>
                            Video Tutorials
                        </button>
                        <button class="tab-button" data-tab-id="user">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" /></svg>
                            User Contributions
                        </button>
                        <button class="tab-button" data-tab-id="contribute">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /></svg>
                            Contribute
                        </button>
                        <button class="tab-button" data-tab-id="about-me">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" /></svg>
                            About Me
                        </button>
                    </nav>
                </div>
            </div>

            <!-- Tab Content -->
            <div id="tabContentContainer">
                <!-- Curated Prompts Tab -->
                <div id="curated" class="tab-content">
                    
                    <!-- Common Issue Tackling Section -->
                    <div class="bg-blue-50 border border-blue-200 p-6 rounded-xl mb-8">
                        <div class="flex items-start">
                            <div class="flex-shrink-0 pt-1">
                                <svg class="w-7 h-7 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 01-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 013.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 013.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 01-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.684-2.684L11.25 18l1.938-.648a3.375 3.375 0 002.684-2.684L16.25 13l.648 1.938a3.375 3.375 0 002.684 2.684L21.75 18l-1.938.648a3.375 3.375 0 00-2.684 2.684z" /></svg>
                            </div>
                            <div class="ml-4 flex-1">
                                <h3 class="font-bold text-blue-900 text-lg">Pro Tip: Tackling Common Issues</h3>
                                <p class="mt-1 text-sm text-blue-800">If the AI can't find a dataset by its common name, provide the exact GEE Dataset ID in your prompt for a guaranteed match.</p>
                                <div class="mt-4 p-4 bg-white/70 rounded-lg border border-blue-200/80">
                                    <p class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Example: Dataset Not Found</p>
                                    <p class="mt-2 text-sm text-slate-700"><strong>Problem Prompt:</strong> "Generate a map of global population density from the WorldPop dataset."</p>
                                    <p class="mt-2 text-sm text-green-800"><strong>Solution Prompt:</strong> "Generate a map of global population density from the WorldPop dataset. <code class='text-sm bg-slate-200 text-slate-800 py-1 px-2 rounded-md'>ee.ImageCollection(\"CIESIN/GPWv411/GPW_UNWPP-Adjusted_Population_Count\")</code>"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Collapsible Categories -->
                    <div class="space-y-4">
                        <div class="collapsible-container"><button class="collapsible-button"><div><span class="font-semibold text-lg text-slate-800">🗺️ Map Generation</span><p class="text-sm font-normal text-slate-500 mt-1">Keywords: show, display, map, generate, view, overlay</p></div><svg class="w-6 h-6 transform transition-transform duration-300 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div class="collapsible-content"><div class="space-y-3" data-category="map-gen-content"></div></div></div>
                        <div class="collapsible-container"><button class="collapsible-button"><div><span class="font-semibold text-lg text-slate-800">🎨 Fixing Visualization</span><p class="text-sm font-normal text-slate-500 mt-1">Keywords: fix, adjust, change, apply, modify, set, stretch</p></div><svg class="w-6 h-6 transform transition-transform duration-300 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div class="collapsible-content"><div class="space-y-3" data-category="viz-fix-content"></div></div></div>
                        <div class="collapsible-container"><button class="collapsible-button"><div><span class="font-semibold text-lg text-slate-800">📊 Calculating Statistics</span><p class="text-sm font-normal text-slate-500 mt-1">Keywords: calculate, compute, get, count, extract, reduceRegion</p></div><svg class="w-6 h-6 transform transition-transform duration-300 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div class="collapsible-content"><div class="space-y-3" data-category="stats-content"></div></div></div>
                        <div class="collapsible-container"><button class="collapsible-button"><div><span class="font-semibold text-lg text-slate-800">📈 Creating Charts</span><p class="text-sm font-normal text-slate-500 mt-1">Keywords: chart, plot, create, generate, histogram, time-series</p></div><svg class="w-6 h-6 transform transition-transform duration-300 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div class="collapsible-content"><div class="space-y-3" data-category="chart-content"></div></div></div>
                        <div class="collapsible-container"><button class="collapsible-button"><div><span class="font-semibold text-lg text-slate-800">💾 Exporting & Downloading</span><p class="text-sm font-normal text-slate-500 mt-1">Keywords: export, download, save, get URL, to Drive, to Asset</p></div><svg class="w-6 h-6 transform transition-transform duration-300 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div class="collapsible-content"><div class="space-y-3" data-category="export-content"></div></div></div>
                    </div>
                </div>

                <!-- How It Works Tab -->
                <div id="how-it-works" class="tab-content">
                    <div class="prose prose-lg prose-slate max-w-none bg-white p-8 rounded-xl border border-slate-200">
                        <h2>Initial Setup: API Key</h2>
                        <p>To use the GEE AI Assistant, you need a Gemini API key. This allows the tool to make requests to Google's generative models.</p>
                        <ol>
                            <li>Go to <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a>.</li>
                            <li>Click on <strong>"Get API key"</strong> and then <strong>"Create API key in new project"</strong>.</li>
                            <li>Copy the generated API key to your clipboard.</li>
                            <li>Paste the key into the "Gemini API Key" field at the top of the GEE AI Assistant panel in the Code Editor.</li>
                        </ol>
                        
                        <h2>Generate Script</h2>
                        <p>This is for creating new Google Earth Engine code from scratch. Type a description of what you want to achieve and click 'Generate'.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 not-prose">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800">What to Do</h4>
                                <ul class="mt-2 list-disc list-inside text-sm text-green-700 space-y-1">
                                    <li>Be specific about locations, dates, and datasets.</li>
                                    <li>Clearly state your goal (e.g., "calculate NDVI", "create a cloud-free mosaic").</li>
                                    <li>Use prompts from the "Curated" tab as inspiration.</li>
                                </ul>
                            </div>
                            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                                <h4 class="font-semibold text-red-800">What to Avoid</h4>
                                <ul class="mt-2 list-disc list-inside text-sm text-red-700 space-y-1">
                                    <li>Vague requests like "show me a map".</li>
                                    <li>Asking for multiple, complex tasks in one prompt.</li>
                                    <li>Using ambiguous dataset or place names.</li>
                                </ul>
                            </div>
                        </div>

                        <h2 class="mt-8">Modify Existing Code</h2>
                        <p>This allows you to make changes or additions to the code already in the editor. Enter your desired change and click 'Modify'.</p>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-6 not-prose">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800">What to Do</h4>
                                <ul class="mt-2 list-disc list-inside text-sm text-green-700 space-y-1">
                                    <li>Clearly state the change, e.g., "Change the color palette to 'viridis'".</li>
                                    <li>Refer to specific variables or layers if you know them.</li>
                                    <li>Focus on one modification at a time for best results.</li>
                                </ul>
                            </div>
                            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                                <h4 class="font-semibold text-red-800">What to Avoid</h4>
                                <ul class="mt-2 list-disc list-inside text-sm text-red-700 space-y-1">
                                    <li>Ambiguous requests like "make it better".</li>
                                    <li>Trying to rewrite the entire script with one command.</li>
                                </ul>
                            </div>
                        </div>

                        <h2 class="mt-8">Actions</h2>
                        <p>These buttons provide core functionalities for interacting with your script.</p>
                        <div class="space-y-4 not-prose">
                            <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                                <h4 class="font-semibold text-slate-800">Run Script</h4>
                                <p class="mt-1 text-sm text-slate-600">Executes the code currently in the script editor and displays the output on the map or in the console.</p>
                            </div>
                            <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                                <h4 class="font-semibold text-slate-800">Fix with Console Errors</h4>
                                <p class="mt-1 text-sm text-slate-600">If your script fails, copy the error message from the GEE Console, paste it into the 'Modify Existing Code' box, and click 'Modify' or 'Fix'. The AI will attempt to debug the code for you.</p>
                            </div>
                        </div>

                        <!-- Video CTA -->
                        <div class="mt-12 not-prose">
                            <div class="bg-indigo-50 rounded-xl border border-indigo-200 p-6 flex flex-col md:flex-row items-center text-center md:text-left">
                                <div class="flex-shrink-0 mb-4 md:mb-0 md:mr-6">
                                    <svg class="w-16 h-16 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z" /></svg>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-slate-900">Prefer Watching to Reading?</h3>
                                    <p class="mt-1 text-slate-600">Check out our quick video tutorial for a visual guide on getting started with the GEE AI Assistant.</p>
                                </div>
                                <div class="mt-4 md:mt-0 md:ml-auto flex-shrink-0">
                                    <button class="cta-video-btn font-semibold bg-indigo-600 text-white py-2 px-5 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm">
                                        Watch Video
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- YouTube Tab -->
                <div id="youtube" class="tab-content">
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6">
                        <h3 class="font-bold text-slate-900 text-2xl mb-4 text-center">GEE AI Assistant Video Library</h3>
                        <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">Explore our collection of tutorials to help you master the GEE AI Assistant, from basic setup to advanced workflows.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="video-grid">
                            <!-- Video items will be injected here by JavaScript -->
                        </div>
                    </div>
                </div>


                <!-- User Contributions Tab -->
                <div id="user" class="tab-content"><div id="user-contrib-content-data" class="space-y-4"></div></div>

                <!-- Contribute Tab -->
                <div id="contribute" class="tab-content"><div class="bg-white rounded-xl shadow-sm border border-slate-200 p-1"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSck1zEJptr4W-VfOR0zv2GHOAJkLST-3ABWBtFX9sH05ExhSw/viewform?embedded=true" class="w-full rounded-lg" height="1100" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe></div></div>

                <!-- About Me Tab -->
                <div id="about-me" class="tab-content"><div class="bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center"><img class="w-24 h-24 rounded-full mx-auto" src="https://placehold.co/96x96/e0e7ff/4338ca?text=PP" alt="Pulakesh Pradhan"><h3 class="font-bold text-slate-900 text-2xl mt-6">Pulakesh Pradhan</h3><p class="mt-2 text-slate-600">Creator of this prompt guide and the GEE AI Assistant.</p><a href="https://pulakeshpradhan.github.io/" target="_blank" rel="noopener noreferrer" class="mt-8 inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-sm transition-all shadow-md hover:shadow-lg">Visit my Portfolio</a></div></div>
            </div>
        </main>
         <footer class="text-center mt-16 py-8 border-t border-slate-200">
            <p class="text-slate-500 text-sm">&copy; 2025 Pulakesh Pradhan. All Rights Reserved.</p>
             <p class="text-xs text-slate-400 mt-2">Designed to help you harness the power of AI in Earth Engine.</p>
        </footer>
    </div>

    <script>
        // --- DATA & TEMPLATES ---
        const promptData = {
            "map-gen-content": ["Show a Sentinel-2 true-color image of New Delhi for March 2024.", "Display a false-color composite of Landsat 9 over the Amazon basin, highlighting vegetation.", "Generate a map of global population density from the WorldPop dataset.", "Map the locations of active fires from the MODIS collection for the last 24 hours in Australia.", "Create a view of the SRTM elevation data for the Himalayas.", "I want to see the land cover classification for Africa in 2020.", "Overlay the boundaries of all national parks in the United States on a satellite basemap.", "Display the mean precipitation from CHIRPS for the Horn of Africa for last year.", "Generate a cloud-free mosaic of Landsat 8 images for Iceland for the summer of 2022.", "Show me the nighttime lights from VIIRS for Europe in 2023."],
            "viz-fix-content": ["The current map is too dark. Adjust the visualization parameters for my Landsat image to increase brightness.", "Apply a different color palette to my NDVI layer. Use a green-to-yellow ramp.", "Change the stretch of my elevation data to a min of 0 and a max of 3000 meters.", "Make the forest layer 50% transparent so I can see the basemap underneath.", "Modify the visualization of my water mask to be solid blue.", "The reds in my false-color image are too saturated. Tone them down.", "Can you apply a percentile stretch to the current image?", "Set the gamma value to 1.5 to lighten the mid-tones.", "Visualize the land cover layer using the official colors provided in the dataset's documentation.", "Invert the color palette for the temperature map."],
            "stats-content": ["Calculate the total area of deforestation in square kilometers within my drawn polygon.", "Compute the average NDVI for each county in California for 2023.", "Generate a report with the minimum, maximum, and mean temperature for the Sahara desert last month.", "Get the sum of the population for all census tracts in Chicago.", "What is the area of pixels classified as 'urban' in my land cover map for China?", "Count the number of pixels in this image that have an NDVI value greater than 0.5.", "Extract the pixel values from this image for a list of coordinates I provide.", "Calculate the histogram of slope values for this region.", "Run a `reduceRegion` to get the standard deviation of elevation within the current map view."],
            "chart-content": ["Create a time-series chart of monthly average precipitation for this point over the last decade.", "Generate a histogram of elevation values for the state of Colorado.", "Make a bar chart showing the area of each land cover class in this region.", "Chart the annual mean NDVI for this geometry from 2000 to 2023.", "I need a scatter plot of temperature vs. precipitation for this area.", "Plot the spectral profile for this pixel from a Landsat image.", "Create a time-series chart with a linear trendline.", "Chart the monthly burned area from the MODIS dataset for California for the last 5 years.", "Make a pie chart of the land cover class distribution."],
            "export-content": ["Export the current map view as a GeoTIFF to my Google Drive. Name it 'my_map'.", "Create a task to export this image collection as a series of TIFFs to my Drive folder 'GEE_Exports'.", "Generate a download URL for an RGB image of the current map as a high-resolution PNG.", "Export the results of my statistics calculation as a CSV file to my Drive.", "I need to export this feature collection as a Shapefile.", "Start an export task to save this ImageCollection to a TFRecord file in Google Cloud Storage.", "Get a URL for a thumbnail of this image, with dimensions 500x500 pixels.", "Write a script to export this image, clipping it to my geometry, at a scale of 30 meters.", "Export my land cover classification result to an Asset in my Earth Engine account. Asset ID should be 'my_landcover_map'.", "Prepare a download link for a video of this image collection time-series."]
        };

        const videoData = [
            { title: "Introducing the GEE AI Assistant", desc: "A quick tutorial on how to get started and use the GEE AI Assistant for your geospatial analysis workflows." },
            { title: "Mastering Map Generation", desc: "Learn how to generate complex maps with simple text prompts." },
            { title: "Advanced Visualization Techniques", desc: "Customize your map layers with advanced visualization parameters." },
            { title: "Calculating Statistics on the Fly", desc: "Perform powerful statistical analysis using reduceRegion and other functions." },
            { title: "Creating Insightful Charts", desc: "Visualize your data with time-series, histograms, and more." },
            { title: "Exporting Data for Reports", desc: "Learn how to export images, tables, and charts to your Google Drive." },
            { title: "Debugging with AI", desc: "Use the AI assistant to fix common errors in your GEE scripts." },
            { title: "User Contributions Showcase", desc: "See how other users are leveraging the AI Assistant in their work." },
            { title: "Cloud-Free Mosaics Made Easy", desc: "Generate beautiful, cloud-free imagery for any region." },
            { title: "Time-Series Analysis Workflows", desc: "Explore changes over time with powerful time-series tools." },
        ];
        
        const copyIconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
        const copiedIconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><polyline points="20 6 9 17 4 12"></polyline></svg>`;

        function createPromptItem(text) {
            return `<div class="prompt-item flex justify-between items-center p-4 rounded-lg transition-colors"><p class="prompt-text text-sm text-slate-700 flex-grow mr-4">${text}</p><button class="copy-btn flex-shrink-0" title="Copy prompt">${copyIconSVG}</button></div>`;
        }

        function createVideoItem({ title, desc }) {
            return `
                <div class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow border border-slate-200">
                    <div style="position: relative; padding-bottom: 56.25%; height: 0;">
                        <iframe
                            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                            src="https://www.youtube.com/embed/jWFps9WWxBM?si=u92yVaj8g5GlNtxS"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold text-slate-800">${title}</h4>
                        <p class="text-sm text-slate-600 mt-1">${desc}</p>
                    </div>
                </div>
            `;
        }
        
        // --- UI INITIALIZATION ---
        window.addEventListener('DOMContentLoaded', () => {
            // Populate prompts
            for (const key in promptData) {
                const container = document.querySelector(`[data-category="${key}"]`);
                if(container) {
                    container.innerHTML = promptData[key].map(createPromptItem).join('');
                }
            }
            // Populate videos
            const videoGrid = document.getElementById('video-grid');
            if (videoGrid) {
                videoGrid.innerHTML = videoData.map(createVideoItem).join('');
            }

            setupTabs();
            setupCollapsibles();
            loadUserContributions();
            setupVideoCTA();
        });

        // --- UI LOGIC ---
        function setupTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            function setActiveTab(tabButton) {
                if (!tabButton) return;
                const tabId = tabButton.dataset.tabId;
                
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabButton.classList.add('active');

                tabContents.forEach(content => {
                    content.style.display = content.id === tabId ? 'block' : 'none';
                });
            }

            tabButtons.forEach(button => {
                button.addEventListener('click', (e) => setActiveTab(e.currentTarget));
            });

            if (tabButtons.length > 0) {
                 setActiveTab(tabButtons[0]);
            }
            
            return { setActiveTab };
        }

        function setupCollapsibles() {
            const buttons = document.querySelectorAll('.collapsible-button');
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const svg = button.querySelector('svg');
                    const isAlreadyOpen = content.classList.contains('open');

                    document.querySelectorAll('.collapsible-content.open').forEach(openContent => {
                        if (openContent !== content) {
                            openContent.style.maxHeight = null;
                            openContent.classList.remove('open');
                            openContent.previousElementSibling.querySelector('svg').classList.remove('rotate-180');
                        }
                    });

                    if (isAlreadyOpen) {
                        content.style.maxHeight = null;
                        content.classList.remove('open');
                        svg.classList.remove('rotate-180');
                    } else {
                        content.classList.add('open');
                        setTimeout(() => {
                            content.style.maxHeight = content.scrollHeight + "px";
                        }, 10);
                        svg.classList.add('rotate-180');
                    }
                });
            });
        }
        
        function setupVideoCTA() {
            const ctaButton = document.querySelector('.cta-video-btn');
            if (ctaButton) {
                ctaButton.addEventListener('click', () => {
                    const videoTabButton = document.querySelector('.tab-button[data-tab-id="youtube"]');
                    if (videoTabButton) {
                        videoTabButton.click();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                });
            }
        }

        function generateStars(rating) {
            let starsHtml = '';
            for (let i = 1; i <= 5; i++) {
                starsHtml += `<svg class="w-5 h-5 ${i <= rating ? 'text-amber-400' : 'text-slate-300'}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>`;
            }
            return `<div class="flex" title="Rated ${rating} out of 5">${starsHtml}</div>`;
        }

        async function loadUserContributions() {
            const container = document.getElementById('user-contrib-content-data');
            if (!container) return;

            container.innerHTML = '<p class="text-slate-500 text-center p-4">Loading contributions...</p>';
            const sheetId = '1x55zbgGhcsn3ZWLrVUQpE2eczra6cWR9paBJt4I0_t4';
            const sheetName = 'Form_Responses1';
            const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(sheetName)}`;

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
                
                const csvText = await response.text();
                container.innerHTML = ''; 
                
                const rows = csvText.trim().split('\n').slice(1);
                if (rows.length === 0 || (rows.length === 1 && rows[0].trim() === '')) {
                     container.innerHTML = '<p class="text-slate-500 text-center p-4">No contributions yet. Be the first!</p>';
                     return;
                }

                rows.forEach(row => {
                    const columns = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(col => col.replace(/^"|"$/g, '').trim());
                    const prompt = columns[3], contributor = columns[4], affiliation = columns[5], country = columns[8], rating = parseInt(columns[6], 10), appreciation = columns[7];

                    if (!prompt || !contributor || isNaN(rating)) return;

                    const cardHtml = `
                        <div class="p-6 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow border border-slate-200 flex flex-col">
                            <!-- Prompt Section with Copy Button -->
                            <div class="flex justify-between items-start gap-4 mb-4">
                                <p class="prompt-text text-base font-medium text-slate-800 flex-grow">${prompt}</p>
                                <button class="copy-btn flex-shrink-0" title="Copy prompt">${copyIconSVG}</button>
                            </div>

                            <!-- Contributor Section -->
                            <div class="mt-auto pt-4 border-t border-slate-100">
                                <div class="text-xs text-slate-500">
                                    <p>Contributed by: <strong class="text-slate-600 font-semibold">${contributor}</strong></p>
                                    ${affiliation ? `<p class="mt-1">Affiliation: ${affiliation}</p>` : ''}
                                    ${country ? `<p class="mt-1">Country: ${country}</p>` : ''}
                                </div>
                                ${appreciation ? `<blockquote class="mt-2 text-sm text-slate-600 italic border-l-4 pl-3 border-slate-200">“${appreciation}”</blockquote>` : ''}
                            </div>
                        </div>`;
                    container.insertAdjacentHTML('beforeend', cardHtml);
                });
            } catch (error) {
                console.error('Error fetching or parsing sheet data:', error);
                container.innerHTML = '<p class="text-red-500 text-center p-4">Could not load contributions. Please try again later.</p>';
            }
        }
        
        // --- EVENT LISTENERS ---
        document.querySelector('main').addEventListener('click', (event) => {
            const button = event.target.closest('.copy-btn');
            if (!button) return;

            event.stopPropagation();
            const container = button.closest('.prompt-item, .p-6');
            const promptText = container?.querySelector('.prompt-text')?.textContent;
            if (!promptText) return;

            function updateButtonState(btn, copied) {
                btn.classList.toggle('copied', copied);
                btn.innerHTML = copied ? copiedIconSVG : copyIconSVG;
            }

            const textArea = document.createElement('textarea');
            textArea.value = promptText;
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    updateButtonState(button, true);
                    setTimeout(() => updateButtonState(button, false), 2000);
                } else {
                    console.error('Fallback: Oops, unable to copy');
                }
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
            }

            document.body.removeChild(textArea);
        });
    </script>
</body>
</html>
